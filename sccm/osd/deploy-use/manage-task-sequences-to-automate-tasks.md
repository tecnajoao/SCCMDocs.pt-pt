---
title: "Управление последовательностями задач для автоматизации задач| Документация Майкрософт"
description: "Последовательности задач можно создавать, изменять, развертывать, импортировать и экспортировать для управления ими в среде System Center Configuration Manager."
ms.custom: na
ms.date: 03/24/2017
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology: configmgr-osd
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: a1f099f1-e9b5-4189-88b3-f53e3b4e4add
caps.latest.revision: "10"
author: Dougeby
ms.author: dougeby
manager: angrobe
ms.openlocfilehash: 2f3d66362c49d28a52d7f9c535eb0b3b4cc4eaf7
ms.sourcegitcommit: 51fc48fb023f1e8d995c6c4eacfda7dbec4d0b2f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2017
---
# <a name="manage-task-sequences-to-automate-tasks-in-system-center-configuration-manager"></a>Управление последовательностями задач для автоматизации задач в System Center Configuration Manager

*Применимо к: System Center Configuration Manager (Current Branch)*

Последовательности задач служат для автоматизации задач в среде System Center Configuration Manager. С помощью этих действий может осуществляться развертывание образа операционной системы на конечный компьютер, сбор данных из набора файлов установки операционной системы и создание с их помощью образа ОС, а также сбор и восстановление данных о пользовательской среде. Последовательности задач находятся в разделе **Библиотека программного обеспечения** > **Операционные системы** > **Последовательность задач** консоли Configuration Manager. Узел **Последовательность задач**, включая все созданные вложенные папки, реплицируется в рамках иерархии Configuration Manager. Дополнительные сведения о планировании см. в статье [Вопросы планирования для автоматизации задач](../plan-design/planning-considerations-for-automating-tasks.md).  

 Для управления последовательностями задач используйте следующие сценарии.

##  <a name="BKMK_CreateTaskSequence"></a> Создание последовательностей задач  
 Создание новой последовательности с помощью мастера создания последовательности задач. Этот мастер создает следующие типы последовательностей задач:  

|Тип последовательностей задач|Дополнительные сведения|  
|------------------------|----------------------|  
|[Последовательность задач для установки операционной системы](create-a-task-sequence-to-install-an-operating-system.md)|Этот тип последовательности задач создает шаги для установки операционной системы, а также дает возможность переноса данных пользователя, включения обновлений программного обеспечения и установки приложений.|  
|[Последовательность задач для обновления операционной системы](create-a-task-sequence-to-upgrade-an-operating-system.md)|Этот тип последовательности задач создает шаги для обновления операционной системы, а также дает возможность включения обновлений программного обеспечения и установки приложений.|  
|[Последовательность задач для записи операционной системы](create-a-task-sequence-to-capture-an-operating-system.md)|Этот тип последовательности задач создает шаги для создания и записи операционной системы с компьютера-образца. До записи образа вы можете включать обновления программного обеспечения и устанавливать приложения на компьютере-образце.|  
|[Последовательность задач для записи и восстановления пользовательской среды](create-a-task-sequence-to-capture-and-restore-user-state.md)|Эта последовательность задач предоставляет шаги, которые можно добавить в существующую последовательность задач для сбора и восстановления данных о пользовательской среде.|  
|[Последовательность задач для управления виртуальными жесткими дисками](use-a-task-sequence-to-manage-virtual-hard-disks.md)|Этот тип последовательности задач содержит шаги для создания виртуального жесткого диска, что включает в себя установку операционной системы и приложений, которые можно опубликовать в System Center Virtual Machine Manager (VMM) из консоли Configuration Manager.|  
|[Настраиваемая последовательность задач](create-a-custom-task-sequence.md)|Этот тип последовательности задач не добавляет никакие шаги. Вам необходимо изменить последовательность задач после ее создания и добавить в нее шаги.|  

## <a name="return-to-previous-page-when-a-task-sequence-fails"></a>Возврат на предыдущую страницу при сбое последовательности задач
В Configuration Manager версии 1702 появилась возможность вернуться на предыдущую страницу, если запуск последовательности задач завершился сбоем. До этого выпуска в случае сбоя необходимо было перезапускать последовательность задач. Например, кнопку **Назад** можно использовать в описанных ниже сценариях.

- Когда компьютер загружается в среде Windows PE, диалоговое окно начальной загрузки последовательности задач может выводиться до того, как последовательность задач станет доступна. Если нажать кнопку "Далее" в этой ситуации, откроется последняя страница последовательности задач с сообщением о том, что нет доступных последовательностей задач. Теперь можно нажать кнопку **Назад**, чтобы еще раз выполнить поиск доступных последовательностей. Эту процедуру можно повторять до тех пор, пока последовательность задач не станет доступна.
- Если при запуске последовательности задач зависимые пакеты содержимого еще не доступны в точках распространения, последовательность задач завершается сбоем. Теперь можно распространить отсутствующее содержимое (если оно еще не было распространено) или подождать, когда содержимое станет доступно в точках распространения, а затем нажать кнопку **Назад**, чтобы последовательность задач еще раз выполнила поиск содержимого.

##  <a name="BKMK_ModifyTaskSequence"></a> Изменение последовательности задач  
 Последовательность задач можно изменить, добавив или удалив шаги последовательности задач, добавив или удалив группы последовательности задач или изменив порядок шагов. Используйте следующую процедуру для изменения существующей последовательности задач.  

> [!IMPORTANT]  
>  Во время редактирования последовательности задач, созданной мастером создания последовательности задач, отображается имя шага, которое может быть действием шага или типом шага. Например, можно увидеть шаг с именем "Создать разделы на диске 0", являющийся действием для шага с типом [Отформатировать диск и создать разделы](../understand/task-sequence-steps.md#BKMK_FormatandPartitionDisk). Все шаги последовательности задач документируются по своему типу, не обязательно по имени шага, отображаемому в редакторе.  

#### <a name="to-edit-a-task-sequence"></a>Процедура редактирования последовательности задач  

1.  В консоли Configuration Manager щелкните **Библиотека программного обеспечения**.  

2.  В рабочей области **Библиотека программного обеспечения** разверните узел **Операционные системы**и выберите элемент **Последовательности задач**.  

3.  В списке **Последовательность задач** выберите последовательность задач, которую требуется отредактировать.  

4.  На вкладке **Главная** в группе **Последовательность задач** нажмите кнопку **Изменить**, а затем выполните любое из следующих действий:  

    -   Чтобы добавить шаг последовательности задач, щелкните **Добавить**, выберите тип шага, затем шаг последовательности задач, который требуется добавить. Например, чтобы добавить шаг запуска из командной строки, нажмите кнопку **Добавить**, выберите **Общие**, а затем нажмите кнопку **Выполнить из командной строки**.  

         Список всех шагов последовательности задач и их типов см. в таблице, которая приводится после этой процедуры.  

    -   Чтобы добавить в последовательность задач группу, нажмите кнопку **Добавить**, а затем щелкните **Новая группа**. После добавления группы в нее можно добавить шаги.  

    -   Чтобы изменить последовательность шагов и групп в последовательности задач, выберите шаг или группу, для которых требуется изменить порядок, и затем используйте значки **Переместить элемент вверх** или **Переместить элемент вниз** . Одним действием можно переместить только один шаг или группу.  

    -   Чтобы удалить шаг или группу, выберите шаг или группу и щелкните **Удалить**.  

5.  Нажмите кнопку **ОК** , чтобы сохранить изменения.  

 Список доступных шагов последовательности задач см. в статье [Шаги последовательности задач](../understand/task-sequence-steps.md).  

## <a name="configure-software-center-properties"></a>Настройка свойств центра программного обеспечения
Следующая процедура предназначена для настройки сведений о последовательности задач, отображаемой в центре программного обеспечения. Эти сведения приведены исключительно в информационных целях.  
1. В консоли Configuration Manager последовательно выберите **Библиотека программного обеспечения** > **Операционные системы** > **Последовательность задач**.
2. Выберите последовательность задач, которую нужно изменить, и нажмите кнопку **Свойства**.
3. На вкладке **Общее** вкладки доступны следующие параметры для центра программного обеспечения.
  - **Требуется перезагрузка**: позволяет пользователям узнать, требуется ли перезагрузка во время установки.
  - **Размер скачиваемого файла (МБ)**: указывает, сколько мегабайтов отображается в Центре программного обеспечения для последовательности задач.  
  - **Предполагаемое время выполнения (в минутах)**: указывает предполагаемое время выполнения в минутах, которое отображается в Центре программного обеспечения для последовательности задач.

## <a name="configure-advanced-task-sequence-settings"></a>Настройка дополнительных параметров для последовательностей задач
Следующая процедура предназначена для настройки сведений о последовательности задач, отображаемой в центре программного обеспечения. Эти сведения приведены исключительно в информационных целях.  
1. В консоли Configuration Manager последовательно выберите **Библиотека программного обеспечения** > **Операционные системы** > **Последовательность задач**.
2. Выберите последовательность задач, которую нужно изменить, и нажмите кнопку **Свойства**.
3. На вкладке **Дополнительно** доступны следующие параметры:

    - **Запустить сначала другую программу**    
    Установите этот флажок для запуска другой программы (в другом пакете) перед выполнением последовательности задач. По умолчанию этот флажок снят. Нет необходимости отдельно объявлять программу, которую следует запустить первой.

        > [!IMPORTANT]     
        Этот параметр применяется только к последовательности задач, которая выполняется в полнофункциональной операционной системе. Configuration Manager пропускает этот параметр, если последовательность задач запускается по сети (PXE) или с загрузочного носителя.

    - **Пакет**     
        Выбрав параметр **Запустить сначала другую программу**, введите или найдите имя пакета, содержащего программу, которая должна быть запущена перед последовательностью задач.

    - **Программа**     
    Выбрав параметр **Запустить сначала другую программу**, выберите программу, которая должна быть запущена перед последовательностью задач, в раскрывающемся списке **Программа**.

        > [!NOTE]    
        > Если выбранную программу не удается выполнить в клиенте, последовательность задач не запустится. Выполняемая выбранная программа больше не будет запускаться, даже если последовательность задач в этом клиенте выполняется повторно.
 
    - **Отключить эту последовательность задач на компьютерах, на которых она развернута**    
    Если этот флажок установлен, все развертывания, содержащие эту последовательностью задач, будут временно отключены. Последовательность задач удаляется из списка объявлений, доступных для выполнения, и не будет запускаться до повторного включения. По умолчанию этот параметр не выбран.

    - **Максимально допустимое время выполнения**    
    Максимальное ожидаемое время (в минутах) выполнения последовательности задач на конечном компьютере. Необходимо использовать целое число, равное нулю или больше него. По умолчанию устанавливается значение 120 минут.

        > [!IMPORTANT]    
        > Если для коллекции, в которой выполняется эта последовательность задач, используются периоды обслуживания, а значение параметра **Максимально допустимое время выполнения** больше запланированного периода обслуживания, может произойти конфликт. Если для параметра максимально допустимого времени выполнения задано значение **0**, последовательность задач запустится в течение периода обслуживания. Она будет выполняться до своего завершения или сбоя по причине закрытия периода обслуживания. В результате последовательности задач, для которых максимальное время выполнения имеет значение **0**, могут выполняться после окончания их периода обслуживания. Если для максимально допустимого времени выполнения задан определенный период (а не значение **0**), превышающий длительность любого доступного периода обслуживания, такая последовательность задач выполняться не будет. Дополнительные сведения см. в разделе [Использование периодов обслуживания](/sccm/core/clients/manage/collections/use-maintenance-windows).
 
        Если задано значение **0**, Configuration Manager устанавливает максимальное допустимое время выполнения мониторинга, равное **12** часам (720 минутам). При этом последовательность задач будет запускаться, пока продолжительность обратного отсчета не превысит значение периода обслуживания.

    > [!NOTE]    
    > Когда максимальное время выполнения будет достигнуто. Configuration Manager остановит последовательность задач, если она запущена с правами администратора, но без разрешения пользователям взаимодействовать с этой программой. Если последовательность задач не останавливается, Configuration Manager останавливает ее мониторинг по достижении максимального допустимого периода выполнения. 

    - **Use a boot image**  (Использование образа загрузки)  
        Включите этот параметр, чтобы использовать выбранный образ загрузки при выполнении последовательности задач. 

        Чтобы выбрать другой образ загрузки, нажмите кнопку **Обзор**. Не выбирайте этот параметр, если не нужно использовать выбранный образ загрузки при выполнении последовательности задач.

    - **This task sequence can run on any platform**    (Эта последовательность задач может запускаться на любой платформе)  
        Если этот флажок установлен, Configuration Manager не проверяет тип платформы конечного компьютера при развертывании последовательности задач. Этот параметр установлен по умолчанию.

    - **This task sequence can only run on the specified client platforms**   (Эта последовательность задач может выполняться только на указанных клиентских платформах)  
        Параметр используется для определения процессоров, операционных систем и пакетов обновления, для которых можно запустить эту последовательность задач. Если этот флажок установлен, необходимо выбрать в списке хотя бы одну платформу. По умолчанию платформы не выбраны. Configuration Manager использует эти сведения при определении в коллекции конечных компьютеров, которые будут получать развернутую последовательность задач.

        > [!NOTE]    
        > Если последовательность задач запускается с загрузочного носителя или при загрузке PXE, этот параметр игнорируется и последовательность выполняется, как при выбранном параметре **Эта программа может запускаться на любой платформе**.

## <a name="configure-high-impact-task-sequence-settings"></a>Настройка параметров для последовательностей задач, которые обладают значительным воздействием
В Configuration Manager версии 1702 появилась возможность указать, что последовательность задач имеет значительное влияние, и настроить сообщения, которые пользователи получают при выполнении такой последовательности.

### <a name="set-a-task-sequence-as-a-high-impact-task-sequence"></a>Задание последовательности задач как имеющую значительное влияние
Чтобы задать последовательность задач как имеющую значительное влияние, воспользуйтесь описанной ниже процедурой.
> [!NOTE]    
> Любая последовательность задач, которая соответствуют определенным условиям, автоматически определяется как имеющая значительный уровень влияния. Дополнительные сведения см. в разделе [Управление развертываниями с высоким риском](http://docs.microsoft.com/sccm/protect/understand/settings-to-manage-high-risk-deployments).

1. В консоли Configuration Manager последовательно выберите **Библиотека программного обеспечения** > **Операционные системы** > **Последовательность задач**.
2. Выберите последовательность задач, которую нужно изменить, и нажмите кнопку **Свойства**.
3. На вкладке **Уведомление для пользователей** выберите **Это последовательность задач со значительным уровнем влияния**.

### <a name="create-a-custom-notification-for-high-risk-deployments"></a>Создание настраиваемого уведомления для развертываний с высоким уровнем риска
Чтобы создать настраиваемое уведомление для развертываний, обладающих значительным влиянием, выполните описанные ниже действия.
1. В консоли Configuration Manager последовательно выберите **Библиотека программного обеспечения** > **Операционные системы** > **Последовательность задач**.
2. Выберите последовательность задач, которую нужно изменить, и нажмите кнопку **Свойства**.
3. На вкладке **Уведомление пользователя** выберите **Использовать пользовательский текст**.
>  [!NOTE]    
>  Текст уведомления для пользователей можно задать, только если выбран параметр **Это последовательность задач со значительным уровнем влияния**.

4. Настройте следующие параметры (максимум 255 символов в каждом текстовом поле).

  **Текст заголовка уведомления для пользователей**. Задает выделенный синим цветом текст, отображаемый в уведомлении для пользователей Центра программного обеспечения. Например, в уведомлении для пользователей по умолчанию в этом разделе содержится нечто вроде "Подтвердите необходимость обновления операционной системы на этом компьютере".

  **Текст сообщения уведомления для пользователей**. Существует три текстовых поля, в которых содержится текст настраиваемого уведомления. Каждое поле нужно заполнить.
  - Первое текстовое поле: основной текст, обычно содержащий инструкции для пользователя. Например, в уведомлении для пользователей по умолчанию в этом разделе содержится примерно следующее сообщение — "Обновление операционной системы может занять некоторое время; также несколько раз может перезагрузиться компьютер".
  - Второе текстовое поле: полужирный текст под основным текстом. Например, в уведомлении для пользователей по умолчанию в этом разделе содержится примерно следующее сообщение — "Это выполняемое на месте обновление установит новую операционную систему и автоматически перенесет приложения, данные и параметры".
  - Третье текстовое поле: последняя строка текста под полужирным текстом. Например, в уведомлении для пользователей в этом разделе содержится примерно следующее сообщение — "Чтобы начать, нажмите кнопку «Установить». В противном случае нажмите кнопку «Отмена»".   
    
Предположим, что вы настраиваете следующее уведомление в окне свойств.

![Настраиваемое уведомление для последовательности задач](..\media\user-notification.png)

Следующее уведомление отображается, когда конечный пользователь открывает установку из центра программного обеспечения.

![Настраиваемое уведомление для последовательности задач](..\media\user-notification-enduser.png)


##  <a name="BKMK_DistributeTS"></a> Распространение содержимого, на которое ссылается последовательность задач  
 Перед тем, как клиенты будут запускать последовательность задач, ссылающуюся на содержимое, необходимо распространить это содержимое на точки распространения. В любое время можно выбрать последовательность задач и распространить ее содержимое, чтобы создать новый список пакетов, на которые имеются ссылки, для распространения. При внесении изменений в последовательность задач с обновленным содержимым необходимо повторно распространить такое содержимое, прежде чем оно станет доступно клиентам. Используйте следующую процедуру для распространения содержимого, на которое ссылается последовательность задач.  

#### <a name="to-distribute-referenced-content-to-distribution-points"></a>Процедура распределения содержимого, на которое имеется ссылка, на точки распространения  

1.  В консоли Configuration Manager щелкните **Библиотека программного обеспечения**.  

2.  В рабочей области **Библиотека программного обеспечения** разверните узел **Операционные системы**и выберите элемент **Последовательности задач**.  

3.  В списке **Последовательность задач** выберите последовательность задач, которую требуется распространить.  

4.  На вкладке **Главная** в группе **Развертывание** нажмите кнопку **Распространить содержимое** , чтобы открыть "Мастер распространения содержимого".  

5.  На странице **Общие** убедитесь, что выбрано распространение требуемой последовательности задач, после чего нажмите кнопку **Далее**.  

6.  На странице **Содержимое** проверьте, какое содержимое будет распространяться, например загрузочный образ, на который ссылается последовательность задач, после чего нажмите кнопку **Далее**.  

7.  На странице **Места распространения содержимого** укажите коллекции, точку распространения или группу точек распространения, в которую требуется распространить содержимое последовательности задач, после чего нажмите кнопку **Далее**.  

    > [!IMPORTANT]  
    >  Если выбранная последовательность задач ссылается на содержимое, уже распространенное в определенную точку распространения, эта точка распространения не отображается мастером.  

8.  Завершите работу мастера.  

 Вы можете предварительно подготавливать содержимое, на которое ссылается последовательность задач. Configuration Manager создает сжатый файл с предварительно подготовленным содержимым, который включает в себя файлы, связанные зависимости и связанные метаданные для выбранного содержимого. После этого можно вручную импортировать содержимое на сервере сайта, на вторичном сайте или в точке распространения. Дополнительные сведения о предварительной подготовке файлов с содержимым см. в статье [Предварительная подготовка содержимого](../../core/servers/deploy/configure/deploy-and-manage-content.md#a-namebkmkprestagea-use-prestaged-content).  

##  <a name="BKMK_DeployTS"></a> Развертывание последовательности задач  
 Для развертывания последовательности задач на компьютерах в коллекции используйте следующую процедуру.  

> [!WARNING]  
>  Вы можете управлять поведением развертываний последовательности задач с высоким риском. Развертывание с высоким риском — это развертывание, которое устанавливается автоматически и потенциально может привести к нежелательным результатам. Например, последовательность задач с целью **Обязательно** , которая выполняет развертывание операционной системы, считается развертыванием с высоким риском. Дополнительные сведения см. в разделе [Параметры для управления развертываниями с высоким риском](../../protect/understand/settings-to-manage-high-risk-deployments.md).  

> [!NOTE]  
>  Сообщения о состоянии развертывания последовательности задач отображаются в окне "Сообщение" на первичном сайте, но не отображаются на сайте центра администрирования.  

#### <a name="to-deploy-a-task-sequence"></a>Развертывание последовательности задач  

1.  В консоли Configuration Manager щелкните **Библиотека программного обеспечения**.  

2.  В рабочей области **Библиотека программного обеспечения** разверните узел **Операционные системы**и выберите элемент **Последовательности задач**.  

3.  В списке **Последовательность задач** выберите последовательность задач, которую требуется развернуть.  

4.  На вкладке **Главная** в группе **Развертывание** нажмите кнопку **Развернуть**.  

    > [!NOTE]  
    >  Если кнопка **Развернуть** недоступна, последовательность задач имеет недействительную ссылку.  Исправьте ссылку и попробуйте развернуть последовательность задач еще раз.  

5.  На странице **Общие** укажите следующие данные и нажмите кнопку **Далее**.  

    -   **Последовательность задач**. Укажите последовательность задач, которую требуется развернуть. По умолчанию в этом поле отображается выбранная последовательность задач.  

    -   **Коллекция**. Укажите коллекцию, содержащую компьютеры, на которых будет выполняться последовательность задач.  

         Не следует развертывать последовательности задач, устанавливающие операционные системы, в несоответствующих коллекциях, таких как **Все системы** . Убедитесь, что выбранная коллекция содержит только те компьютеры, на которых должна выполняться последовательность задач.  

        > [!NOTE]  
        >  При осуществлении развертывания с высоким риском, например операционной системы, в окне **Выбор коллекции** отображаются только пользовательские коллекции, которые соответствуют параметрам проверки развертывания, настроенным в свойствах сайта. Развертывания с высоким риском всегда ограничены пользовательскими коллекциями, создаваемыми вами коллекциями и встроенной коллекцией **Неизвестные компьютеры** . При создании развертывания с высоким риском нельзя выбрать встроенную коллекцию, например **Все системы**. Снимите флажок **Скрыть коллекции с количеством элементов больше, чем конфигурация минимального размера сайта** для просмотра всех пользовательских коллекций, в которых число клиентов меньше установленного предела. Дополнительные сведения см. в разделе [Параметры для управления развертываниями с высоким риском](../../protect/understand/settings-to-manage-high-risk-deployments.md).  
        >   
        >  Параметры проверки развертывания основываются на текущем членстве в коллекции. После развертывания последовательности задач членство в коллекции повторно не анализируется с учетом параметров развертывания высокого риска.  
        >   
        >  Например, предположим, что для параметра **Размер по умолчанию** установлено значение 100, а для параметра **Максимальный размер** — значение 1000. При создании развертывания с высоким риском в окне **Выбор коллекции** будут отображаться только те коллекции, которые содержат не более 100 клиентов. Если снять флажок **Скрыть коллекции с количеством элементов больше, чем конфигурация минимального размера сайта**, в окне будут отображаться коллекции, содержащие менее 1000 клиентов.  
        >   
        >  При выборе коллекции, содержащей роль сайта, применяется следующее правило.  
        >   
        >  -   Если коллекция содержит сервер системы сайта в параметрах проверки развертывания, которые вы настраиваете для блокировки коллекций с серверами системы сайта, то возникает ошибка, а продолжение работы невозможно.  
        > -   Если коллекция содержит сервер системы сайта, а в параметрах проверки развертывания вы включаете предупреждение о том, что коллекции имеют серверы системы сайта, коллекция превышает размер по умолчанию или коллекция содержит сервер, то мастер развертывания программного обеспечения покажет предупреждение о высоком риске. Подтвердите его для создания развертывания с высоким риском, после чего будет создано сообщение о состоянии аудита.  

    -   **Комментарии (необязательно)**. Укажите дополнительные сведения, описывающие это развертывание последовательности задач.  

6.  На странице **Параметры развертывания** укажите следующие сведения, затем нажмите кнопку **Далее**.  

    -   **Намерение**. В раскрывающемся списке выберите одно из следующих значений.  

        -   **Доступно**. Если последовательность задач развертывается для пользователя, он увидит ее после публикации в каталоге приложений и сможет запросить ее по требованию. Если последовательность развертывается для устройства, пользователь увидит ее в центре программного обеспечения и сможет установить его по запросу.  

        -   **Обязательно**. Последовательность задач развертывается автоматически по настроенному расписанию. Однако пользователь может отслеживать состояние ее развертывания (если оно не скрыто) и установить ее с помощью центра программного обеспечения до наступления заданного крайнего срока.  

    -   **Развертывать автоматически по расписанию независимо от того, вошел ли пользователь в систему**. При развертывании последовательности задач этот параметр недоступен.  

    -   **Отправлять пакеты пробуждения**. Если в качестве намерения развертывания выбрано **Обязательно** и установлен этот параметр, wake-up пакеты будут отправляться на компьютеры до установки развертывания, чтобы пробудить компьютеры при наступлении крайнего срока установки. Для использования этой возможности необходимо включить поддержку пробуждения по локальной сети на компьютерах и в сетях.  

    -   **Разрешить клиентам, использующим лимитное подключение к Интернету, загружать содержимое после наступления крайнего срока установки (может повлечь дополнительные затраты)**. Для последовательности задач, устанавливающей приложение, но не развертывающей операционную систему, можно указать, разрешено ли клиентам скачивать содержимое по истечении крайнего срока установки, если они используют лимитное подключение к Интернету. Иногда поставщики интернет-услуг взимают плату по объему передаваемых данных, если вы используете лимитное подключение к Интернету.  

        > [!NOTE]  
        >  Хотя лимитное подключение к Интернету может работать нормально для последовательностей задач, не развертывающих операционные системы, такое использование не поддерживается.  

    -   **Запрос пользователем этого приложения должен утвердить администратор**. Этот параметр недоступен при развертывании последовательности задач.  

    -   **Сделать доступной для**. Укажите, доступна ли последовательность задач для клиентов Configuration Manager, носителя или PXE.  

        > [!IMPORTANT]  
        >  Используйте для автоматизированного развертывания последовательностей задач вариант **Только носители и PXE (скрытые)** . Выберите пункт **Разрешить автоматическое развертывание операционной системы** и задайте переменную SMSTSPreferredAdvertID в составе носителя, чтобы компьютер автоматически загружался в режиме развертывания без вмешательства пользователя. Дополнительные сведения о переменных последовательностей задач см. в статье [Встроенные переменные последовательности задач в Configuration Manager](../understand/task-sequence-built-in-variables.md).  

7.  На странице **Расписание** укажите следующие сведения, затем нажмите кнопку **Далее**.  

    > [!IMPORTANT]  
    >  При запуске клиента Windows PE с PXE или с загрузочного носителя клиент не оценивает расписания развертывания (срок запуска, действия или завершения). Настраивайте расписания только в развертываниях на клиентах, начинающихся с полной операционной системы Windows. Рассмотрите возможность использования других способов, таких как периоды обслуживания, для управления активными последовательностями задач, разворачиваемыми на клиентах, которые начинают с Windows PE.  

    -   **Планирование условий доступности этого развертывания**: укажите дату и время, когда последовательность задач будет доступной для выполнения на конечном компьютере. Если установить флажок **Время в формате UTC** , последовательность задач станет доступна нескольким конечным компьютерам одновременно, а не в различные моменты времени, в соответствии с местным временем на конечных компьютерах.  

         Если назначено более раннее время запуска, чем требуется, клиент загружает последовательность задач в указанное администратором время запуска.  

    -   **Планирование условий окончания срока действия этого развертывания**: укажите дату и время, когда последовательность задач перестанет быть доступной для выполнения на конечном компьютере. Если установить флажок **Время в формате UTC** , срок действия последовательности задач завершится на нескольких конечных компьютерах одновременно, а не в различные моменты времени, в соответствии с заданным на них местным временем.  

    -   **Расписание установки**. Укажите, когда требуемая последовательность задач выполняется на конечном компьютере. Можно добавить несколько расписаний.  

         Вы можете указать дату и время начала расписания, задать еженедельное, ежемесячное выполнение последовательности задач или указать свой собственный интервал, а также указать, выполняется ли последовательность задач после определенного события, такого как вход в систему или выход из системы компьютера.  

        > [!NOTE]  
        >  Если указать время начала требуемой последовательности задач, задав более ранние дату и время доступности последовательности задач, клиент Configuration Manager загрузит последовательность задач в назначенное время, даже если она будет доступна ранее.  

    -   **Поведение повторного запуска**. Укажите время повторного выполнения последовательности задач. Можно указать один из следующих параметров.  

        -   **Никогда не повторять запуск развернутой программы**. Последовательность задач не выполняется повторно на клиенте, если ранее она уже была выполнена на нем. Последовательность задач не выполняется повторно, если она была изначально завершена неудачно или если файлы последовательности были изменены.  

        -   **Всегда повторять запуск программы**. В случае запланированного развертывания последовательность задач всегда будет запускаться повторно на клиенте, даже если она уже была успешно выполнена ранее. Этот параметр в особенности полезен при использовании повторяющихся развертываний, когда происходит плановое обновление последовательности задач.  

            > [!IMPORTANT]  
            >  Хотя этот параметр задан по умолчанию, он не действует до тех пор, пока не будет назначено необходимое оборудование. Всегда можно повторно запустить доступные развертывания.  

        -   **Повторить запуск, если предыдущая попытка не удалась**. Последовательность задач выполняется повторно при запланированном развертывании, только если ее выполнение, инициированное ранее, завершилось неудачно. Этот параметр в особенности полезен для обязательных развертываний, т. к. он позволяет автоматически повторять попытки выполнения в соответствии с расписанием назначения, если последняя попытка оказалась неудачной.  

        -   Повторить запуск, если предыдущая попытка была успешной. Последовательность задач выполняется повторно только в случае успешной предыдущей попытки запуска на клиенте. Этот параметр полезен при использовании повторяющихся развертываний, когда происходит плановое обновление последовательности задач, и для каждого последующего обновления требуется успешная установка предыдущего обновления.  

        > [!NOTE]  
        >  Так как пользователь может перезапустить развертывание доступной последовательности задач, перед развертыванием доступной последовательности задач в производственной среде следует выяснить, что произойдет, если пользователь перезапустит последовательность задач несколько раз, и протестировать данную ситуацию.  

8.  На странице **Взаимодействие с пользователем** укажите следующие сведения, затем нажмите кнопку **Далее**.  

    -   **Разрешить пользователям запускать программу независимо от расписания**. Укажите, разрешено ли пользователю выполнять требуемую последовательность задач независимо от назначений развертываний.  

    -   **Показать ход выполнения последовательности задач**. Укажите, должен ли ход выполнения последовательности задач отображаться в клиенте Configuration Manager.  

    -   **Установка программного обеспечения**: укажите, разрешено ли пользователю устанавливать программное обеспечение вне заданных периодов обслуживания после назначенного времени.  

    -   **Перезагрузка системы (если это необходимо для завершения установки)**. Укажите, разрешено ли пользователю перезагружать компьютер после установки программного обеспечения вне заданного периода обслуживания по прошествии назначенного времени.  

    -   **Разрешить выполнение последовательности задач для клиента в Интернете**. Укажите, разрешено ли выполнение последовательности задач на интернет-клиенте, который был обнаружен Configuration Manager в Интернете. Операции, устанавливающие программное обеспечение, например, операционную систему, не поддерживаются этим параметром. Этот параметр следует использовать только для выполнения типовых последовательностей задач на основе скриптов, выполняющих операции в стандартной операционной системе.  

9. На странице **Оповещения** укажите параметры оповещений, необходимые для развертывания этой последовательности задач, затем нажмите кнопку **Далее**.  

10. На странице **Точки распространения** укажите следующие сведения, затем нажмите кнопку **Далее**.  

    -   **Параметры развертывания**. Укажите один из следующих параметров:  

        > [!NOTE]  
        >  При использовании многоадресного развертывания операционных систем содержимое должно быть загружено на конечные компьютеры по мере необходимости или перед запуском последовательности задач.  

        -   Укажите, что клиенты должны загружать содержимое на конечный компьютер с точки распространения по мере того, как оно будет требоваться последовательности задач.  

        -   Укажите, что клиенты должны загружать все содержимое на конечный компьютер с точки распространения перед запуском последовательности задач. Этот вариант не отображается, если вы указали, что последовательность задач доступна для PXE и загрузочных носителей (см. страницу **Параметры развертывания** ).  

        -   Укажите, что клиенты должны запускать содержимое из точки распространения. Этот вариант доступен только в случае, если все пакеты, связанные с последовательностью задач, могут использовать общую папку пакетов на точке распространения. Чтобы включить использование общей папки пакетов, используйте вкладку **Доступ к данным** в окне **Свойства** у каждого пакета.  

    -   **Если нет доступных локальных точек распространения, использовать удаленную точку распространения**: укажите, могут ли клиенты использовать точки распространения, находящиеся в низкоскоростных и ненадежных сетях, для скачивания содержимого, необходимого для последовательности задач.  

11. Завершите работу мастера.  

##  <a name="BKMK_ExportImport"></a> Экспорт и импорт последовательностей задач  
 Можно экспортировать и импортировать последовательности задач вместе со связанными объектами или без них, например с образом операционной системы, загрузочным образом, пакетом агента клиента, пакетом драйверов и приложениями, имеющими зависимости.  

 Рассмотрите следующие возможности при экспорте и импорте последовательностей задач.  

-   Пароли, сохраненные в последовательности задач, не экспортируются. При экспорте и импорте последовательности задач, содержащей пароли, необходимо отредактировать импортированную последовательность задач и заново указать имеющиеся пароли. Обязательно укажите пароли для действий [Присоединить к домену или рабочей группе](../understand/task-sequence-steps.md#BKMK_JoinDomainorWorkgroup), [Подключить к сетевой папке](../understand/task-sequence-steps.md#BKMK_ConnectToNetworkFolder) и [Выполнить из командной строки](../understand/task-sequence-steps.md#BKMK_RunCommandLine).  

- При экспорте последовательности задач с помощью шага **Задать динамические переменные** значения переменных, для которых настроен параметр **Секретное значение**, не экспортируются. После импорта последовательности задач необходимо повторно ввести значения этих переменных.

-   При наличии нескольких первичных сайтов рекомендуется импортировать последовательности задач на сайте центра администрирования.  

 Используйте следующие процедуры для экспорта и импорта последовательности задач.  

#### <a name="to-export-task-sequences"></a>Экспорт последовательности задач  

1.  В консоли Configuration Manager щелкните **Библиотека программного обеспечения**.  

2.  В рабочей области **Библиотека программного обеспечения** разверните узел **Операционные системы**и выберите элемент **Последовательности задач**.  

3.  В списке **Последовательность задач** выберите последовательности задач, которые требуется экспортировать. Если выбрать больше одной последовательности задач, они будут сохранены в одном файле экспорта.  

4.  На вкладке **Главная** в группе **Последовательность задач** выберите **Экспорт** , чтобы запустить мастер экспорта последовательности задач.  

5.  На странице **Общие** укажите следующие параметры, затем нажмите кнопку **Далее**.  

    -   В поле **Файл** укажите расположение и имя файла экспорта. Если имя файла вводится напрямую, обязательно укажите расширение имени файла .zip. При выборе файла экспорта с помощью обзора мастер автоматически добавляет это расширение.  

    -   Удалите флажок **Экспортировать все зависимости последовательности задач** , если не требуется экспортировать зависимости последовательности задач. По умолчанию мастер выполняет сканирование всех связанных объектов и экспортирует их вместе с последовательностью задач. Это относится ко всем зависимостям приложений.  

    -   Снимите флажок **Экспортировать все содержимое для выбранных последовательностей задач и зависимостей** , если вы не хотите копировать содержимое из источника пакета в расположение экспорта. Если этот флажок установлен, мастер импорта последовательности задач использует путь импорта в качестве нового расположения для источника пакета.  

    -   В поле **Комментарии администратора** добавьте описание экспортируемых последовательностей задач.  

6.  Завершите работу мастера.  

 Мастер создаст следующие выходные файлы.  

-   Если не выполняется экспорт содержимого: файл ZIP.  

-   Если экспорт содержимого выполняется: ZIP-файл и папка с именем *export*_files, где *export* — это имя ZIP-файла, содержащего экспортируемое содержимое.  

 Если в процедуру экспорта последовательности задач включено содержимое, обязательно скопируйте ZIP-файл и папку *export*_files, иначе импорт завершится неудачей.  

#### <a name="to-import-task-sequences"></a>Импорт последовательностей задач  

1.  В консоли Configuration Manager щелкните **Библиотека программного обеспечения**.  

2.  В рабочей области **Библиотека программного обеспечения** разверните узел **Операционные системы**и выберите элемент **Последовательности задач**.  

3.  На вкладке **Главная** в группе **Создать** выберите **Импортировать последовательность задач** , чтобы запустить мастер импорта последовательности задач.  

4.  На странице **Общие** укажите экспортируемый ZIP-файл, затем нажмите кнопку **Далее**.  

5.  На странице **Содержимое файла** выберите действие, необходимое для каждого импортируемого объекта. На этой странице отображаются все объекты, которые будут импортированы Configuration Manager.  

    -   Если объект не был импортирован, выберите **Создать новый**.  

    -   Если объект был импортирован ранее, выберите один из следующих вариантов.  

        -   **Пропускать повторяющиеся данные** (используется по умолчанию). Это действие не импортирует объект. Вместо этого мастер связывает существующий объект с последовательностью задач.  

        -   **Перезаписать**. Это действие перезаписывает существующий объект импортируемым объектом. При работе с приложениями можно добавить выпуск для обновления существующего приложения или создания нового приложения.  

6.  Завершите работу мастера.  

 После импорта последовательности задач следует указать в ней все пароли, которые были в исходной последовательности задач. По соображениям безопасности пароли не экспортируются.  

##  <a name="BKMK_CreateTSVariables"></a> Создание переменных последовательности задач для компьютеров и коллекций  
Для компьютеров и коллекций можно задать настраиваемые переменные последовательности задач. Переменные, определенные для компьютера, называются переменными последовательности задач для компьютера. Переменные, определенные для коллекции, называются переменными последовательности задач для коллекции. При возникновении конфликта переменные для компьютера имеют преимущество перед переменными для коллекции. Это означает, что переменные последовательности задач, автоматически назначенные определенному компьютеру, имеют более высокий приоритет, чем переменные, назначенные коллекции, содержащей компьютер.  

Например, если коллекции ABC назначена переменная и компьютеру XYZ, который является членом коллекции ABC, назначена переменная с таким же именем, то переменная, назначенная компьютеру XYZ, имеет более высокий приоритет, чем переменная, назначенная коллекции ABC.  

Вы можете скрыть переменные для компьютера и для коллекции, чтобы они не отображались в консоли Configuration Manager. Чтобы отменить скрытое состояние для этих переменных, необходимо удалить их и повторно определить, не выбирая параметр скрытия. При использовании параметра **Не показывать это значение в консоли Configuration Manager** значение переменной не отображается в консоли, но может по-прежнему использоваться последовательностью задач при запуске.  

> [!WARNING]    
> Параметр **Не показывать это значение в консоли Configuration Manager** применяется в консоли Configuration Manager, но значения для переменных по-прежнему отображаются в файле журнала последовательности задач (SMSTS.LOG). 

Управление переменными для компьютера может осуществляться на первичном сайте или на сайте центра администрирования. Configuration Manager не поддерживает более 1000 назначенных переменных для компьютера.  

> [!IMPORTANT]  
>  При использовании переменных коллекции для последовательностей задач необходимо иметь в виду следующее.  
>   
> - Так как изменения в коллекциях всегда реплицируются по всей иерархии, любые изменения, вносимые в переменные коллекции, применяются не только к членам текущего сайта, но и ко всем членам коллекции в рамках всей иерархии.  
> - При удалении коллекции также происходит удаление переменных последовательности задач, настроенных для коллекции.  

 Используйте следующие процедуры для создания переменных последовательности задач для компьютера или коллекции.  

#### <a name="to-create-task-sequence-variables-for-a-computer"></a>Создание переменных последовательности задач для компьютера  

1.  В консоли Configuration Manager щелкните элемент **Активы и соответствие**.  

2.  В рабочей области **Активы и соответствие** разверните узел коллекции, содержащей компьютер, для которого требуется добавить переменную.  

3.  Выберите компьютер и щелкните **Свойства**.  

4.  В диалоговом окне **Свойства** откройте вкладку **Переменные** .  

5.  Для каждой переменной, которую требуется создать, щелкните значок **Создать** в диалоговом окне **<Новая\> переменная** и укажите имя и значение переменной в последовательности задач. Снимите флажок **Не показывать это значение в консоли Configuration Manager**, если хотите скрыть переменные, чтобы они не отображались в консоли Configuration Manager.  

6.  После добавления всех переменных на компьютер нажмите кнопку **OK**.  

#### <a name="to-create-task-sequence-variables-for-a-collection"></a>Создание переменных последовательности задач для коллекции  

1.  В консоли Configuration Manager щелкните элемент **Активы и соответствие**.  

2.  В рабочей области **Активы и соответствие** выберите коллекцию, в которую требуется добавить переменную, и нажмите **Свойства**.  

3.  В диалоговом окне **Свойства** откройте вкладку **Переменные коллекции** .  

4.  Для каждой переменной, которую требуется создать, щелкните значок **Создать** в диалоговом окне **<Новая\> переменная** и укажите имя и значение переменной в последовательности задач. Снимите флажок **Не показывать это значение в консоли Configuration Manager**, если хотите скрыть переменные, чтобы они не отображались в консоли Configuration Manager.  

5.  Как вариант, можно указать приоритет для использования в Configuration Manager при оценке переменных последовательности задач.  

6.  После добавления всех переменных в коллекцию нажмите кнопку **OK**.  

##  <a name="BKMK_AdditionalActionsTS"></a> Дополнительные действия для управления последовательностями задач  
 Можно управлять последовательностями задач, используя при их выборе дополнительные действия.  

#### <a name="to-select-a-task-sequence-to-manage"></a>Выбор последовательности задач для управления  

1.  В консоли Configuration Manager щелкните **Библиотека программного обеспечения**.  

2.  В рабочей области **Библиотека программного обеспечения** разверните узел **Операционные системы** и выберите элемент **Последовательности задач**.  

3.  В списке **Последовательность задач** выберите последовательность задач, которой требуется управлять, после чего выберите один из доступных вариантов.  

 Более подробные сведения о некоторых дополнительных действиях по управлению последовательностями задач см. в таблице ниже.  

|Действие|Описание|  
|------------|-----------------|  
|**Копировать**|Создает копию выбранной последовательности задач. Это действие может быть полезным, когда требуется создать новую последовательность задач, основанную на существующей последовательности.<br /><br /> Если в папке создается копия последовательности задач, то копия отображается в этой папке до тех пор, пока не будет обновлен узел последовательности задач.  После обновления копия появляется в корневой папке.|  
|**Отключено**|Отключает последовательность задач, в результате чего ее запуск на компьютерах становится невозможным. Отключенные последовательности задач можно развертывать на компьютерах, однако последовательности задач не выполняются на компьютерах до тех пор, пока они не будут включены.|  
|**Разрешить**|Включает последовательность задач, чтобы ее можно было запустить. После включения развернутой последовательности задач ее повторное развертывание не требуется.|  
|**Создать файл с предварительно подготовленным содержимым**|Запускает мастер создания файлов с предварительно подготовленным содержимым для предварительной подготовки содержимого последовательности задач. Дополнительные сведения о создании файлов с предварительно подготовленным содержимым см. в разделе [Предварительная подготовка содержимого](../../core/servers/deploy/configure/deploy-and-manage-content.md#a-namebkmkprestagea-use-prestaged-content).|  
|**Переместить**|Перемещает выбранную последовательность задач в другую папку.|  

## <a name="next-steps"></a>Дальнейшие действия
[Сценарии развертывания операционных систем предприятия](scenarios-to-deploy-enterprise-operating-systems.md)
