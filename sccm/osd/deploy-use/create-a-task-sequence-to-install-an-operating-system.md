---
title: "Создание последовательности задач для установки операционной системы | Документы Майкрософт"
description: "Использование последовательностей задач в System Center Configuration Manager для автоматической установки образа операционной системы и другого содержимого на конечном компьютере."
ms.custom: na
ms.date: 10/06/2016
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology: configmgr-osd
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 217c8a0e-5112-420e-a325-2a6d75326290
caps.latest.revision: "13"
author: Dougeby
ms.author: dougeby
manager: angrobe
ms.openlocfilehash: 41aa6cf69a746f0ab67d804f1ee0c70db05d65ee
ms.sourcegitcommit: 51fc48fb023f1e8d995c6c4eacfda7dbec4d0b2f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2017
---
# <a name="create-a-task-sequence-to-install-an-operating-system-in-system-center-configuration-manager"></a>Создание последовательности задач для установки операционной системы в System Center Configuration Manager

*Применимо к: System Center Configuration Manager (Current Branch)*

Используйте последовательности задач в System Center Configuration Manager для автоматической установки образа операционной системы на конечном компьютере. Вы создаете последовательность задач, ссылающуюся на образ загрузки, который используется для запуска целевого компьютера, образ операционной системы, который требуется установить на целевом компьютере, а также любое дополнительное содержимое (например, другие приложения и обновления программного обеспечения), которое требуется установить. После этого последовательность задач развертывается в коллекции, содержащей конечный компьютер.  

##  <a name="BKMK_InstallOS"></a> Создание последовательности задач для установки операционной системы  
 Существует множество сценариев развертывания операционной системы на компьютерах в вашей среде. В большинстве случаев вы создадите последовательность задач и выберите **Установить существующий образ** в мастере создания последовательности задач, чтобы установить операционную систему, перенести параметры пользователя, применить обновления программного обеспечения и установить приложения. Перед созданием последовательности задач для установки операционной системы должны быть выполнены следующие условия:   

-   **Обязательное**  

    -   [Загрузочный образ](../get-started/manage-boot-images.md) должен быть доступен в консоли Configuration Manager.  

    -   [Образ операционной системы](../get-started/manage-operating-system-images.md) должен быть доступен в консоли Configuration Manager.  

-   **Обязательно (если используется)**  

    -   [Обновления программного обеспечения](../../sum/get-started/synchronize-software-updates.md) должны быть синхронизированы в консоли Configuration Manager.  

    -   [Приложения](../../apps/deploy-use/create-applications.md) должны быть добавлены в консоль Configuration Manager.  

#### <a name="to-create-a-task-sequence-that-installs-an-operating-system"></a>Создание последовательности задач, устанавливающей операционную систему  

1.  В консоли Configuration Manager щелкните **Библиотека программного обеспечения**.  

2.  В рабочей области **Библиотека программного обеспечения** разверните узел **Операционные системы**и выберите элемент **Последовательности задач**.  

3.  В группе **Создать** вкладки **Главная** выберите команду **Создать последовательность задач** , чтобы запустить мастер создания последовательности задач.  

4.  На странице **Создание новой последовательности задач** выберите команду **Установить существующий образ**и нажмите кнопку **Далее**.  

5.  На странице **Сведения о последовательности задач** настройте следующие параметры, затем нажмите кнопку **Далее**.  

    -   **Имя последовательности задач**. Укажите имя последовательности задач.  

    -   **Описание**. Введите описание задачи, выполняющейся последовательностью.  

    -   **Загрузочный образ**. Выберите загрузочный образ для установки операционной системы на конечном компьютере. Загрузочный образ содержит версию среды предустановки Windows (Windows PE) для установки операционной системы, а также все необходимые драйверы для дополнительных устройств. Сведения см. в разделе [Управление загрузочными образами](../get-started/manage-boot-images.md).  

        > [!IMPORTANT]  
        >  Архитектура загрузочного образа должна быть совместимой с архитектурой оборудования конечного компьютера.  

6.  На странице **Установка Windows** настройте следующие параметры, затем нажмите кнопку **Далее**.  

    -   **Пакет образа**. Укажите пакет с образом устанавливаемой операционной системы. Дополнительные сведения см. в разделе [Управление образами операционных систем](../get-started/manage-operating-system-images.md).  

    -   **Образ**. Если пакет содержит несколько образов операционной системы, укажите индекс устанавливаемого образа.  

    -   **Создать разделы и выполнить форматирование на конечном компьютере перед установкой операционной системы**. Укажите, должна ли последовательность задач создавать разделы и выполнять форматирование на конечном компьютере перед установкой операционной системы.  

    -   **Ключ продукта**. Введите ключ продукта для установки операционной системы Windows. Можно указать зашифрованные ключи многократной установки или стандартные ключи продукта. В незашифрованном ключе знаки сгруппированы по 5 и разделены дефисами (-), Например, *XXXXX-XXXXX-XXXXX-XXXXX-XXXXX*  

    -   **Режим лицензирования сервера**. Выберите режим лицензирования сервера: **Для каждого рабочего места**, **Для каждого сервера**или не указывайте лицензию. В случае использования варианта **Для каждого сервера**следует также указать максимальное число подключений.  

    -   Укажите параметры обработки учетной записи администратора, использующейся при развертывании образа операционной системы.  

        -   **Отключить учетную запись локального администратора**. Укажите, следует ли отключать учетную запись локального администратора при развертывании образа операционной системы.  

        -   **Всегда использовать один и тот же пароль администратора**. Укажите, следует ли использовать один и тот же пароль для учетной записи локального администратора на всех компьютерах, на которых развертывается образ операционной системы.  

7.  На странице **Настроить сеть** настройте следующие параметры, затем нажмите кнопку **Далее**.  

    -   **Присоединить к рабочей группе**. Укажите, следует ли добавить конечный компьютер к рабочей группе.  

    -   **Присоединить к домену**. Укажите, следует ли добавить конечный компьютер к домену. Укажите имя домена в разделе **Домен**.  

        > [!IMPORTANT]  
        >  Чтобы указать домен из локального леса, достаточно просмотреть структуру последнего; в случае же с удаленным лесом необходимо знать (и ввести) имя домена.  

         Можно также указать подразделение (OU). Это необязательный параметр, содержащий различающееся имя подразделения в каталоге LDAP X.500, куда добавляется учетная запись компьютера, если она еще не создана.  

    -   **Учетная запись**. Введите имя пользователя и пароль учетной записи, которая может присоединиться к выбранному домену. Например: *domain\user* или *%variable%*.  

        > [!IMPORTANT]  
        >  Для переноса параметров домена или рабочей группы требуется ввод надлежащих учетных данных домена.  

8.  На странице **Установка Configuration Manager** выберите пакет клиента Configuration Manager, устанавливаемый на конечный компьютер, и нажмите кнопку **Далее**.  

9. На странице **Миграция состояния** настройте следующие параметры, затем нажмите кнопку **Далее**.  

    -   **Сохранить настройки пользователя**. Укажите, следует ли последовательности задач сохранять данные пользовательской среды. Сведения о сборе и восстановлении данных о пользовательской среде см. в статье [Управление пользовательской средой](../get-started/manage-user-state.md).  

    -   **Сохранить параметры сети**. Укажите, следует ли последовательности задач сохранять параметры сети конечного компьютера. Помимо параметров сетевого адаптера можно сохранить и членство в домене или рабочей группе.  

    -   **Сохранить настройки Microsoft Windows**.  Укажите, следует ли последовательности задач сохранять параметры Windows конечного компьютера перед установкой образа операционной системы. Можно сохранить имя компьютера, зарегистрированного пользователя или организации, а также параметры часового пояса.  

10. На странице **Включить обновления** укажите, следует ли устанавливать только обязательные обновления ПО, все обновления или не устанавливать их вообще, и нажмите кнопку **Далее**. Если выбран вариант установки обновлений программного обеспечения, Configuration Manager устанавливает только те обновления ПО, которые относятся к коллекциям, в которые входит конечный компьютер.  

11. На странице **Установить приложения** укажите приложения, которые необходимо установить на конечный компьютер, а затем нажмите кнопку **Далее**. Если задано несколько приложений, можно настроить продолжение выполнения последовательности задач в случае сбоя установки определенного приложения.  

12. Завершите работу мастера.  

 Теперь можно развернуть последовательность задач для коллекции компьютеров.  Дополнительные сведения см. в статье [Deploy a task sequence](manage-task-sequences-to-automate-tasks.md#BKMK_DeployTS).  

##  <a name="BKMK_InstallExistingOSImageTSExample"></a> Пример последовательности задач для установки существующего образа операционной системы  
 Приведенную ниже таблицу можно использовать в качестве руководства при создании последовательности задач для развертывания операционной системы с помощью существующего образа операционной системы. Таблица поможет при выработке общей структуры шагов последовательности задач и объединении их в логические группы. Последовательность задач, созданная вами, может отличаться от представленного примера и включать в себя больше (или меньше) шагов и групп.  

> [!IMPORTANT]  
>  Для создания этой последовательности задач необходимо использовать мастер создания последовательности задач.  

 При использовании мастера создания последовательности задач для создания такой новой последовательности задач некоторые имена шагов могут отличаться от имен, задаваемых при добавлении этих шагов в существующую последовательность задач в ручном режиме. Различия в именовании представлены в следующей таблице.  

|Имя шага последовательности задач мастера создания последовательности задач|Название равнозначного шага в редакторе последовательности задач|  
|---------------------------------------------------------|-----------------------------------------------|  
|Запрос хранилища состояния пользователей|Запросить хранилище состояний|  
|Сбор файлов и параметров пользователя|Записать пользовательское состояние|  
|Выпуск: хранилище состояния пользователей|Освободить хранилище состояний|  
|Перезапустить в Windows PE|Перезагрузить в Windows PE или с жесткого диска|  
|Создать разделы на диске 0|Отформатировать диск и создать разделы|  
|Восстановить файлы и параметры пользователя|Восстановление пользовательской среды|  

|Группа или шаг последовательности задач|Описание|  
|---------------------------------|-----------------|  
|Сбор файлов и параметров — **(новая группа последовательности задач)**|Создание группы последовательности задач. Группа последовательности задач используется для группирования сходных шагов в целях повышения управляемости и упрощения управления ошибками.<br /><br /> Группа содержит шаги, необходимые для записи файлов и параметров из операционной системы эталонного компьютера.|  
|Сохранить параметры Windows|Этот шаг последовательности задач служит для идентификации параметров Microsoft Windows, которые требуется записать на эталонном компьютере. Можно записать такие данные, как имя компьютера, сведения о пользователе и организации и параметры часового пояса.|  
|Сохранить параметры сети|Этот шаг последовательности задач служит для запуска параметров сети с эталонного компьютера. Можно записать данные о членстве эталонного компьютера в домене или рабочей группе и сведения о параметрах сетевого адаптера.|  
|Сбор файлов и параметров пользователя — **(новая подгруппа последовательности задач)**|Создание подгруппы последовательности задач в пределах группы последовательности задач. Эта подгруппа содержит шаги, которые необходимы для сбора данных о пользовательской среде. Также как и в первоначально добавляемой группе, в этой подгруппе содержатся сходные шаги последовательности задач, что позволяет оптимизировать их организацию и управление ошибками.|  
|Запрос хранилища состояния пользователей|Этот шаг последовательности задач используется, чтобы запросить доступ к точке миграции состояния, на которой хранятся данные пользовательской среды. Этот шаг последовательности задач можно настроить для выполнения сбора или восстановления данных пользовательской среды.|  
|Сбор файлов и параметров пользователя|Это шаг последовательности задач используется для запуска средства миграции пользовательской среды (USMT), с помощью которого выполняется сбор параметров и данных пользовательской среды на эталонном компьютере, на который будет передана последовательность задач, связанная с этим шагом. Можно записать стандартные параметры или указать, какие параметры необходимо записать.|  
|Выпуск: хранилище состояния пользователей|Этот шаг последовательности задач используется для уведомления точки миграции состояния о выполнении действия записи или восстановления.|  
|Установить операционную систему — **(новая группа последовательности задач)**|Создание новой подгруппы последовательности задач. Эта подгруппа содержит шаги, необходимые для установки и настройки среды предустановки Windows.|  
|Перезапустить в Windows PE|Этот шаг последовательности задач служит для задания параметров перезагрузки для конечного компьютера, получающего последовательность задач. Этот шаг выводит сообщение для пользователя, указывая, что для продолжения установки необходимо перезагрузить компьютер.<br /><br /> Этим шагом используется переменная последовательности задач **_SMSTSInWinPE** , доступная только для чтения. Если связанное значение — **false** , выполнение последовательности задач будет продолжено.|  
|Создать разделы на диске 0|Этот шаг последовательности задач указывает действия, необходимые для форматирования жесткого диска на конечном компьютере. По умолчанию обрабатывается диск номер **0**.<br /><br /> Этим шагом используется переменная последовательности задач **_SMSTSClientCache** , доступная только для чтения. Этот шаг будет выполнен, если кэш клиентов Configuration Manager не существует.|  
|Применить операционную систему|Этот шаг последовательности задач используется для установки образа операционной системы на конечный компьютер. На этом шаге все образы томов, хранящиеся в WIM-файле, применяются к соответствующим томам последовательного диска на конечном компьютере (при этом выполняется предварительное удаление всех файлов на обрабатываемых томах, за исключением файлов параметров, связанных с Configuration Manager). Чтобы задать, какой раздел диска будет использоваться для установки, можно также указать файл ответов **sysprep** .|  
|Применить настройки Windows|Этот шаг последовательности задач используется для настройки параметров Windows на конечном компьютере. К таким параметрам Windows относятся сведения о пользователе и организации, сведения о ключе продукта или лицензионном ключе, параметры часового пояса и пароль локального администратора.|  
|Применить параметры сети|Этот шаг последовательности задач используется для задания параметров сети или рабочей группы на конечном компьютере. Также можно указать, использует ли компьютер DHCP-сервер, или задать параметры назначенного статического IP-адреса.|  
|Применить драйверы устройств|Этот шаг последовательности задач служит для установки драйверов в составе развертывания операционной системы. Программе установки Windows можно разрешить искать драйверы во всех существующих категориях, выбрав параметр **Использовать драйверы всех категорий** , или ограничить круг доступных категорий, выбрав **Использовать драйверы только из указанных категорий**.<br /><br /> Этим шагом используется переменная последовательности задач **_SMSTSMediaType** , доступная только для чтения. Этот шаг последовательности задач выполняется, только если значение переменной не равняется **FullMedia**.|  
|Применить пакет драйверов|Этот шаг последовательности задач используется, чтобы предоставить программе установки Windows доступ ко всем драйверам в пакете драйверов.|  
|Установить операционную систему — **(новая группа последовательности задач)**|Создание новой подгруппы последовательности задач. Эта подгруппа содержит шаги, которые необходимы для настройки установленной операционной системы.|  
|Настройка Windows и Configuration Manager|Используйте этот шаг последовательности задач для установки клиентского программного обеспечения Configuration Manager. Configuration Manager устанавливает и регистрирует GUID клиента Configuration Manager. Необходимые параметры установки можно назначить в окне **Свойства установки** .|  
|Установить обновления|Этот шаг используется для указания способа установки обновлений программного обеспечения на конечный компьютер. Конечный компьютер не оценивается на наличие применимых обновлений программного обеспечения, пока не будет запущен этот шаг последовательности задач. На этом шаге конечный компьютер оценивается на применимость обновлений ПО, как и любой другой клиент, управляемый Configuration Manager.<br /><br /> Этим шагом используется переменная последовательности задач **_SMSTSMediaType** , доступная только для чтения. Этот шаг последовательности задач выполняется, только если значение переменной не равняется **FullMedia**.|  
|Восстановить файлы и параметры пользователя — **(новая подгруппа последовательности задач)**|Создание новой подгруппы последовательности задач. Эта подгруппа содержит шаги, которые необходимы для восстановления файлов и параметров пользователя.|  
|Запрос хранилища состояния пользователей|Этот шаг последовательности задач используется, чтобы запросить доступ к точке миграции состояния, на которой хранятся данные пользовательской среды.|  
|Восстановить файлы и параметры пользователя|Этот шаг последовательности задач служит для запуска средства миграции пользовательской среды для восстановления параметров и пользовательской среды на конечном компьютере.|  
|Выпуск: хранилище состояния пользователей|Этот шаг последовательности задач служит для уведомления точки миграции состояния о том, что данные пользовательской среды больше не требуются.|  
