---
title: "Создание коллекций | Документы Майкрософт"
description: "Создание коллекций в System Center Configuration Manager для упрощения управления группами пользователей и устройств."
ms.custom: na
ms.date: 2/22/2017
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology: configmgr-other
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 1401a35e-4312-4d3b-8ceb-0abbb10d4f05
caps.latest.revision: "6"
caps.handback.revision: "0"
author: andredm7
ms.author: andredm
manager: angrobe
ms.openlocfilehash: 44b4707b1a40624c51decf548d23ddd2164c5833
ms.sourcegitcommit: 51fc48fb023f1e8d995c6c4eacfda7dbec4d0b2f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2017
---
# <a name="how-to-create-collections-in-system-center-configuration-manager"></a>Создание коллекций в System Center Configuration Manager

*Применимо к: System Center Configuration Manager (Current Branch)*

Коллекции — это группы пользователей или устройств. Коллекции можно использовать для таких задач, как управление приложениями, развертывание параметров соответствия и установка обновлений программного обеспечения. Кроме того, вы можете использовать коллекции для управления группами параметров клиентов. Совместное использование с ролевым администрированием позволяет указать ресурсы, к которым может получать доступ пользователь с правами администратора. Configuration Manager содержит несколько встроенных коллекций. Дополнительные сведения см. в статье [Общие сведения о коллекциях в System Center Configuration Manager](../../../../core/clients/manage/collections/introduction-to-collections.md).  

> [!NOTE]  
>  Коллекция может содержать либо пользователей, либо устройства. Смешанные коллекции не поддерживаются.  

 В следующей таблице перечислены правила, которые можно использовать для настройки членства в коллекции в Configuration Manager.  

|Тип правила членства|Дополнительные сведения|  
|--------------------------|----------------------|  
|Прямое правило|Позволяет выбирать пользователей или компьютеры, которые требуется добавить в коллекцию. Членство этого типа не изменяется, если только ресурс не удаляется из Configuration Manager. Прежде чем ресурсы можно будет добавлять в коллекцию прямого правила, Configuration Manager должен выполнить обнаружение ресурсов или их необходимо импортировать вручную. Коллекции с прямыми правилами предполагают более высокие административные временные затраты по сравнению с коллекциями с правилами запросов, так как они требуют внесения изменений вручную.|  
|Правило запроса|Позволяет динамически обновлять членство в коллекции на основе запроса, выполняемого Configuration Manager по расписанию. Например, можно создать коллекцию пользователей, которые являются членами подразделения "Кадры" в доменных службах Active Directory. Такая коллекция обновляется автоматически при добавлении новых пользователей в подразделение "Кадры" или их удалении из него.<br /><br /> Примеры запросов, которые можно использовать для создания коллекций, см. в статье [Создание запросов в System Center Configuration Manager](../../../../core/servers/manage/create-queries.md).|  
|Правило включения коллекции|Позволяет включать члены другой коллекции в коллекцию Configuration Manager. Членство в текущей коллекции обновляется согласно расписанию, если изменяется членство включенной коллекции.<br /><br /> Вы можете добавить в коллекцию несколько правил включения коллекции.<br /> |  
|Правило исключения коллекции|Правило исключения коллекции позволяет исключать члены другой коллекции из коллекции Configuration Manager. Членство в текущей коллекции обновляется согласно расписанию, если изменилась исключенная коллекция.<br /><br /> Вы можете добавить в коллекцию несколько правил исключения коллекции. Если коллекция содержит правила "Включить коллекции" и "Исключить коллекции", между которыми возник конфликт, правило исключения имеет приоритет.<br />              **Пример.** Вы создаете коллекцию, которая имеет одно правило включения коллекции и одно правило исключения коллекции. Правило включения коллекции предназначено для коллекции настольных систем Dell. Правило исключения коллекции предназначено для коллекции компьютеров, имеющих менее 4 ГБ ОЗУ. Новая коллекция будет содержать настольные системы Dell, имеющие менее 4 ГБ ОЗУ.|  

 Ниже приведены процедуры создания коллекций в Configuration Manager. Кроме того, можно импортировать коллекции, созданные на этом или другом сайте Configuration Manager. Сведения об экспорте и импорте коллекций см. в разделе [Управление коллекциями в System Center Configuration Manager](../../../../core/clients/manage/collections/manage-collections.md).  

 Сведения о создании коллекций для компьютеров под управлением Linux и UNIX см. в статье [Управление клиентами для серверов Linux и UNIX в System Center Configuration Manager](../../../../core/clients/manage/manage-clients-for-linux-and-unix-servers.md).  

##  <a name="BKMK_1"></a> Создание коллекции устройств  

1.  В консоли Configuration Manager выберите **Активы и соответствие** > **Коллекции устройств**.  

3.  На вкладке **Главная** в группе **Создать** выберите элемент **Создать коллекцию устройств**.  

4.  На странице **Общие** заполните поля **Имя** и **Комментарий**. В поле **Ограничивающая коллекция** нажмите кнопку **Обзор**, чтобы выбрать ограничивающую коллекцию. Коллекция будет содержать только члены ограничивающей коллекции.  

5.  На странице **Правила членства в коллекции** **мастера создания коллекции устройств** в списке **Добавить правило** выберите тип правила членства, которое будет использоваться для этой коллекции. Для каждой коллекции можно настроить несколько правил.  

        
##### <a name="to-configure-a-direct-rule"></a>Настройка прямого правила  

1.  На странице **Поиск ресурсов** **мастера создания статических правил членства в коллекции**укажите следующие сведения.  

-   **Класс ресурсов:** выберите тип ресурсов, которые требуется найти и добавить в коллекцию. Выберите одно из значений **Системный ресурс** , чтобы выполнить поиск данных инвентаризации, возвращенных с клиентских компьютеров, или **Неизвестный компьютер** , чтобы выбрать значения, возвращенные неизвестными компьютерами.  

-   **Имя атрибута:** выберите атрибут, связанный с выбранным классом ресурсов, поиск которого требуется выполнить. Например, чтобы выбирать компьютеры по имени NetBIOS, выберите в списке **Класс ресурсов** вариант **Системный ресурс** , а в списке **Имя атрибута** — **Имя NetBIOS** .  

-   **Исключить ресурсы, помеченные как устаревшие** — если клиентский компьютер помечен как устаревший, он не будет включаться в результаты поиска.  

-   **Исключить ресурсы без установленного клиента Configuration Manager** — это значение не будет отображаться в результатах поиска.  

-   **Значение:** введите значение, которое требуется найти для выбранного имени атрибута. Вы можете использовать символ процента **%** в качестве подстановочного знака. Например, чтобы найти компьютеры, NetBIOS-имя которых начинается с буквы "M", введите в это поле значение **M%**.  

2.  На странице **Выбранные ресурсы** выберите в списке **Ресурсы** ресурсы, которые требуется добавить в коллекцию, а затем нажмите кнопку **Далее**.  


##### <a name="to-configure-a-query-rule"></a>Настройка правила запроса  

1.  В диалоговом окне **Свойства правил запросов** укажите следующие сведения.  

-   **Имя** — укажите уникальное имя.  

-   **Импортировать инструкцию запроса** — открывает диалоговое окно **Обзор запроса**, в котором можно выбрать [запрос Configuration Manager](../../../../core/servers/manage/create-queries.md) для использования в качестве правила запроса для коллекции.   

-   **Класс ресурсов:** выберите тип ресурсов, которые требуется найти и добавить в коллекцию. Выберите одно из значений **Системный ресурс** , чтобы выполнить поиск данных инвентаризации, возвращенных с клиентских компьютеров, или **Неизвестный компьютер** , чтобы выбрать значения, возвращенные неизвестными компьютерами.  

-   **Изменить инструкцию запроса** — открывает диалоговое окно **Свойства формы запроса**, в котором можно создать запрос для использования в качестве правила для коллекции. Дополнительные сведения о запросах см. в статье [Технический справочник по запросам для System Center Configuration Manager](../../../../core/servers/manage/queries-technical-reference.md).  

    
##### <a name="to-configure-an-include-collection-rule"></a>Настройка правила включения коллекции  

В диалоговом окне **Выбор коллекций** выберите коллекции, которые требуется включить в новую коллекцию, и нажмите кнопку **ОК**.  

##### <a name="to-configure-an-exclude-collection-rule"></a>Настройка правила исключения коллекции  

В диалоговом окне **Выбор коллекций** выберите коллекции, которые требуется исключить из новой коллекции, и нажмите кнопку **ОК**.  

-   **Использовать добавочные обновления для этой коллекции** — установите этот флажок, чтобы выполнять периодический поиск и обновление только новых или измененных с момента предыдущей оценки коллекции ресурсов независимо от выполнения полной оценки коллекции. Добавочные обновления выполняются каждые 10 минут.  

> [!IMPORTANT]  
>  Коллекции, которые настроены с помощью правил запроса, использующих следующие классы, не поддерживают добавочные обновления:  
>   
> -   SMS_G_System_CollectedFile,  
> -   SMS_G_System_LastSoftwareScan,  
> -   SMS_G_System_AppClientState,  
> -   SMS_G_System_DCMDeploymentState,  
> -   SMS_G_System_DCMDeploymentErrorAssetDetails,  
> -   SMS_G_System_DCMDeploymentCompliantAssetDetails,  
> -   SMS_G_System_DCMDeploymentNonCompliantAssetDetails,  
> -   SMS_G_User_DCMDeploymentCompliantAssetDetails (только для коллекций пользователей),  
> -   SMS_G_User_DCMDeploymentNonCompliantAssetDetails (только для коллекций пользователей),  
> -   SMS_G_System_SoftwareUsageData,  
> -   SMS_G_System_CI_ComplianceState,  
> -   SMS_G_System_EndpointProtectionStatus,  
> -   SMS_GH_System_*,  
> -   SMS_GEH_System_*.  

-   **Запланировать полное обновление этой коллекции** — запланируйте периодическую полную оценку членства в коллекции.  

6.  Следуйте указаниям мастера, чтобы завершить создание новой коллекции. Созданная коллекция отображается в узле **Коллекции устройств** рабочей области **Активы и соответствие** .  

> [!NOTE]  
>  Необходимо обновить или повторно загрузить консоль Configuration Manager, чтобы отобразить члены коллекции. Но эти члены не отображаются в коллекции до первого запланированного обновления либо пока для коллекции вручную не будет выбран параметр **Обновить членство**. Для завершения обновления коллекции может потребоваться несколько минут.  

##  <a name="BKMK_2"></a> Создание коллекции пользователей  

1.  В консоли Configuration Manager последовательно выберите **Активы и соответствие** > **Коллекции пользователей**.  

3.  На вкладке **Главная** в группе **Создать** выберите элемент **Создать коллекцию пользователей**.  

4.  На странице **Общие** мастера заполните поля **Имя** и **Комментарий**. В поле **Ограничивающая коллекция** нажмите кнопку **Обзор**, чтобы выбрать ограничивающую коллекцию. Коллекция будет содержать только члены ограничивающей коллекции.  

5.  На странице **Правила членства в коллекции** задайте приведенные ниже параметры.  

    -   В списке **Добавить правило** выберите тип правила членства, которое будет использоваться для этой коллекции. Для каждой коллекции можно настроить несколько правил.  

##### <a name="to-configure-a-direct-rule"></a>Настройка прямого правила  

1.  На странице **Поиск ресурсов** **мастера создания правил непосредственного членства** укажите приведенные ниже сведения.  

-   **Класс ресурсов:** выберите тип ресурсов, которые требуется найти и добавить в коллекцию. Выберите одно из значений **Пользователь (ресурс)** для поиска сведений о пользователе, собираемых Configuration Manager, или **Группа пользователей (ресурс)** для поиска сведения о группе пользователей, собираемых Configuration Manager.  

-   **Имя атрибута:** выберите атрибут, связанный с классом ресурсов, поиск которого требуется выполнить. Например, чтобы выбирать пользователей по имени подразделения, выберите в списке **Класс ресурсов** значение **Пользователь (ресурс)** , а в списке **Имя атрибута** — значение **Имя подразделения пользователя** .  

-   **Значение:** введите значение, которое требуется найти. Вы можете использовать символ процента **%** в качестве подстановочного знака. Например, чтобы найти пользователей в подразделении Contoso, введите **Contoso** в этом поле.  

2.  На странице **Выбранные ресурсы** выберите в списке **Ресурсы** ресурсы, которые требуется добавить в коллекцию.  

##### <a name="to-configure-a-query-rule"></a>Настройка правила запроса  

1.  В диалоговом окне **Свойства правил запросов** задайте следующие параметры:  

-   **Имя**: уникальное имя.  

-   **Импортировать инструкцию запроса** — открывает диалоговое окно **Обзор запроса**, в котором можно выбрать [запрос Configuration Manager](../../../../core/servers/manage/queries-technical-reference.md) для использования в качестве правила запроса для коллекции.  

-   **Класс ресурсов:** выберите тип ресурсов, которые требуется найти и добавить в коллекцию. Выберите одно из значений **Пользователь (ресурс)** для поиска сведений о пользователе, собираемых Configuration Manager, или **Группа пользователей (ресурс)** для поиска сведения о группе пользователей, собираемых Configuration Manager.  

-   **Изменить инструкцию запроса** — открывает диалоговое окно **Свойства формы запроса**, в котором можно [создать запрос](../../../../core/servers/manage/queries-technical-reference.md) для использования в качестве правила для коллекции.  

##### <a name="to-configure-an-include-collection-rule"></a>Настройка правила включения коллекции  

В диалоговом окне **Выбор коллекций** выберите коллекции, которые требуется включить в новую коллекцию, и нажмите кнопку **ОК**.  

##### <a name="to-configure-an-exclude-collection-rule"></a>Настройка правила исключения коллекции  

В диалоговом окне **Выбор коллекций** выберите коллекции, которые требуется исключить из новой коллекции, и нажмите кнопку **ОК**.  


-   **Использовать добавочные обновления для этой коллекции** — установите этот флажок, чтобы выполнять периодический поиск и обновление только новых или измененных с момента предыдущей оценки коллекции ресурсов независимо от выполнения полной оценки коллекции. Добавочные обновления выполняются каждые 10 минут.  

> [!IMPORTANT]  
>  Коллекции, которые настроены с помощью правил запроса, использующих следующие классы, не поддерживают добавочные обновления:  
>   
> -   SMS_G_System_CollectedFile,  
> -   SMS_G_System_LastSoftwareScan,  
> -   SMS_G_System_AppClientState,  
> -   SMS_G_System_DCMDeploymentState,  
> -   SMS_G_System_DCMDeploymentErrorAssetDetails,  
> -   SMS_G_System_DCMDeploymentCompliantAssetDetails,  
> -   SMS_G_System_DCMDeploymentNonCompliantAssetDetails,  
> -   SMS_G_User_DCMDeploymentCompliantAssetDetails (только для коллекций пользователей),  
> -   SMS_G_User_DCMDeploymentNonCompliantAssetDetails (только для коллекций пользователей),  
> -   SMS_G_System_SoftwareUsageData,  
> -   SMS_G_System_CI_ComplianceState,  
> -   SMS_G_System_EndpointProtectionStatus,  
> -   SMS_GH_System_*,  
> -   SMS_GEH_System_*.  

-   **Запланировать полное обновление этой коллекции** — запланируйте периодическую полную оценку членства в коллекции.  

6.  Завершите работу мастера. Созданная коллекция отображается в узле **Коллекции пользователей** рабочей области **Активы и соответствие** .  

> [!NOTE]  
>  Необходимо обновить или повторно загрузить консоль Configuration Manager, чтобы отобразить члены коллекции. Однако эти члены не отображаются в коллекции до первого запланированного обновления либо пока для коллекции вручную не будет выбран параметр **Обновить членство** . Для завершения обновления коллекции может потребоваться несколько минут.  

##  <a name="BKMK_3"></a> Импорт коллекции  

1.  В консоли Configuration Manager выберите **Активы и соответствие** > **Коллекции пользователей** или **Коллекции устройств**.  

3.  На вкладке **Главная** в группе **Создать** нажмите кнопку **Импортировать коллекции**.  

4.  На странице **Общие** **мастера импорта коллекций** нажмите кнопку **Далее**.  

5.  На странице **Имя MOF-файла** нажмите кнопку **Обзор** и перейдите к MOF-файлу, который содержит данные импортируемой коллекции.  

    > [!NOTE]  
    >  Импортируемый файл должен быть создан в результате экспорта с сайта, на котором выполняется та же версия Configuration Manager, что и на данном сайте. Дополнительные сведения об экспорте коллекций см. в статье [Управление коллекциями в Configuration Manager](../../../../core/clients/manage/collections/manage-collections.md).  

6.  Завершите работу мастера, чтобы импортировать коллекцию. Новая коллекция отображается в узле **Коллекции пользователей** или **Коллекции устройств** рабочей области **Активы и соответствие** . Обновите или повторно загрузите консоль Configuration Manager, чтобы увидеть члены недавно импортированной коллекции.  
