---
itle: 'Upgrade clients | Microsoft Docs | Linux UNIX '
description: "Обновите клиент на сервере Linux или UNIX в System Center Configuration Manager."
ms.custom: na
ms.date: 04/23/2017
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology: configmgr-client
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 7d2bb377-1005-4a55-bd1f-b80a6d0b22e1
caps.latest.revision: "6"
caps.handback.revision: "0"
author: robstackmsft
ms.author: robstack
manager: angrobe
ms.openlocfilehash: 394ba7c236c05cc90a3d7f99eb6146b15d620f11
ms.sourcegitcommit: 51fc48fb023f1e8d995c6c4eacfda7dbec4d0b2f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2017
---
# <a name="how-to-upgrade-clients-for-linux-and-unix-servers-in-system-center-configuration-manager"></a>Обновление клиентов для серверов Linux и UNIX в System Center Configuration Manager

*Применимо к: System Center Configuration Manager (Current Branch)*

Вы можете обновить версию клиента для Linux и UNIX на компьютере до более новой версии клиента без удаления текущего клиента. Для этого нужно установить пакет установки клиента на компьютере с использованием свойства командной строки **-keepdb** . При установке клиента для Linux и UNIX существующие данные клиента заменяются на новые файлы клиента. Однако свойство командной строки **-keepdb** указывает процессу установки сохранить уникальный идентификатор клиента (GUID), локальную базу данных информации и хранилище сертификатов. Эта информация затем используется при новой установке клиента.  

 Например, у вас есть компьютер RHEL5 x64 с клиентом из первоначального выпуска Configuration Manager для Linux и UNIX. Чтобы обновить этот клиент до версии из накопительного пакета обновления 1, вручную запустите скрипт **install** для установки применимого пакета клиента из накопительного пакета обновления 1 с добавлением параметра командной строки **-keepdb**. Используемая команда должна выглядеть примерно так: **./install -mp <имя_узла\> -sitecode <код\> -keepdb ccm-Universal-x64.<сборка\>.tar**  

## <a name="how-to-use-a-software-deployment-to-upgrade-the-client-on-linux-and-unix-servers"></a>Использование развертывания программного обеспечения для обновления клиента на серверах UNIX и Linux  
 Вы можете использовать развертывание программного обеспечения для обновления клиента для Linux и UNIX до новой версии. Однако клиент System Center Configuration Manager не может запустить скрипт установки нового клиента напрямую, так как для установки нового клиента сначала необходимо удалить текущий клиент. Это приведет к завершению клиентского процесса Configuration Manager, который запускает скрипт установки перед началом установки нового клиента. Чтобы успешно использовать развертывание программного обеспечения для установки нового клиента, необходимо запланировать запуск установки в будущем и его выполнение встроенной функцией планирования операционной системы.  

 Для этого используйте развертывание программного обеспечения, чтобы сначала скопировать файлы для нового пакета установки на клиентский компьютер, а затем разверните и выполните сценарий, чтобы запланировать время установки клиента. Этот скрипт использует встроенную команду операционной системы **at**, чтобы отложить запуск. Затем, после запуска скрипта, его работа контролируется клиентской операционной системой, а не клиентом Configuration Manager на компьютере. Это позволяет в командной строке, вызванной скриптом, сначала удалить клиент Configuration Manager, а затем установить новый клиент, завершив процесс обновления клиента на компьютере UNIX или Linux. После завершения обновления обновленный клиент остается под управлением Configuration Manager.  

 Используйте следующую процедуру, чтобы настроить развертывание программного обеспечения для обновления клиента для Linux и UNIX. Следующие шаги и примеры демонстрируют обновление компьютера RHEL5 x64 с первоначальным выпуском клиента до версии клиента накопительного пакета обновления 1.  

#### <a name="to-use-a-software-deployment-to-upgrade-the-client-on-linux-and-unix-servers"></a>Использование развертывания программного обеспечения для обновления клиента на серверах UNIX и Linux  

1.  Скопируйте новый файл пакета установки клиента на компьютер, где установлен клиент Configuration Manager, который планируется обновить.  

     Например, вы можете разместить в пакет установки клиента и установить сценарий для накопительного пакета обновления 1 в следующем расположении на клиентском компьютере: **/tmp/PATCH**.  

2.  Создайте скрипт для управления обновлением клиента Configuration Manager, а затем поместите копию скрипта в ту же папку на клиентском компьютере, где находятся файлы установки из шага 1.  

     Скрипту не требуется определенное имя, но он должен содержать достаточно команд, чтобы использовать файлы установки из локальной папки на клиентском компьютере, а также для установки пакета клиента с помощью свойства командной строки **-keepdb**. Используйте свойство командной строки **-keepdb**, чтобы сохранить уникальный идентификатор текущего клиента для использования новым клиентом, который вы устанавливаете.  

     Например, создайте сценарий с именем **upgrade.sh** , содержащий следующие строки, и скопируйте его в папку **/tmp/PATCH** на клиентском компьютере:  

    ```  
    #!/bin/sh  
    #  
    /tmp/PATCH/install -sitecode <code> -mp <hostname> -keepdb /tmp/PATCH/ccm-Universal-x64.<build>.tar  

    ```  

3.  Используйте развертывание программного обеспечения, чтобы каждый клиент использовал встроенную в компьютер команду **at** для выполнения сценария **upgrade.sh** с небольшой задержкой.  

     Например, используйте следующую командную строку для запуска скрипта: **at -f /tmp/upgrade.sh -m now + 5 minutes**  

 После успешного планирования выполнения сценария **upgrade.sh** клиент отправляет сообщение о состоянии, указывающее на успешное завершение развертывания программного обеспечения. Однако фактической установкой клиента затем, после задержки, управляет компьютер. После завершения обновления клиента проверьте установку, просмотрев файл **/var/opt/microsoft/scxcm.log** на клиентском компьютере. Кроме того, вы можете убедиться в том, что клиент установлен и взаимодействует с сайтом, просмотрев сведения о клиенте в узле **Устройства** рабочей области **Активы и соответствие** консоли Configuration Manager.  
