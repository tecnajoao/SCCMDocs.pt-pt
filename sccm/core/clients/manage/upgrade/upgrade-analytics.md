---
title: Upgrade Readiness | System Center Configuration Manager
description: "Интегрируйте Upgrade Readiness с Configuration Manager. Получайте доступ к данным по совместимости обновления в консоли администратора. Назначайте устройства для обновления или исправления."
keywords: 
author: mattbriggs
ms.author: mabrigg
manager: angerobe
ms.date: 7/31/2017
ms.topic: article
ms.prod: configuration-manager
ms.service: 
ms.technology: configmgr-client
ms.assetid: 68407ab8-c205-44ed-9deb-ff5714451624
ms.openlocfilehash: b1f4cd4a6f19a02d2b2dc3f9a841aeeb2a1403dd
ms.sourcegitcommit: 51fc48fb023f1e8d995c6c4eacfda7dbec4d0b2f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2017
---
# <a name="integrate-upgrade-readiness-with-system-center-configuration-manager"></a>Интеграция Upgrade Readiness с System Center Configuration Manager

*Применимо к: System Center Configuration Manager (Current Branch)*

Решение "Проверка готовности к обновлению" (ранее называлось Upgrade Analytics) позволяет оценивать и анализировать готовность устройства к работе с Windows 10. Интегрируйте Upgrade Readiness с Configuration Manager, чтобы получать доступ к данным по совместимости обновления клиентов в консоли администратора Configuration Manager. Вы сможете назначать устройства из списка устройств для обновления или исправления.

Upgrade Readiness — это решение в составе Microsoft Operations Management Suite (OMS). Дополнительные сведения об Upgrade Readiness см. в статье [Приступая к работе с Upgrade Readiness](https://technet.microsoft.com/itpro/windows/deploy/manage-windows-upgrades-with-upgrade-readiness).

## <a name="configure-clients"></a>Настройка клиентов

Чтобы клиенты могли предоставлять данные в Upgrade Readiness, необходимо выполнить несколько действий по настройке.

-  Настройте параметры телеметрии клиентов, как описано в разделе [Настройка телеметрии Windows в вашей организации](https://technet.microsoft.com/itpro/windows/manage/configure-windows-telemetry-in-your-organization).
-  Установите обновления из базы знаний, описываемые в разделе с инструкциями по *развертыванию обновления совместимости и соответствующих баз знаний* в статье о [начале работы с решением "Проверка готовности к обновлению"](https://technet.microsoft.com/itpro/windows/deploy/manage-windows-upgrades-with-upgrade-readiness).

    > [!NOTE]
    > Чтобы автоматизировать многие задачи настройки клиентов, можно скачать скрипт. Сведения об этом скрипте см. в разделе *Запуск скрипта развертывания Upgrade Readiness* статьи [Начало работы с Upgrade Readiness](https://technet.microsoft.com/itpro/windows/deploy/manage-windows-upgrades-with-upgrade-readiness).

## <a name="connect-to-upgrade-readiness"></a>Подключение к решению "Проверка готовности к обновлению"

### <a name="prerequisites"></a>Предварительные требования

Начиная с версии 1706 Current Branch доступен мастер служб Azure. Он упрощает настройку служб Azure, используемых с Configuration Manager. Чтобы использовать этот мастер, нужно настроить веб-приложение Azure. Дополнительные сведения см. в статье о [мастере служб Azure](/sccm/core/servers/deploy/configureazure-services-wizard).

### <a name="use-the-azure-wizard-to-create-the-connection"></a>Использование мастера Azure для создания подключения

1.  В рабочей области **Администрирование** консоли Configuration Manager разверните узел **Облачные службы** и щелкните **Службы Azure**.
2.  На вкладке **Главная** в группе **Службы Azure** щелкните **Настроить службы Azure**.
3.  На странице служб Azure введите понятное имя. Можно также ввести описание. Затем выберите **Соединитель службы проверки готовности к обновлению** и щелкните **Далее**.
4.  Укажите среду Azure на странице приложения. Щелкните **Обзор**, чтобы настроить приложение сервера.
5.  Щелкните **Импорт**, чтобы подключиться к веб-приложению в Azure.
    -  Введите **имя клиента Azure AD**.
    -  Введите **идентификатор клиента Azure AD**.
    -  Введите **имя приложения**.
    -  Введите **идентификатор клиента**.
    -  Введите **секретный ключ**.
    -  Выберите дату для параметра **Срок действия секретного ключа**.
    -  Введите любой URL-адрес в поле **URI идентификатора приложения**.
    -  Щелкните **Проверить**, а затем подтвердите информацию, нажав кнопку **OK**.

6.  Укажите подключение к решению "Проверка готовности к обновлению" на странице "Конфигурация". Выберите следующие значения.  
    -  подписки Azure;
    -  группа ресурсов Azure;
    -  рабочая область Windows Analytics.
8.  Нажмите кнопку **Далее**. На странице сводки можно проверить сведения о подключении. 

## <a name="complete-upgrade-readiness-tasks"></a>Выполнение задач Upgrade Readiness  

После создания подключения выполните указанные ниже задачи, как описано в руководстве по [началу работы с решением"Проверка готовности к обновлению"](https://technet.microsoft.com/itpro/windows/deploy/manage-windows-upgrades-with-upgrade-readiness).  

1. Добавьте службу UpgradeReadiness в рабочую область OMS.  
2. Создайте коммерческий идентификатор.  
3. Подпишитесь на службу Upgrade Readiness.   

## <a name="use-the-upgrade-readiness-deployment-script"></a>Использование скрипта развертывания Upgrade Readiness  

Вы можете автоматизировать многие задачи Upgrade Readiness и устранять неполадки, связанные с общим доступом к данным, с помощью **скрипта развертывания Upgrade Readiness**, предоставляемого Майкрософт.  
Скрипт развертывания Upgrade Readiness выполняет перечисленные ниже задачи.  

- Задает ключ коммерческого идентификатора, а также ключи CommercialDataOptIn и RequestAllAppraiserVersions.  
- Проверяет возможность отправки данных с компьютеров пользователей в корпорацию Майкрософт.  
- Проверяет, ожидается ли на компьютере перезагрузка.   
- Проверяет, установлена ли последняя версия пакета из базы знаний 10.0.x (требуется версия 10.0.14913 или более поздняя).  
- При необходимости включает режим подробного протоколирования для устранения неполадок.  
- Инициирует коллекцию данных телеметрии, которые требуются корпорации Майкрософт для оценки готовности вашей организации к обновлению.  
- Если параметр включен, в окне командной строки отображается ход выполнения скрипта. Это позволяет отслеживать проблемы (состояние выполнения для каждого шага) и (или) события записи в файл журнала.  

## <a name="to-run-the-upgrade-readiness-deployment-script"></a>Использование скрипта развертывания Upgrade Readiness  

1. Скачайте [скрипт развертывания Upgrade Readiness](https://go.microsoft.com/fwlink/?LinkID=822966&clcid=0x409) и распакуйте файл UpgradeReadiness.zip. Файлы в папке **Diagnostics** необходимы только в том случае, если вы планируете выполнять скрипт в режиме устранения неполадок.  
2. Измените указанные ниже параметры в файле RunConfig.bat.  
- Место хранения данных журнала. Пример: %SystemDrive%\URDiagnostics. Данные журнала можно сохранять в удаленной общей папке или локальном каталоге. Если создание файла журнала по указанному пути блокируется, скрипт создает файлы журнала на диске с каталогом Windows.  
- Ключ коммерческого идентификатора.  
- По умолчанию скрипт отправляет данные журнала как в консоль, так и в файл журнала. Чтобы изменить поведение по умолчанию, используйте одно из следующих значений:  
    - logMode = 0 — вывод только в консоль;  
    - logMode = 1 — вывод в файл и консоль;  
    - logMode = 2 — вывод только в файл.  
    - В целях устранения неполадок присвойте параметру **isVerboseLogging** значение **$true**. Это приведет к созданию данных журнала, которые могут помочь в диагностике проблем. По умолчанию параметр **isVerboseLogging** имеет значение **$false**. Для использования этого режима папка Diagnostics должна быть установлена в том же каталоге, что и скрипт.  
    - Если пользователям необходимо перезагрузить компьютеры, уведомите их об этом. По умолчанию эта функция выключена.  

3. Завершив изменение параметров в файле RunConfig.bat, запустите скрипт с правами администратора.  


## <a name="view-microsoft-upgrade-readiness-properties-in-configuration-manager"></a>Просмотр свойств Microsoft Upgrade Readiness в Configuration Manager  

1.  В консоли Configuration Manager перейдите в раздел **Облачные службы**, а затем выберите **Соединитель OMS**, чтобы открыть страницу **Свойства подключения OMS**.  

2.  На этой странице есть две вкладки.
  * На вкладке **Azure Active Directory** отображаются сведения о **клиенте**, **идентификаторе клиента** и **сроке действия секретного ключа клиента**, кроме того, здесь можно **проверить** срок действия **секретного ключа клиента**.
  * На вкладке **Upgrade Readiness** показаны значения **Подписка Azure**, **Группа ресурсов Azure** и **Рабочая область Operations Management Suite**.

## <a name="view-and-use-the-upgrade-information"></a>Просмотр и использование сведений об обновлении

Интегрировав Upgrade Readiness с Configuration Manager, вы можете просматривать результаты анализа готовности ваших клиентов к обновлению, а затем принимать меры.

1. В консоли Configuration Manager выберите **Наблюдение** > **Обзор** > **Upgrade Readiness**.
2. Просмотрите данные, которые включают в себя состояние готовности к обновлению и процент устройств Windows, сообщающих данные телеметрии.
3. Данные на панели мониторинга можно отфильтровать так, чтобы просмотреть данные по устройствам в определенных коллекциях.
4. Вы можете просмотреть устройства, находящиеся в определенном состоянии готовности, и создать динамическую коллекцию для них, чтобы готовые устройства обновлялись, а в отношении остальных выполнялись определенные действия по подготовке.

## <a name="create-a-connection-to-upgrade-readiness-1702-and-earlier"></a>Создание подключения к решению "Проверка готовности к обновлению" (версия 1702 или более старая)

В версиях Configuration Manager старше ветви 1706 подключение к решению "Проверка готовности к обновлению" создавалось следующим образом.

### <a name="prerequisites"></a>Предварительные требования

- Чтобы добавить подключение, в среде Configuration Manager необходимо сначала настроить [точку подключения службы](/sccm/core/servers/deploy/configure/about-the-service-connection-point) в [оперативном режиме](https://azure.microsoft.com/documentation/articles/resource-group-create-service-principal-portal/). При добавлении подключения в среду выполняется установка агента Microsoft Monitoring Agent на компьютере, где запущена эта роль системы сайта.
- Зарегистрируйте Configuration Manager как средство управления "Веб-приложение и (или) веб-API" и получите [идентификатор клиента для регистрации](https://azure.microsoft.com/documentation/articles/active-directory-integrating-applications/).
- Создайте ключ клиента для зарегистрированного средства управления в Azure Active Directory.
- На портале Azure укажите зарегистрированное веб-приложение с разрешением на доступ к OMS, как описано в разделе [Предоставление Configuration Manager разрешений для OMS](https://azure.microsoft.com/documentation/articles/log-analytics-sccm/#provide-configuration-manager-with-permissions-to-oms).

    > [!IMPORTANT]
    > При настройке разрешения на доступ к OMS выберите роль **Участник** и предоставьте ей разрешения на доступ к группе ресурсов зарегистрированного приложения.

### <a name="create-the-connection"></a>Создание подключения

1.  В консоли Configuration Manager последовательно выберите пункты **Администрирование** > **Облачные службы** > **Соединитель готовности к обновлению** > **Создать подключение к Upgrade Analytics**, чтобы запустить **Мастер создания подключения к Upgrade Analytics**.
3.  На экране **Azure Active Directory** заполните поля **Клиент**, **Идентификатор клиента** и **Секретный ключ клиента**, а затем нажмите кнопку **Далее**.
4.  На экране **Upgrade Readiness** укажите параметры подключения, заполнив поля **Подписка Azure**, **Группа ресурсов Azure** и **Рабочая область Operations Management Suite**.
5.  Проверьте параметры подключения на экране **Сводка**, а затем выберите **Далее**.

    > [!NOTE]
    > Upgrade Readiness необходимо подключить к сайту верхнего уровня в иерархии. Если вы подключаете Upgrade Readiness к автономному первичному сайту, а затем добавляете в среду сайт центра администрирования, потребуется удалить и повторно создать подключение OMS в новой иерархии.
