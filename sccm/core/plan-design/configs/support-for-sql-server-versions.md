---
title: "Поддерживаемые версии SQL Server | Документы Майкрософт"
description: "Сведения о требованиях к версии и конфигурации SQL Server для размещения базы данных сайта System Center Configuration Manager."
ms.custom: na
ms.date: 05/10/2017
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology: configmgr-other
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 35e237b6-9f7b-4189-90e7-8eca92ae7d3d
caps.latest.revision: "21"
author: Brenduns
ms.author: brenduns
manager: angrobe
ms.openlocfilehash: b35e45b9514297e2f9ce405a3244462ed735f39f
ms.sourcegitcommit: 51fc48fb023f1e8d995c6c4eacfda7dbec4d0b2f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2017
---
# <a name="supported-sql-server-versions-for-system-center-configuration-manager"></a>Поддерживаемые версии SQL Server в System Center Configuration Manager

*Применимо к: System Center Configuration Manager (Current Branch)*

Каждому сайту System Center Configuration Manager требуется поддерживаемая версия и конфигурация SQL Server для размещения базы данных сайта.  

##  <a name="bkmk_Instances"></a> Экземпляры SQL Server и расположения  
 **Сайт центра администрирования и первичные сайты:**  
База данных сайта должна использовать установленную полную версию SQL Server.  

 Возможные расположения SQL Server:  

-   компьютер сервера сайта;  
-   удаленный компьютер относительно сервера сайта.  

Поддерживаются следующие экземпляры:  

-   экземпляр по умолчанию или именованный экземпляр SQL Server;  
-   несколько конфигураций экземпляров;  
-   кластер SQL Server; См. раздел [Использование кластера SQL Server для размещения базы данных сайта](../../../core/servers/deploy/configure/use-a-sql-server-cluster-for-the-site-database.md).
-   группа доступности SQL Server AlwaysOn. Для этого варианта требуется Configuration Manager 1602 или более поздней версии. Подробные сведения см. в разделе [SQL Server AlwaysOn для высокодоступной базы данных сайта для System Center Configuration Manager](../../../core/servers/deploy/configure/sql-server-alwayson-for-a-highly-available-site-database.md).


 **Вторичные сайты:**  
 База данных сайта может использовать экземпляр по умолчанию установленной полной версии SQL Server или экспресс-выпуска SQL Server.  

 SQL Server должен находиться на компьютере сервера сайта.  

 **Ограничения для поддержки**   
 Не поддерживаются следующие конфигурации:
 -   кластер SQL Server в конфигурации кластера балансировки сетевой нагрузки (NLB);
 -   кластер SQL Server в общем томе кластера (CSV);
 -   технология зеркального отображения базы данных SQL Server и одноранговая репликация.

Репликация транзакций SQL Server поддерживается только для репликации объектов в точки управления, настроенные на использование [реплик базы данных](https://technet.microsoft.com/library/mt608546.aspx).  

##  <a name="bkmk_SQLVersions"></a> Поддерживаемые версии SQL Server  
 В иерархии с несколькими сайтами разные сайты могут использовать разные версии SQL Server для размещения базы данных сайта только в следующих случаях:
 -  Configuration Manager поддерживает используемые версии SQL Server.
 -  Используемые версии SQL Server поддерживаются корпорацией Майкрософт.
 -  SQL Server поддерживает репликацию между двумя версиями SQL Server.  Например, [SQL Server не поддерживает репликацию между SQL Server 2008 R2 и SQL Server 2016](https://docs.microsoft.com/sql/relational-databases/replication/deprecated-features-in-sql-server-replication).



 Если не указано иное, следующие версии SQL Server поддерживаются всеми актуальными версиями System Center Configuration Manager. Если добавляется поддержка новой версии SQL Server или пакета обновления, будет указана версия Configuration Manager, в которой появилась эта поддержка. Аналогично, если поддержка прекращается, вам будут предоставлены сведения о затронутых версиях Configuration Manager.   

Поддержка конкретного пакета обновления SQL Server включает поддержку всех накопительных пакетов для этого пакета обновления, если в самих накопительных пакетах не нарушается обратная совместимость с базовой версией пакета обновления. Если не указано никаких пакетов обновления, поддерживается только основная версия SQL Server без пакетов обновления. Ели в будущем для этой версии выйдет новый пакет обновления, будет выпущено отдельное заявление о поддержке перед добавлением поддержки для этого нового пакета обновления.


> [!IMPORTANT]  
>  При использовании SQL Server Standard для базы данных сайта центра администрирования вы ограничиваете общее число клиентов, поддерживаемых иерархией. См. раздел [Данные по размерам и масштабированию](../../../core/plan-design/configs/size-and-scale-numbers.md).

### <a name="sql-server-2016-sp1-standard-enterprise"></a>SQL Server 2016 с пакетом обновления 1 (SP1) — Standard, Enterprise  
Данную версию SQL Server без минимального накопительного пакета обновления можно использовать для следующих элементов:  

-   сайт центра администрирования  
-   первичный сайт;  
-   вторичный сайт.  

### <a name="sql-server-2016-standard-enterprise"></a>SQL Server 2016 — Standard, Enterprise  
Данную версию SQL Server без минимального накопительного пакета обновления можно использовать для следующих элементов:  

-   сайт центра администрирования  
-   первичный сайт;  
-   вторичный сайт.  


### <a name="sql-server-2014-sp2-standard-enterprise"></a>SQL Server 2014 с пакетом обновления 2 (SP2) — Standard, Enterprise  
Данную версию SQL Server без минимального накопительного пакета обновления можно использовать для следующих элементов:  

-   сайт центра администрирования  
-   первичный сайт;  
-   вторичный сайт.



### <a name="sql-server-2014-sp1-standard-enterprise"></a>SQL Server 2014 с пакетом обновления 1 (SP1) — Standard, Enterprise  
 Данную версию SQL Server без минимального накопительного пакета обновления можно использовать для следующих элементов:  

-   сайт центра администрирования  
-   первичный сайт;  
-   вторичный сайт.


### <a name="sql-server-2012-sp3-standard-enterprise"></a>SQL Server 2012 с пакетом обновления 3 (SP3) — Standard, Enterprise  
 Данную версию SQL Server без минимального накопительного пакета обновления можно использовать для следующих элементов:  

-   сайт центра администрирования  
-   первичный сайт;  
-   вторичный сайт.  

<!-- Support for this service pack version has been dropped by Microsoft    
### SQL Server 2012 SP2: Standard, Enterprise   
 You can use this version of SQL Server with no minimum cumulative update version for the following:  

-   A central administration site  
-   A primary site  
-   A secondary site  
-->

### <a name="sql-server-2008-r2-sp3-standard-enterprise-datacenter"></a>Windows Server 2008 R2 с пакетом обновления 3 (SP3) — Standard, Enterprise, Datacenter     
  Эта версия SQL Server не поддерживается [начиная с версии 1702](/sccm/core/plan-design/changes/removed-and-deprecated-features#deprecated-support-for-sql-server-versions-as-a-site-database).  
 Поддержка этой версии SQL Server продолжается, если вы используете версию Configuration Manager старше 1702.

Если эта версия SQL Server поддерживается вашей версией Configuration Manager, вы можете использовать ее без минимального накопительного пакета обновления для следующих элементов:  

-   сайт центра администрирования  
-   первичный сайт;
-   вторичный сайт.



### <a name="sql-server-2016-express-sp1"></a>Экспресс-выпуск SQL Server 2016 с пакетом обновления 1 (SP1)  
Данную версию SQL Server без минимального накопительного пакета обновления можно использовать для следующих элементов:
-   вторичный сайт.

### <a name="sql-server-2016-express"></a>SQL Server 2016, экспресс-выпуск
Данную версию SQL Server без минимального накопительного пакета обновления можно использовать для следующих элементов:
-   вторичный сайт.


### <a name="sql-server-2014-express-sp2"></a>SQL Server 2014 Express с пакетом обновления 2 (SP2)   
Данную версию SQL Server без минимального накопительного пакета обновления можно использовать для следующих элементов:  

-   вторичный сайт.  


### <a name="sql-server-2014-express-sp1"></a>SQL Server 2014 Express с пакетом обновления 1 (SP1)   
 Данную версию SQL Server без минимального накопительного пакета обновления можно использовать для следующих элементов:  

-   вторичный сайт.  

### <a name="sql-server-2012-express-sp3"></a>SQL Server 2012 Express с пакетом обновления 3 (SP3)  
Данную версию SQL Server без минимального накопительного пакета обновления можно использовать для следующих элементов:  

-   вторичный сайт.  

<!-- Support for this service pack version has been dropped by Microsoft   
### SQL Server 2012 Express SP2   
 You can use this version of SQL Server with no minimum cumulative update version for the following:  

-   A secondary site  
-->


##  <a name="bkmk_SQLConfig"></a> Обязательные конфигурации для SQL Server  
 Ниже перечислены необходимые условия для всех устанавливаемых версий SQL Server, используемых для базы данных сайта (включая экспресс-выпуск SQL Server). Если Configuration Manager устанавливает экспресс-выпуск SQL Server в процессе установки вторичного сайта, эти конфигурации создаются автоматически.  

 **Версия архитектуры SQL Server:**  
 Для работы Configuration Manager требуется 64-разрядная версия SQL Server для размещения базы данных сайта.  

 **Параметры сортировки баз данных:**  
 На всех сайтах как экземпляр SQL Server, используемый для сайта, так и база данных сайта должны использовать следующие параметры сортировки: **SQL_Latin1_General_CP1_CI_AS**.  

 Configuration Manager поддерживает два исключения из этих правил сортировки. Дополнительные сведения см. в статье [Международная поддержка в System Center Configuration Manager](../../../core/plan-design/hierarchy/international-support.md).  

 **Компоненты SQL Server:**  
 Для каждого сервера сайта требуются только **службы компонента Database Engine** .  

 Для репликации баз данных Configuration Manager не требуется компонент **Репликация SQL Server**. Но эта конфигурация SQL Server необходима при использовании [реплик базы данных для точек управления для System Center Configuration Manager](../../../core/servers/deploy/configure/database-replicas-for-management-points.md).  

 **Проверка подлинности Windows:**  
 Configuration Manager требуется компонент **проверки подлинности Windows** для проверки подключений к базе данных.  

 **Экземпляр SQL Server:**  
 Для каждого сайта необходимо использовать выделенный экземпляр SQL Server. Это может быть **именованный экземпляр** или **экземпляр по умолчанию**.  

 **Память SQL Server:**  
 Зарезервируйте память для SQL Server с помощью SQL Server Management Studio, указав параметр **Минимальный объем памяти сервера** в разделе **Параметры памяти сервера**. Дополнительные сведения о выделении фиксированного объема памяти см. в статье [Практическое руководство. Установка фиксированного размера памяти (среда SQL Server Management Studio)](http://go.microsoft.com/fwlink/p/?LinkId=233759).  

-   **Сервер базы данных, который установлен на том же компьютере, что и сервер сайта**. Предельный объем памяти, выделяемой для SQL Server, должен составлять 50–80 % общего объема адресуемой памяти системы.  

-   **Выделенный сервер базы данных (удаленно от сервера сайта)**. Предельный объем памяти, выделяемой для SQL Server, должен составлять 80–90 % общего объема адресуемой памяти системы.  

-   **Резерв памяти для буферного пула каждого используемого экземпляра SQL Server:**  

    -   сайт центра администрирования: минимум 8 гигабайт (ГБ);  
    -   первичный сайт: минимум 8 гигабайт (ГБ);  
    -   вторичный сайт: минимум 4 гигабайта (ГБ).  

**Вложенные триггеры SQL:**  
 Параметр[Вложенные триггеры SQL](http://go.microsoft.com/fwlink/?LinkId=528802) должен быть включен.  

 **Интеграция со средой CLR для SQL Server**  
  Для работы базы данных сайта требуется среда CLR для SQL Server. Этот компонент включается автоматически при установке Configuration Manager. Дополнительные сведения о среде CLR см. в разделе [Введение в интеграцию SQL Server со средой CLR](https://msdn.microsoft.com/library/ms254498\(v=vs.110\).aspx).  

##  <a name="bkmk_optional"></a> Дополнительные конфигурации для SQL Server  
 Следующие конфигурации являются необязательными для каждой базы данных, использующей полную установку SQL Server.  

 **Служба SQL Server**  
 Вы можете настроить службу SQL Server на выполнение с использованием следующих средств.  

-   Учетная запись **локального пользователя домена**:  

    -   Это рекомендованный подход, при котором может потребоваться вручную зарегистрировать имя субъекта-службы (SPN) для учетной записи.  

-   Учетная запись **локальной системы** компьютера, на котором выполняется SQL Server:  

    -   Используйте учетную запись локальной системы для упрощения процесса настройки.  
    -   Если используется учетная запись локальной системы, Configuration Manager автоматически регистрирует имя субъекта-службы для службы SQL Server.  
    -   Помните, что использование учетной записи локальной системы для службы SQL Server не является рекомендуемым подходом.  

Когда компьютер SQL Server не использует учетную запись локальной системы для запуска служб SQL Server, необходимо настроить имя SPN учетной записи, которая используется для запуска службы SQL Server в доменных службах Active Directory. (При использовании системной учетной записи имя субъекта-службы регистрируется автоматически.)

Сведения об именах субъектов-служб для базы данных сайта см. в подразделе [Управление именем участника-службы для сервера базы данных сайта](../../../core/servers/manage/modify-your-infrastructure.md#bkmk_SPN) раздела [Изменение инфраструктуры System Center Configuration Manager](../../../core/servers/manage/modify-your-infrastructure.md).  

Сведения об изменении учетной записи, используемой службой SQL Server, см. в статье [Как изменить стартовую учетную запись службы для SQL Server (диспетчер конфигурации SQL Server)](http://go.microsoft.com/fwlink/p/?LinkId=237661).  

**Службы SQL Server Reporting Services**  
Службы SQL Server Reporting Services необходимы для установки точки служб отчетов, позволяющей создавать отчеты.  

> [!IMPORTANT]  
> После обновления SQL Server предыдущей версии может возникнуть следующая ошибка: *Построитель отчетов не существует*.    
> Для устранения этой ошибки необходимо переустановить роль системы сайта "Точка служб отчетов".

**Порты SQL Server**  
Для обмена данными с компонентом SQL Server Database Engine, а также для межсайтовой репликации можно использовать конфигурацию портов SQL Server по умолчанию или указать другие порты.  

-   Для **межсайтового обмена данными** применяется компонент SQL Server Service Broker, который по умолчанию использует TCP-порт 4022.  
-   **Для обмена данными** между системой базы данных SQL Server и различными ролями системы сайта Configuration Manager по умолчанию используется порт TCP 1433. Следующие роли систем сайта соединяются напрямую с базой данных SQL Server.  

    -   Точка управления.  
    -   Компьютер поставщика SMS  
    -   Точка служб отчетов  
    -   Сервер сайтов  

Если на сервере SQL Server размещены базы данных нескольких сайтов, каждая база данных должна использовать отдельный экземпляр SQL Server. Кроме того, для каждого экземпляра должен быть настроен уникальный набор портов.  

> [!WARNING]  
>  Configuration Manager не поддерживает динамические порты. Именованные экземпляры SQL Server по умолчанию используют динамические порты для подключения к компоненту Database Engine, поэтому при использовании именнованного экземпляра необходимо вручную настроить статический порт для внутрисайтовой передачи данных.  

Если на компьютере с SQL Server включен брандмауэр, убедитесь, что в нем открыты порты, используемые для развертывания. Также эти порты должны быть открыты во всех расположениях в сети между компьютерами, которые обмениваются данными с сервером SQL Server.  

Пример того, как настроить SQL Server на использование конкретного порта, см. в статье [Практическое руководство. Настройка сервера для прослушивания определенного TCP-порта (диспетчер конфигурации SQL Server)](http://go.microsoft.com/fwlink/p/?LinkID=226349) в разделе библиотеки TechNet, посвященном SQL Server.  

## <a name="upgrade-options-for-sql-server"></a>Параметры обновления для SQL Server
Если вы намерены обновить версию SQL Server, мы рекомендуем использовать перечисленные здесь методы от простых к более сложным.
1. [Обновите SQL Server на месте](/sccm/core/servers/manage/upgrade-on-premises-infrastructure#a-namebkmksupconfigupgradedbsrva-upgrade-sql-server-on-the-site-database-server) (рекомендуется).
2. Установите новую версию SQL Server на новом компьютере, а затем [воспользуйтесь функцией перемещения базы данных](/sccm/core/servers/manage/modify-your-infrastructure#a-namebkmkdbconfiga-modify-the-site-database-configuration) в установщике Configuration Manager, чтобы назначить сервер сайта на обращение к новому серверу SQL Server.
3. Используйте функции [резервного копирования и восстановления](/sccm/protect/understand/backup-and-recovery).
