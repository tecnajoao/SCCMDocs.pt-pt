---
title: "Публикация и схема Active Directory | Документы Майкрософт"
description: "Расширение схемы Active Directory для System Center Configuration Manager для упрощения процесса развертывания и настройки клиентов."
ms.custom: na
ms.date: 2/6/2017
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology: configmgr-other
ms.tgt_pltfrm: na
ms.topic: get-started-article
ms.assetid: bc15ee7e-4d0a-4463-ae2c-f72d8d45d65d
caps.latest.revision: "17"
caps.handback.revision: "0"
author: Brenduns
ms.author: brenduns
manager: angrobe
ms.openlocfilehash: 58beef440db8e019a06ce7c4c8eaabc8e85ce954
ms.sourcegitcommit: 51fc48fb023f1e8d995c6c4eacfda7dbec4d0b2f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2017
---
# <a name="prepare-active-directory-for-site-publishing"></a>Подготовка Active Directory к публикации сайта

*Применимо к: System Center Configuration Manager (Current Branch)*

При расширении схемы Active Directory для System Center Configuration Manager вы вводите новые структуры Active Directory, используемые сайтами Configuration Manager для публикации основных сведений в безопасном месте, где клиенты могут легко получить к ним доступ.  

Рекомендуется использовать Configuration Manager с расширенной схемой Active Directory при управлении локальными клиентами. Расширенная схема может упростить процесс развертывания и настройки клиентов. Кроме того, она позволяет клиентам эффективно находить ресурсы, такие как серверы содержимого и дополнительные службы, предоставляемые различными ролями системы сайта Configuration Manager.  

-   Если вы не знаете, что именно дает расширенная схема развертывания Configuration Manager, то можете прочитать раздел о [расширениях схемы для System Center Configuration Manager](../../../core/plan-design/network/schema-extensions.md), чтобы принять обоснованное решение.  

-   Если вы не используете расширенную схему, для обнаружения служб и серверов системы сайта можно настроить другие методы, такие как DNS и WINS. Эти методы обнаружения службы требуют дополнительной настройки и не являются предпочтительным способом обнаружения службы клиентами. Дополнительные сведения см. в разделе [Пояснения о том, как клиенты находят ресурсы и службы сайта для System Center Configuration Manager](../../../core/plan-design/hierarchy/understand-how-clients-find-site-resources-and-services.md).  

-   Если схема Active Directory была расширена для Configuration Manager 2007 или System Center 2012 Configuration Manager, никаких других действий не требуется. Расширения схемы не изменяются и уже доступны для работы.  

Расширение схемы выполняется однократно для любого леса. Для расширения схемы Active Directory и ее последующего использования выполните описанные ниже действия.  

## <a name="step-1-extend-the-schema"></a>Шаг 1. Расширение схемы  
При расширении схемы для Configuration Manager потребуется выполнить следующие задачи:  

-   использовать учетную запись, которая является членом группы безопасности "Администраторы схемы";  

-   выполнить вход в контроллер домена хозяина схемы.  

-   Запустите средство **Extadsch.exe** или воспользуйтесь программой командной строки LDIFDE с файлом **ConfigMgr_ad_schema.ldf** . Средство и файл должны находиться в папке **SMSSETUP\BIN\X64** установочного носителя Configuration Manager.  

#### <a name="option-a-use-extadschexe"></a>Вариант А. Использование Extadsch.exe  

1.  Запустите файл **extadsch.exe** , чтобы добавить новые классы и атрибуты в схему Active Directory.  

    > [!TIP]  
    >  Запустите это средство из командной строки, чтобы просмотреть выводимые им во время выполнения данные.  

2.  Убедитесь в успешном выполнении расширения схемы, просмотрев файл extadsch.log в корне системного диска.  

#### <a name="option-b-use-the-ldif-file"></a>Вариант Б. Использование LDIF-файла  

1.  Измените файл **ConfigMgr_ad_schema.ldf** для определения корневого домена Active Directory, который необходимо расширить.  

    -   Замените все текстовые строки **DC=x** в файле полным именем расширяемого домена.  

    -   Например, если полное имя расширяемого домена — widgets.microsoft.com, измените все строки DC=x в файле на **DC=widgets, DC=microsoft, DC=com**.  

2.  С помощью программы командной строки LDIFDE импортируйте содержимое файла **ConfigMgr_ad_schema.ldf** в доменные службы Active Directory:  

    -   Например, следующая командная строка импортирует расширения схемы в доменные службы Active Directory, включает режим подробного ведения журнала и создает файл журнала во время процесса импорта: **ldifde -i -f ConfigMgr_ad_schema.ldf -v -j &lt;расположение для хранения файла журнала\>**.  

3.  Чтобы проверить успешность выполнения расширения схемы, просмотрите файл журнала, созданный в командной строке на предыдущем шаге.  

## <a name="step-2--create-the-system-management-container-and-grant-sites-permissions-to-the-container"></a>Шаг 2.  Создание контейнера System Management и предоставление ему разрешений для сайтов  
 После расширения схемы необходимо создать контейнер **System Management** в доменных службах Active Directory (AD DS).  

-   Этот контейнер создается один раз в каждом домене, где имеется первичный или вторичный сайт, который будет публиковать данные в Active Directory.  

-   Для каждого контейнера вы предоставляете разрешения учетной записи компьютера каждого сервера первичного или вторичного сайта, который будет публиковать данные в этом домене. Каждой учетной записи требуется разрешение **Полный доступ** для контейнера с расширенным разрешением **Применять**, имеющим значение **Этот объект и все дочерние объекты**.  

#### <a name="to-add-the-container"></a>Добавление контейнера  

1.  Используйте учетную запись с разрешением **Создание всех дочерних объектов** для контейнера **System** в доменных службах Active Directory.  

2.  Запустите файл **ADSI Edit** (adsiedit.msc) и подключитесь к домену сервера сайта.  

3.  Создайте контейнер:  

    -   Последовательно разверните узлы **Домен** &lt;полное доменное имя компьютера\>, &lt;различающееся имя\>, щелкните правой кнопкой мыши **CN=System**, выберите пункт **Создать**, а затем — **Объект**.  

    -   В диалоговом окне **Создание объекта** выберите **Контейнер** и нажмите кнопку **Далее**.  

    -   В поле **Значение** введите **System Management**, а затем нажмите кнопку **Далее**.  

4.  Назначьте разрешения:  

    > [!NOTE]  
    >  При необходимости вы можете использовать для добавления разрешений в контейнер другие средства, такие как средство администрирования «Пользователи и компьютеры Active Directory» (dsa.msc).  

    -   Правой кнопкой мыши щелкните **CN=System Management** и выберите пункт **Свойства**.  

    -   Откройте вкладку **Безопасность**, нажмите кнопку **Добавить**, а затем добавьте учетную запись компьютера сервера сайта с разрешением **Полный доступ**.  

    -   Щелкните **Дополнительно**, выберите учетную запись компьютера сервера сайта и нажмите кнопку **Изменить**.  

    -   В списке **Применять** выберите **Этот объект и все дочерние объекты**.  

5.  Нажмите кнопку **ОК**, чтобы закрыть консоль и сохранить конфигурацию.  

## <a name="step-3-set-up-sites-to-publish-to-active-directory-domain-services"></a>Шаг 3. Настройка сайтов для публикации в доменных службах Active Directory  
 После настройки контейнера, назначения разрешений и установки первичного сайта Configuration Manager можно настроить этот сайт для публикации данных в Active Directory.  

 Дополнительные сведения о публикации см. в разделе [Публикация данных сайта для System Center Configuration Manager](../../../core/servers/deploy/configure/publish-site-data.md).  
