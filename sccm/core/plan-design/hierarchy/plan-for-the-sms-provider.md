---
title: "Планирование использования поставщика SMS | Документы Майкрософт"
description: "Сведения о том, как поставщик SMS помогает управлять System Center Configuration Manager."
ms.custom: na
ms.date: 2/7/2017
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology: configmgr-other
ms.tgt_pltfrm: na
ms.topic: get-started-article
ms.assetid: 5d5d6273-0d8a-43c7-865a-cdb1736dcae3
caps.latest.revision: "8"
author: Brenduns
ms.author: brenduns
manager: angrobe
ms.openlocfilehash: 547dc39d5659c7c2e6f1ca670caddc127dbf22c4
ms.sourcegitcommit: 51fc48fb023f1e8d995c6c4eacfda7dbec4d0b2f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2017
---
# <a name="plan-for-the-sms-provider-for-system-center-configuration-manager"></a>Планирование использования поставщика SMS для System Center Configuration Manager

*Применимо к: System Center Configuration Manager (Current Branch)*

Для управления System Center Configuration Manager используется консоль Configuration Manager, которая подключается к экземпляру **поставщика SMS**. По умолчанию поставщик SMS устанавливается на сервере сайта при установке сайта центра администрирования или первичного сайта. 


##  <a name="BKMK_PlanSMSProv"></a> Сведения о поставщике SMS  
 Поставщик SMS — это поставщик инструментария управления Windows (WMI), назначающий доступ на **чтение** и **запись** к базе данных Configuration Manager на сайте.  

-   На каждом сайте центра администрирования и каждом первичном сайте должен присутствовать хотя бы один поставщик SMS. При необходимости можно установить дополнительные поставщики.  
-   Группа безопасности **Администраторы SMS** предоставляет доступ к поставщику SMS. Configuration Manager автоматически создает эту группу на сервере сайта и на каждом компьютере, где устанавливается экземпляр поставщика SMS.  

-   На вторичных сайтах использование поставщика SMS не поддерживается.  


Пользователи Configuration Manager с правами администратора используют поставщик SMS для доступа к информации, хранящейся в базе данных. Для этого администраторы могут использовать консоль Configuration Manager, обозреватель ресурсов, средства и пользовательские скрипты. Поставщик SMS не взаимодействует с клиентами Configuration Manager. Когда консоль Configuration Manager подключается к сайту, она запрашивает WMI на сервере сайта, чтобы найти экземпляр поставщика SMS.  

 Поставщик SMS помогает обеспечивать безопасность Configuration Manager. Он возвращает лишь ту информацию, которую разрешено просматривать администратору, запустившему консоль Configuration Manager.  

> [!IMPORTANT]  
>  Если все компьютеры, на которых размещены поставщики SMS для сайта, отключены от сети, консоли Configuration Manager не могут подключиться к базе данных сайта.  

 Дополнительные сведения об управлении поставщиком SMS см. в [соответствующем разделе](../../../core/servers/manage/modify-your-infrastructure.md#BKMK_ManageSMSprovider) статьи [Изменение инфраструктуры System Center Configuration Manager](../../../core/servers/manage/modify-your-infrastructure.md).  

## <a name="prerequisites-to-install-the-sms-provider"></a>Необходимые условия для установки поставщика SMS  

 Поддержка поставщика SMS:  

-   Компьютер должен находиться в составе домена с двусторонними отношениями доверия с сервером сайта и системой базы данных сайта.  

-   На компьютере не может быть роли системы сайта другого сайта.  

-   На компьютере не может быть поставщика SMS любого сайта.  

-   Этот компьютер должен работать под управлением операционной системы, которая поддерживается для сервера сайта.  

-   На компьютере должно быть не менее 650 свободного места на диске для поддержки компонентов пакета автоматического развертывания Windows (Windows ADK), которые устанавливаются вместе с поставщиком SMS. Дополнительные сведения о Windows ADK и поставщике SMS см. в разделе [Требования для развертывания операционной системы у поставщика SMS](#BKMK_WAIKforSMSProv) этой статьи.  

##  <a name="bkmk_location"></a> Расположения поставщика SMS  
 При установке сайта автоматически устанавливается первый поставщик SMS для сайта. Для поставщика SMS можно указать любое из следующих поддерживаемых расположений.  

-   Компьютер сервера сайта  

-   Компьютер базы данных сайта  

-   Компьютер серверного уровня, на котором нет поставщика SMS и роли системы сайта с другого сайта  


Для просмотра расположений каждого установленного на сайте поставщика SMS выберите вкладку **Общие** диалогового окна **Свойства** сайта.  

 Каждый поставщик SMS поддерживает одновременные подключения нескольких запросов. Для этих подключений ограничивается только число доступных серверных подключений на компьютере поставщика SMS и объем доступных ресурсов на компьютере поставщика SMS, использующихся для обслуживания запросов на подключение.  

 После установки сайта можно снова запустить программу установки на сервере сайта, чтобы изменить расположение существующего поставщика SMS или чтобы установить на этом сайте дополнительные поставщики SMS. На один компьютер можно установить только один поставщик SMS; на компьютер невозможно установить поставщик SMS с нескольких сайтов.  

 Используйте следующую информацию, чтобы определить преимущества и недостатки установки поставщика SMS в каждом из поддерживаемых расположений.  

 **Сервер сайта Configuration Manager**  

-   **Преимущества:**  

    -   Поставщик SMS не использует системные ресурсы компьютера базы данных сайта.  

    -   В этом расположении обеспечивается более высокая производительность по сравнению с установкой поставщика SMS на компьютере, отличном от сервера сайта или компьютера базы данных сайта.  

-   **Недостатки:**  

    -   Поставщик SMS использует системные и сетевые ресурсы, которые могут быть предоставлены для работы сервера сайта.  


**Сервер SQL Server, на котором размещена база данных сайта**  

-   **Преимущества:**  

    -   Поставщик SMS не использует системные ресурсы сервера сайта.  

    -   Это расположение может обеспечить наивысшую производительность из всех трех расположений при наличии достаточных серверных ресурсов.  

-   **Недостатки:**  

    -   Поставщик SMS использует системные и сетевые ресурсы, которые могут быть предоставлены для работы базы данных сайта.  

    -   Это расположение нельзя использовать, если база данных сайта размещена в кластерном экземпляре SQL Server.  


**Компьютер, отличный от сервера сайта и компьютера базы данных сайта**  

-   **Преимущества:**  

    -   Поставщик SMS не использует системные ресурсы сервера сайт и компьютера базы данных сайта.  

    -   Этот тип расположения дает возможность развертывать дополнительные поставщики SMS для обеспечения высокой доступности подключений.  

-   **Недостатки:**  

    -   Производительность поставщика SMS может быть снижена из-за дополнительной сетевой активности, необходимой для координации с сервером сайта и компьютером базы данных сайта.  

    -   Этот сервер должен быть всегда доступен компьютеру базы данных сайта и всем компьютерам с установленной консолью Configuration Manager.  

    -   Этот расположение может использовать системные ресурсы, которые в противном случае были бы представлены другим службам.  

##  <a name="BKMK_SMSProvLanguages"></a> Языки поставщика SMS  
 Работа поставщика SMS не зависит от языка интерфейса, выбранного на компьютере, на котором установлен поставщик SMS.  

 Когда пользователь с правами администратора или Configuration Manager обрабатывает данные запросов с помощью поставщика SMS, поставщик SMS пытается вернуть эти данные в формате, соответствующем языку интерфейса операционной системы компьютера, отправившего запрос.

Способ, которым он пытается установить соответствие языка, является в некоторой степени косвенным. Поставщик SMS не выполняет перевод данных с одного языка на другой. При возврате данных для отображения в консоли Configuration Manager язык отображения данных зависит от источника объекта и типа хранилища.  

 Если данные объекта хранятся в базе данных, доступные языки отображения зависят от следующих факторов.  

-   При хранении в базе данных объектов, создаваемых Configuration Manager, поддерживается использование нескольких языков. Объект хранится с использованием языков, настроенных на сайте, где объект был создан при запуске программы установки. Эти объекты отображаются в консоли Configuration Manager с использованием языка, выбранного на запрашивающем данные компьютере, если этот язык доступен для объекта. Если объект не может быть отображен с использованием языка, выбранного на запрашивающем компьютере, он отображается с использованием языка по умолчанию (английский).  

-   Объекты, создаваемые пользователями с правами администратора, хранятся в базе данных с использованием языка, использованного для создания объекта. В консоли Configuration Manager эти объекты отображаются с использованием того же языка. Для них не выполняется смена языка в поставщике SMS и не поддерживается хранение с использованием нескольких языков.  

##  <a name="BKMK_MultiSMSProv"></a> Использование нескольких поставщиков SMS  
 После завершения установки сайта на нем можно установить дополнительные поставщики SMS. Для установки дополнительных поставщиков SMS запустите программу установки Configuration Manager на сервере сайта. Установку дополнительных поставщиков SMS имеет смысл рассматривать при наличии любого из следующих условий.  

-   Имеется много пользователей с правами администратора, запускающих консоль Configuration Manager и одновременно подключающихся к сайту.  

-   Планируется использовать пакет SDK для Configuration Manager или другие продукты, которые могут часто использовать вызовы поставщика SMS.  

-   Необходимо обеспечить высокий уровень доступности поставщика SMS.  


Когда на сайте установлено несколько поставщиков SMS и поступает запрос, сайт случайным образом назначает каждому новому запросу на подключение один из установленных поставщиков SMS. Указать определенное расположение поставщика SMS для конкретного сеанса подключения нельзя.  

> [!NOTE]  
>  Рассмотрите преимущества и недостатки каждого варианта расположения поставщиков SMS. При этом учитывайте то, что контролировать выбор поставщика SMS для каждого нового подключения нельзя.  

Например, при первом подключении консоли Configuration Manager к сайту подключение запрашивает WMI на сервере сайта, чтобы идентифицировать экземпляр поставщика SMS, который будет использоваться консолью. Этот экземпляр поставщика SMS будет использоваться консолью Configuration Manager до окончания сеанса консоли. Если сеанс завершится из-за того, что компьютер поставщика SMS стал недоступным в сети, при повторном подключении консоли Configuration Manager сайт просто повторно выполнит определение экземпляра поставщика SMS, к которому нужно подключиться. Возможна ситуация, когда сеансу будет назначен прежний недоступный компьютер поставщика SMS. При этом следует повторять попытку подключения консоли Configuration Manager, пока сеансу не будет назначен доступный компьютер поставщика SMS.  

##  <a name="BKMK_AboutSMSAdmins"></a> Группа администраторов SMS  
 Группа "Администраторы SMS" используется для обеспечения доступа пользователей с правами администратора к поставщику SMS. Эта группа автоматически создается на сервере сайта при установке сайта и на всех компьютерах, на которых установлены поставщики SMS. Ниже приведены дополнительные сведения о группе "Администраторы SMS".  

-   Если компьютер является рядовым сервером, группа "Администраторы SMS" создается как локальная группа.  

-   Если компьютер является контроллером домена, группа "Администраторы SMS" создается как локальная группа домена.  

-   При удалении поставщика SMS с компьютера группа "Администраторы SMS" не удаляется с компьютера.  


Чтобы пользователь мог подключиться к поставщику SMS, его учетная запись должна быть включена в группу "Администраторы SMS". Все учетные записи пользователей с правами администратора, настраиваемые в консоли Configuration Manager, автоматически добавляются в группу "Администраторы SMS" на всех серверах сайта и компьютерах с поставщиками SMS в иерархии. При удалении учетной записи пользователя с правами администратора в консоли Configuration Manager эта учетная запись удаляется из группы "Администраторы SMS" на всех серверах сайта и компьютерах с поставщиками SMS в иерархии.  

После успешного подключения пользователя к поставщику SMS ресурсы Configuration Manager, которыми пользователь может управлять или с помощью которых осуществлять доступ, определяются средствами ролевого администрирования.  

Вы можете просматривать и настраивать права и разрешения для группы «Администраторы SMS» с помощью оснастки MMC «Элемент управления WMI». По умолчанию **Все** имеют следующие разрешения: **Выполнение методов**, **Запись поставщика**и **Включить учетную запись** . После подключения пользователя к поставщику SMS пользователь получает доступ к данным, хранящимся в базе данных, на основании присвоенных его роли в консоли Configuration Manager прав безопасности ролевого администрирования. Группа "Администраторы SMS" имеет явные разрешения **Включение учетной записи** и **Включение удаленного доступа** в пространстве имен **Root\SMS**.  

> [!NOTE]  
>  Каждому пользователю, который использует удаленную консоль Configuration Manager, требуются разрешения DCOM для удаленной активации на компьютере сервера сайта и на компьютере поставщика SMS. Хотя эти разрешения можно предоставить любому пользователю или группе, рекомендуется предоставить их группе "Администраторы SMS" для упрощения администрирования. Дополнительные сведения см. в подразделе [Настройка разрешений DCOM для удаленных консолей Configuration Manager](../../../core/servers/manage/modify-your-infrastructure.md#BKMK_ConfigDCOMforRemoteConsole) раздела [Изменение инфраструктуры System Center Configuration Manager](../../../core/servers/manage/modify-your-infrastructure.md).  


##  <a name="BKMK_SMSProvNamespace"></a> Пространство имен поставщика SMS  
Структура поставщика SMS определяется схемой WMI. Расположение данных Configuration Manager в схеме поставщика SMS описывается пространством имен схемы. В следующей таблице приведены некоторые распространенные пространства имен, используемые поставщиком SMS.  

|Пространство имен|Описание|  
|---------------|-----------------|  
|Root\SMS\site_*&lt;код_сайта\>*|Поставщик SMS, активно используемый консолью Configuration Manager, обозревателем ресурсов, средствами Configuration Manager и сценариями.|  
|Root\SMS\расположение_поставщика_SMS|Расположение компьютеров поставщиков SMS для сайта.|  
|Root\CIMv2|Расположение данных пространства имен WMI, полученное в ходе инвентаризации оборудования и программного обеспечения.|  
|Root\CCM|Политики конфигурации и данные клиента Configuration Manager.|  
|root\CIMv2\SMS|Расположение классов отчетов об инвентаризации, собранных агентом клиента инвентаризации. Эти параметры, основанные на конфигурации параметров клиента для компьютера, компилируются клиентами при оценке политики компьютера.|  

##  <a name="BKMK_WAIKforSMSProv"></a> Требования к развертыванию операционной системы для поставщика SMS  
На компьютере, на котором устанавливается экземпляр поставщика SMS, должна быть установлена версия Windows ADK, которая требуется для используемой версии Configuration Manager.  

 -   Например, для версии 1511 Configuration Manager требуется версия Windows 10 RTM (10.0.10240) комплекта Windows ADK.  

 -   Дополнительные сведения об этом требовании см. в статье [Требования к инфраструктуре для развертывания операционной системы в System Center Configuration Manager](/sccm/osd/plan-design/infrastructure-requirements-for-operating-system-deployment).  

При управлении развертываниями операционных систем пакет Windows ADK позволяет поставщику SMS выполнять различные задачи, в том числе следующие:  

-   просмотр информации о WIM-файле;  

-   добавление файлов драйверов в существующие образы загрузки;  

-   создание загрузочных ISO-файлов.  


Для пакета Windows ADK на каждом компьютере, где устанавливается поставщик SMS, может потребоваться до 650 МБ свободного места. Столь высокие требования к объему свободного места необходимы Configuration Manager для установки загрузочных образов среды предустановки Windows.  
