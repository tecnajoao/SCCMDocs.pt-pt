---
title: "Установщик исправлений | Документы Майкрософт"
description: "Узнайте, когда и как устанавливать обновления с помощью установщика исправлений для Configuration Manager."
ms.custom: na
ms.date: 10/06/2016
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology: configmgr-other
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: f3058277-c597-4dac-86d1-41b6f7e62b36
caps.latest.revision: "9"
author: Brenduns
ms.author: brenduns
manager: angrobe
ms.openlocfilehash: 8ffc7383e895909e6e6c4b8a7875fd5f0df2220e
ms.sourcegitcommit: 51fc48fb023f1e8d995c6c4eacfda7dbec4d0b2f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2017
---
# <a name="use-the-hotfix-installer-to-install-updates-for-system-center-configuration-manager"></a>Использование установщика исправлений для установки обновлений для System Center Configuration Manager

*Применимо к: System Center Configuration Manager (Current Branch)*

Некоторые обновления для System Center Configuration Manager недоступны в облачной службе Майкрософт и предоставляются только по внештатному каналу. Примером является ограниченный выпуск исправления для устранения конкретной проблемы.   
Когда необходимо установить обновление (или исправление), полученное от корпорации Майкрософт, и его файл имеет расширение **EXE** (а не **UPDATE.EXE**), используйте установщик исправлений, который входит в состав этого загруженного исправления, чтобы установить обновление непосредственно на сервере сайта Configuration Manager.  

 Если у файла исправления есть разрешение **UPDATE.EXE**, см. статью [Импорт исправлений в System Center Configuration Manager с помощью инструмента регистрации обновлений](../../../core/servers/manage/use-the-update-registration-tool-to-import-hotfixes.md).  

> [!NOTE]  
>  В этом разделе приведены общие рекомендации по установке исправлений, которые обновляют System Center Configuration Manager. Дополнительные сведения о конкретных обновлениях содержатся в соответствующих статьях базы знаний (KB) на сайте поддержки Майкрософт.  

##  <a name="bkmk_Overview"></a> Общие сведения об исправлениях для Configuration Manager  
 Исправления для Configuration Manager похожи на исправления для других продуктов Майкрософт, таких как SQL Server. Они содержат одно исправление или пакет (накопительный пакет исправлений) и описываются в соответствующей статье базы знаний Майкрософт.  

 Отдельные обновления содержат одно конкретное обновление для определенной версии Configuration Manager.  
Пакеты обновлений содержат несколько обновлений для определенной версии Configuration Manager.  
Вы не можете устанавливать отдельные обновления из пакета обновлений.  

 Если планируется создание развертываний для установки обновлений на дополнительных компьютерах, необходимо установить пакет обновлений на сервере сайта центра администрирования или на сервере первичного сайта.  

 При запуске пакета обновлений происходит следующее.  

-   Извлекаются файлы обновления для всех применимых компонентов из пакета обновления.  

-   Запускается мастер, который поможет вам настроить обновления и параметры развертывания для них.  

-   После завершения работы мастера на сервер сайта устанавливаются все обновления в пакете, которые относятся к этому серверу сайта.  

Мастер также создает развертывания, которые можно использовать для установки обновлений на дополнительные компьютеры. Развертывание обновлений на дополнительных компьютерах выполняется с помощью поддерживаемого метода развертывания, например пакета развертывания программного обеспечения или Microsoft System Center Updates Publisher 2011.  

 При запуске мастера он создает **CAB** -файл на сервере сайта для использования с Updates Publisher 2011. Дополнительно можно настроить мастер для создания одного или нескольких пакетов для развертывания программного обеспечения. Эти способы развертывания можно использовать для установки обновлений для компонентов, таких как клиенты или консоль Configuration Manager. Обновления также можно устанавливать вручную на компьютеры, где не запущен клиент Configuration Manager.  

 Можно обновлять следующие три группы в Configuration Manager:  

-   Роли сервера Configuration Manager, включая:  

    -   Сайт центра администрирования  

    -   Первичный сайт  

    -   Вторичный сайт  

    -   Удаленный поставщик SMS  

-   Консоль Configuration Manager  

-   Клиент Configuration Manager  

> [!NOTE]  
>  **Обновления для ролей системы сайта** (включая обновления для базы данных сайта и облачных точек распространения) устанавливаются диспетчером компонентов сайта при обновлении серверов сайта и служб.  
>   
>  Однако обновления точек распространения по запросу обслуживаются диспетчером распространения, а не диспетчером компонентов сайта.  

 Каждый пакет обновлений для Configuration Manager является самоизвлекающимся EXE-файлом (SFX), содержащим необходимые файлы для установки обновления для соответствующих компонентов Configuration Manager. Как правило, самораспаковывающийся файл может содержать следующие файлы.  

|Файл|Подробные сведения|  
|----------|-------------|  
|&lt;Версия_продукта\>-QFE-KB&lt;ИД_статьи_базы_знаний\>-&lt;платформа\>-&lt;язык\>.exe|Это файл обновления. Для управления параметрами командной строки этого файла служит средство Updatesetup.exe.<br /><br /> Пример.<br />CM1511RTM-QFE-KB123456-X64-ENU.exe|  
|Updatesetup.exe|Эта оболочка .msi управляет установкой пакета обновления.<br /><br /> При запуске обновления средство Updatesetup.exe определяет язык интерфейса на том компьютере, где запущено это обновление. По умолчанию языком пользовательского интерфейса для обновлений является английский. Однако если язык интерфейса поддерживается, то пользовательский интерфейс отображается на локальном языке компьютера.|  
|License_&lt;язык\>.rtf|Если применимо, то каждое обновление содержит один или несколько файлов лицензии для поддерживаемых языков.|  
|&lt;Продукт_и_тип_обновления>-&lt;версия_продукта\>-&lt;ИД_статьи_базы_знаний\>-&lt;платформа\>.msp|В случае применения обновления для консоли или клиентов Configuration Manager пакет обновления содержит отдельные файлы исправления для установщика Windows (с расширением MSP).<br /><br /> Пример.<br /><br /> **обновление консоли Configuration Manager:** ConfigMgr1511-AdminUI-KB1234567-i386.msp<br /><br /> **Обновление клиента:** ConfigMgr1511-client-KB1234567-i386.msp<br />ConfigMgr1511-client-KB1234567-x64.msp|  

 По умолчанию пакет обновления сохраняет свои журналы в файл с расширением .log на сервере сайта. Имя этого файла журнала совпадает с именем пакета обновлений, а сам файл хранится в папке **%SystemRoot%/Temp** .  

 При запуске пакета обновления он распаковывает файл с аналогичным именем во временную папку на компьютере, а затем запускает программу Updatesetup.exe. Updatesetup.exe запускает обновление программного обеспечения для мастера Configuration Manager &lt;версия_продукта\> &lt;номер_статьи_базы_знаний\>.  

 В соответствии с областью применения обновления этот мастер создает ряд папок в папке установки System Center Configuration Manager на сервере сайта. Структура папок имеет следующий вид:   
 **\\\\&lt;Имя_сервера\>\SMS_&lt;код сайта\>\исправление\\&lt;номер_статьи_базы_знаний\>\\&lt;тип_обновления \>\\&lt;платформа\>**.  

 В следующей таблице содержатся подробные сведения о папках, входящих в эту структуру папок.  

|Имя папки|Дополнительные сведения|  
|-----------------|----------------------|  
|&lt;Имя_сервера\>|Это имя сервера сайта, в котором запускается пакет обновления.|  
|SMS_&lt;код_сайта\>|Это имя общего ресурса для папки установки Configuration Manager.|  
|&lt;Номер_статьи_базы_знаний\>|Это идентификатор статьи базы знаний, которая посвящена данному пакету обновления.|  
|&lt;Тип_обновления\>|Это типы обновлений для Configuration Manager. Мастер создает отдельные папки для каждого из типов обновления, содержащихся в пакете обновления. Имена папок соответствуют типам обновлений. Среди них:<br /><br /> **Сервер**. Содержит обновления для серверов сайта, серверов баз данных сайта и компьютеров, на которых запущен поставщик SMS.<br /><br /> **Клиент**. Содержит обновления для клиента Configuration Manager.<br /><br /> **AdminConsole**. Содержит обновления для консоли Configuration Manager.<br /><br /> Кроме предыдущих типов обновлений, мастер также создает папку с именем **SCUP**. Эта папка не соответствует ни одному из типов обновлений, но содержит CAB-файл для Updates Publisher.|  
|&lt;Платформа\>|Это папка, соответствующая типу платформы. Она содержит файлы обновления для конкретного типа процессора.  К таким папкам относятся:<br /><br />- x64<br /><br /> - I386|  

##  <a name="bkmk_Install"></a> Установка обновлений  
 Чтобы установить обновления, сначала необходимо установить пакет обновлений на сервере сайта. При установке пакета обновлений запускается мастер для его установки. Этот мастер выполняет следующие действия:  

-   извлекает файлы обновления;  

-   помогает настроить развертывания;  

-   устанавливает применимые обновления для серверных компонентов на локальном компьютере.  

После установки пакета обновления на сервере сайта можно перейти к обновлению дополнительных компонентов для Configuration Manager. В следующей таблице описаны действия по обновлению этих различных компонентов.  

|Компонент|Инструкции|  
|---------------|------------------|  
|Сервер сайтов|Разверните обновления на удаленном сервере сайта, если решено не устанавливать пакет обновления прямо на этот удаленный сервер сайта.|  
|База данных сайта|При использовании удаленных серверов сайта выполните развертывание серверных обновлений, содержащих обновление для базы данных сайта, если решено не устанавливать пакет обновления прямо на этот удаленный сервер сайта.|  
|Консоль Configuration Manager|После первоначальной установки консоли Configuration Manager можно установить обновления для консоли Configuration Manager на каждом из компьютеров, где запущена эта консоль. Установочные файлы консоли Configuration Manager невозможно изменить таким образом, чтобы эти обновления применялись в ходе первоначальной установки консоли.|  
|Удаленный поставщик SMS|Установите обновления для каждого экземпляра поставщика SMS, запущенного на всех остальных компьютерах, кроме сервера сайта, где установлен пакет обновления.|  
|Клиенты Configuration Manager|После первоначальной установки клиента Configuration Manager можно установить обновления для клиента Configuration Manager на каждом из компьютеров, где запущен этот клиент.|  

> [!NOTE]  
>  Обновления можно развернуть только на те компьютеры, где запущен клиент Configuration Manager.  

 В случае повторной установки клиента, консоли Configuration Manager или поставщика SMS необходимо также повторно установить обновления для этих компонентов.  

 Воспользуйтесь информацией в следующих разделах, чтобы выполнить установку обновлений для каждого из компонентов Configuration Manager.  

###  <a name="bkmk_servers"></a> Обновление серверов  
 Обновления для серверов могут содержать обновления для **сайтов**, **site database**и компьютеров, на которых запущен экземпляр **поставщика SMS**.  

####  <a name="bkmk_site"></a> Обновление сайта  
 Для обновления сайта Configuration Manager можно установить пакет обновления напрямую с сервера сайта или же развернуть обновления на сервер сайта после установки пакета обновления на другом сайте.  

 При установке обновления на сервер сайта процедура установки обновления управляет дополнительными действиями, необходимыми для применения обновления. Например, к ним относится обновление системных ролей сайта. Единственным исключением является база данных сайта. В следующих разделах содержится информация о процедуре обновления базы данных сайта.  

####  <a name="bkmk_database"></a> Обновление базы данных сайта  
 Чтобы обновить базу данных сайта, процедура установки выполняет запуск файла с именем **update.sql** в базе данных сайта. Процедуру обновления можно настроить для автоматического обновления базы данных сайта, или же вручную обновить базу данных позже.  

 **Автоматическое обновление базы данных сайта**  

 В ходе установки пакета обновления на сервер сайта можно выбрать автоматическое обновление базы данных сайта при установке обновления для сервера. Это решение относится только к тому серверу сайта, где происходит установка обновления, и не относится к тем развертываниям, которые создаются для установки обновлений на удаленных серверах сайтов.  

> [!NOTE]  
>  Если выбрано автоматическое обновление базы данных сайта, эта процедура обновляет базу данных независимо от расположения базы данных (на сервере сайта или на удаленном компьютере).  

> [!IMPORTANT]  
>  Создайте резервную копию базы данных сайта перед обновлением этой базы данных. Удаление обновлений базы данных сайта не допускается. Сведения о создании резервной копии Configuration Manager см. в статье [Резервное копирование и восстановление в System Center Configuration Manager](../../../protect/understand/backup-and-recovery.md).  

 **Обновление базы данных сайта вручную**  

 Если решено не выполнять автоматическое обновление базы данных сайта в ходе установке пакета обновления на сервере сайта, то обновление сервера не изменяет базу данных на сервере сайта в ходе запуска пакета обновления. Однако база данных сайта всегда обновляется теми развертываниями, которые используют пакет, созданный для развертывания программного обеспечения, или тот пакет, который выполняет установку.  

> [!WARNING]  
>  В случае, если пакет обновлений содержит обновления для сервера сайта и базы данных сайта, он не может функционировать до тех пор, пока не завершится установка обновлений на сервер сайта и базу данных сайта. Пока обновления применяются к базе данных сайта, сам сайт находится в неподдерживаемом состоянии.  

 **Обновление базы данных сайта вручную**  

1.  На сервере сайта остановите службу SMS_SITE_COMPONENT_MANAGER, а затем службу SMS_EXECUTIVE.  

2.  Закройте консоль Configuration Manager.  

3.  Запустите сценарий обновления с именем **update.sql** в базе данных этого сайта. Дополнительные сведения о запуске сценария для обновления базы данных сервера SQL Server см. в документации для той версии SQL Server, которая используется в качестве сервера базы данных сайта.  

4.  Перезапустите службы, которые были остановлены на предыдущих этапах.  

5.  В ходе установки пакета обновлений извлекается файл **update.sql** в следующее расположение на сервере сайта: **\\\\&lt;имя_сервера\>\SMS_&lt;код_сайта\>\исправление\\&lt;номер_статьи_базы_знаний\>\update.sql**.  

####  <a name="bkmk_provider"></a> Обновление компьютера, на котором работает поставщик SMS  
 После установки пакета обновлений, который включает в себя обновления поставщика SMS, необходимо развернуть обновление на каждом компьютере, где есть поставщик SMS. Единственное исключение — это экземпляр поставщика SMS, ранее установленный на сервере сайта, где устанавливался пакет обновлений. Локальный экземпляр поставщика SMS на сервере сайта обновляется при установке пакета обновлений.  

 Если удалить и затем переустановить поставщик SMS на компьютере, необходимо переустановить обновление для поставщика SMS на этом компьютере.  

###  <a name="BKMK_clients"></a> Обновление клиентов  
 При установке обновления, которое включает в себя обновления для клиента Configuration Manager, предоставляется возможность автоматически обновить клиенты при установке обновления или позже сделать это вручную. Дополнительные сведения о методе автоматического обновления клиентов см. в разделе [Обновление клиентов для компьютеров Windows](https://technet.microsoft.com/library/mt627885.aspx).  

 Можно развернуть обновления с помощью Updates Publisher или пакета развертывания программного обеспечения, а также вручную установить обновление на каждом клиенте. Дополнительные сведения об использовании развертывания для установки обновлений см. в разделе [Развертывание обновлений для Configuration Manager](#BKMK_Deploy) этой статьи.  

> [!IMPORTANT]  
>  Если при установке обновлений для клиентов пакет обновлений включает обновления для сервера, также следует установить обновления сервера на первичном сайте, в который назначены клиенты.  

Чтобы вручную установить обновление клиента, на каждом клиенте Configuration Manager необходимо запустить **Msiexec.exe** и указать нужный MSP-файл обновления.  

 Например, можно использовать следующую командную строку для обновления клиентов. Эта командная строка запускает MSIEXEC на клиентском компьютере и ссылается на MSP-файл, который извлекается пакетом обновления на сервере сайта: **msiexec.exe /p \\\\&lt;имя_сервера\>\SMS_&lt;код-сайта\>\исправление\\&lt;номер_статьи_базы_знаний\>\клиент\\&lt;платформа\>\\&lt;msp\> /L\*v &lt;файл_журнала\>REINSTALLMODE=mous REINSTALL=ALL**.  

###  <a name="BKMK_console"></a> Обновление консолей Configuration Manager  
 Для обновления консоли Configuration Manager необходимо установить обновление на компьютере, на котором запускается консоль, после завершения установки консоли.  

> [!IMPORTANT]  
>  Если при установке обновлений для консоли Configuration Manager пакет обновлений включает обновления для сервера, также следует установить обновления сервера на сайте, где используется эта консоль Configuration Manager.  

Если на обновляемом компьютере выполняется клиент Configuration Manager:  

-   для установки обновления можно использовать развертывание. Дополнительные сведения об использовании развертывания для установки обновлений см. в разделе [Развертывание обновлений для Configuration Manager](#BKMK_Deploy) этой статьи.  

-   Если вы напрямую вошли на клиентский компьютер, то можете выполнить интерактивную установку.  

-   Можно также вручную установить обновление на каждом компьютере. Чтобы вручную установить обновление консоли Configuration Manager, на каждом компьютере, на котором выполняется консоль Configuration Manager, можно запустить Msiexec.exe и указать MSP-файл обновления консоли Configuration Manager.  

Например, можно использовать следующую командную строку для обновления консоли Configuration Manager. Эта командная строка запускает MSIEXEC на компьютере и ссылается на MSP-файл, который извлекается пакетом обновления на сервере сайта: **msiexec.exe /p \\\\&lt;имя_сервера\>\SMS_&lt;код-сайта\>\исправление\\&lt;номер_статьи_базы_знаний\>\AdminConsole\\&lt;платформа\>\\&lt;msp\> /L\*v &lt;файл_журнала\>REINSTALLMODE=mous REINSTALL=ALL**.  

##  <a name="BKMK_Deploy"></a> Развертывание обновлений для Configuration Manager  
 После установки пакета обновлений на сервере сайта вы можете развернуть эти обновления на дополнительных компьютерах, воспользовавшись одним из трех следующих способов.  

###  <a name="BKMK_DeploySCUP"></a> Использование Updates Publisher 2011 для установки обновлений  
 При установке пакета обновлений на сервере сайта мастер установки создает файл каталога для Updates Publisher, который можно использовать для развертывания обновлений на подходящих компьютерах. Мастер всегда создает этот каталог, даже если установлен параметр **Использовать пакет и программу для развертывания этого обновления**.  

 Каталог для Updates Publisher называется **SCUPCatalog.cab**. Его можно найти в следующей папке на компьютере, на котором выполняется пакет обновлений: **\\\\&lt;имя_сервера\>\SMS_&lt;код_сайта\>\исправление\\\&lt;номер_статьи_базы_знаний\>\SCUP\SCUPCatalog.cab**.  

> [!IMPORTANT]  
>  Поскольку SCUPCatalog.cab создается с использованием путей, относящихся к серверу сайта, на котором устанавливается пакет обновлений, его нельзя использовать для других серверов сайта.  

 После завершения работы мастера можно импортировать каталог в Updates Publisher, а затем использовать обновления программного обеспечения Configuration Manager для развертывания обновлений. Сведения об Updates Publisher см. в разделе [Updates Publisher 2011](http://go.microsoft.com/fwlink/p/?LinkID=83449) в библиотеке TechNet для System Center 2012.  

 Используйте следующую процедуру для импорта файла SCUPCatalog.cab в Updates Publisher и публикации обновлений.  

##### <a name="to-import-the-updates-to-updates-publisher-2011"></a>Импорт обновлений в Updates Publisher 2011  

1.  Запустите консоль Updates Publisher и щелкните **Импортировать**.  

2.  На странице **Тип импорта** мастера импорта каталога обновлений выберите **Указать путь к каталогу для импорта**, а затем укажите файл SCUPCatalog.cab.  

3.  Щелкните **Далее**, а затем снова кнопку **Далее** .  

4.  В диалоговом окне **Предупреждение безопасности — проверка каталога** нажмите кнопку **Принять**. Закройте мастер после его завершения.  

5.  В консоли Updates Publisher выберите обновление, которое требуется развернуть, и щелкните **Опубликовать**.  

6.  На странице **Параметры публикации** мастера публикации обновлений выберите **Все содержимое**, а затем нажмите **Далее**.  

7.  Следуйте указаниям мастера для публикации обновлений.  

###  <a name="BKMK_DeploySWDist"></a> Использование развертывания программного обеспечения для установки обновлений  
 При установке пакета обновлений на сервере первичного сайта или сайта центра администрирования можно настроить мастер установки для создания пакетов обновлений для развертывания программного обеспечения. Затем можно развернуть каждый пакет в коллекции компьютеров, которую вы хотите обновить.  

 Для создание пакета развертывания на странице **Настройка развертывания обновления программного обеспечения** в мастере установите флажок для каждого типа пакета обновления, который вы хотите обновить. Доступные типы: серверы, консоли и клиенты Configuration Manager. Отдельный пакет создается для каждого выбранного типа обновления.  

> [!NOTE]  
>  Пакет для серверов содержит обновления для следующих компонентов:  
>   
>  -   Сервер сайтов  
>  -   поставщика SMS  
>  -   База данных сайта  

 Далее на странице **Настройка метода развертывания обновления программного обеспечения** выберите параметр **Использовать распространение программного обеспечения**. При этом мастер создает пакеты развертывания программного обеспечения.  

 После завершения работы мастера вы можете увидеть созданные им пакеты в консоли Configuration Manager в узле **Пакеты** области **Библиотека программного обеспечения**. Затем можно использовать стандартный процесс развертывания пакетов программного обеспечения на клиентах Configuration Manager. Когда пакет выполняется на клиенте, он устанавливает все подходящие компоненты Configuration Manager на клиентском компьютере.  

 Сведения о развертывании пакетов на клиентах Configuration Manager см. в статье [Пакеты и программы в System Center Configuration Manager](../../../apps/deploy-use/packages-and-programs.md).  

###  <a name="BKMK_DeployCollections"></a> Создание коллекций для развертывания обновлений в Configuration Manager  
 Отдельные обновления можно развертывать на соответствующих клиентах. Следующая информация поможет создать коллекции устройств для различных компонентов Configuration Manager.  

|Компонент Configuration Manager|Инструкции|  
|----------------------------------------|------------------|  
|Сервер сайта центра администрирования|Создайте прямой запрос участия и добавьте сервер сайт центра администрирования.|  
|Все серверы первичного сайта|Создайте прямой запрос участия и добавьте каждый сервер первичного сайта.|  
|Все серверы вторичных сайтов|Создайте прямой запрос участия и добавьте каждый сервер вторичного сайта.|  
|Все клиенты x86|Создайте коллекцию, включающую следующие условия запроса:<br /><br /> **Select \* from SMS_R_System inner join SMS_G_System_SYSTEM on SMS_G_System_SYSTEM.ResourceID = SMS_R_System.ResourceId where SMS_G_System_SYSTEM.SystemType = "X86-based PC"**|  
|Все клиенты x64|Создайте коллекцию, включающую следующие условия запроса:<br /><br /> **Select \* from SMS_R_System inner join SMS_G_System_SYSTEM on SMS_G_System_SYSTEM.ResourceID = SMS_R_System.ResourceId where SMS_G_System_SYSTEM.SystemType = "X64-based PC"**|  
|Все компьютеры, на которых запущена консоль Configuration Manager|Создайте прямой запрос участия и добавьте каждый компьютер.|  
|Удаленные компьютеры с экземплярами поставщика SMS|Создайте прямой запрос участия и добавьте каждый компьютер.|  

> [!NOTE]  
>  Для обновления базы данных сайта разверните обновление на сервере этого сайта.  

 Сведения о создании коллекций см. в статье [Создание коллекций в System Center Configuration Manager](../../../core/clients/manage/collections/create-collections.md).  
