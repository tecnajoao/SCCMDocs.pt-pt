---
title: "Средство сброса обновлений | Документация Майкрософт"
description: "Использование средства сброса обновлений для обновлений в консоли для System Center Configuration Manager."
ms.custom: na
ms.date: 7/31/2017
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology: configmgr-other
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 25fa89d6-7e47-45a6-8f4e-70b77560fba6
caps.latest.revision: "0"
caps.handback.revision: "0"
author: Brenduns
ms.author: brenduns
manager: angrobe
ms.openlocfilehash: 1960f86e98a957559f379b9eeb6d293f7e4182e5
ms.sourcegitcommit: 51fc48fb023f1e8d995c6c4eacfda7dbec4d0b2f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2017
---
# <a name="update-reset-tool"></a>Средство сброса обновлений

*Применимо к: System Center Configuration Manager (Current Branch)*  


Начиная с версии 1706 основные сайты Configuration Manager и сайты центра администрирования включают средство сброса обновлений **CMUpdateReset.exe** для Configuration Manager. Используйте это средство для устранения проблем со скачиванием или репликацией обновлений в консоли. Средство находится в папке ***\cd.latest\SMSSETUP\TOOLS*** на сервере сайта.

Это средство можно использовать с любой версией Current Branch, для которой сохраняется поддержка.

Используйте это средство, когда [обновление в консоли](/sccm/core/servers/manage/install-in-console-updates) еще не установлено и находится в неисправном состоянии. Состояние считается неисправным, если скачивание обновлений продолжается, но не может завершиться в течение долгого времени. Длительным следует считать период, на несколько часов превышающий обычное время для пакетов обновления сопоставимого размера. Также сюда относится сбой репликации обновлений на дочерние первичные сайты.  

Средство выполняется для того обновления, которое вы укажете при запуске. По умолчанию средство не удаляет успешно установленные или загруженные обновления.  

### <a name="prerequisites"></a>Предварительные требования
Учетная запись для запуска средства должна иметь следующие разрешения:
-   Разрешения на **чтение** и **запись** для баз данных сайта, размещенных на сайте центра администрирования и на каждом первичном сайте в используемой иерархии. Чтобы установить эти разрешения, учетной записи пользователя можно назначить [предопределенные роли базы данных](/sql/relational-databases/security/authentication-access/database-level-roles#fixed-database-roles) **db_datawriter** и **db_datareader** для базы данных Configuration Manager каждого сайта. Средство не будет взаимодействовать со вторичными сайтами.
-   **Локальный администратор** на сайте верхнего уровня в иерархии.
-   **Локальный администратор** на компьютере, где размещается точка подключения службы.

Вам нужно знать глобальный уникальный идентификатор (GUID) пакета обновления, который вы хотите сбросить. Чтобы получить GUID, выполните следующие действия.
  1.   В консоли перейдите к узлу **Администрирования** > **Обновления и обслуживание**.
  2.   В панели отображения щелкните правой кнопкой мыши заголовок любого столбца (например, **Состояние**) и выберите пункт **Идентификатор пакета**, чтобы добавить на панель этот столбец.
  3.   Появится столбец, отображающий идентификаторы GUID для пакетов обновления.

> [!TIP]  
> Чтобы скопировать значение GUID, выберите строку нужного пакета обновления и скопируйте ее в буфер обмена с помощью клавиш CTRL+C. Теперь эту строку можно вставить в любой текстовый редактор, а затем скопировать из полученных данных код GUID и вставить его в качестве параметра в командную строку для запуска средства.

### <a name="run-the-tool"></a>Запуск программы    
Средство необходимо запускать на сайте верхнего уровня иерархии.

При запуске средства можно использовать параметры командной строки, чтобы указать следующие сведения.
  -   SQL Server на сайте верхнего уровня иерархии.
  -   Имя базы данных сайта на сайте верхнего уровня.
  -   Глобальный уникальный идентификатор (GUID) пакета обновления, который вы хотите сбросить.

Исходя из состояния обновлений, средство определит дополнительные серверы, к которым требуется доступ.   

Если пакет обновления находится в состоянии *после загрузки*, средство не очищает такой пакет. В этом случае можно принудительно удалить успешно скачанное обновление, используя параметр force delete (параметры командной строки описаны далее в этой статье).

После запуска средства выполните следующие действия.
-   Если пакет был удален, перезапустите службу SMS_Executive на сайте верхнего уровня. Затем проверьте наличие обновлений, чтобы заново скачать пакет.
-   Если пакет не был удален, не нужно предпринимать никаких действий. Обновление повторно инициализирует и перезапускает процесс репликации или установки.

**Параметры командной строки.**  

| Параметр        |Описание                 |  
|------------------|----------------------------|  
|**-S &lt;полное доменное имя сервера SQL Server для сайта верхнего уровня>** | *Обязательное* <br> Содержит полное доменное имя сервера SQL Server, на котором размещена база данных сайта для сайта верхнего уровня иерархии.    |  
| **-D &lt;имя базы данных >**                        | *Обязательное* <br> Содержит имя базы данных на сайте верхнего уровня.  |  
| **-P &lt;идентификатор GUID пакета >**                         | *Обязательное* <br> Содержит идентификатор GUID для пакета обновления, который необходимо сбросить.   |  
| **-I &lt;имя экземпляра SQL Server>**             | *Необязательный* <br> Обозначает экземпляр SQL Server, на котором размещается база данных сайта. |
| **-FDELETE**                              | *Необязательный* <br> Режим принудительного удаления для пакета обновления, который был успешно скачан. |  
 **Примеры:**  
 Чаще всего требуется сбросить обновление, для которого возникли проблемы с загрузкой. Допустим, что полное доменное имя SQL Server — *server1.fabrikam.com*, база данных сайта — *CM_XYZ*, а GUID пакета — *61F16B3C-F1F6-4F9F-8647-2A524B0C802C*.  Тогда вам нужно выполнить такую команду: ***CMUpdateReset.exe -S server1.fabrikam.com -D CM_XYZ -P 61F16B3C-F1F6-4F9F-8647-2A524B0C802C***

 В более серьезных случаях вы можете принудительно удалить проблемный пакет обновления. Допустим, что полное доменное имя SQL Server — *server1.fabrikam.com*, база данных сайта — *CM_XYZ*, а GUID пакета — *61F16B3C-F1F6-4F9F-8647-2A524B0C802C*.  Тогда вам нужно выполнить такую команду: ***CMUpdateReset.exe  -FDELETE -S server1.fabrikam.com -D CM_XYZ -P 61F16B3C-F1F6-4F9F-8647-2A524B0C802C***
