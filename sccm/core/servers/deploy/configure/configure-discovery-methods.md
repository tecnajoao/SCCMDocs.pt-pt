---
title: "Настройка обнаружения | Документы Майкрософт"
description: "Настройка методов обнаружения для выполнения на сайте Configuration Manager с целью поиска ресурсов, которыми можно управлять из сетевой инфраструктуры и Active Directory."
ms.custom: na
ms.date: 7/31/2017
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology: configmgr-other
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 49505eb1-d44d-4121-8712-e0f3d8b15bf5
caps.latest.revision: "5"
author: Brenduns
ms.author: brenduns
manager: angrobe
ms.openlocfilehash: 34a539ceaea6b070f81a28d2c0a9ce388e26cfeb
ms.sourcegitcommit: 51fc48fb023f1e8d995c6c4eacfda7dbec4d0b2f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2017
---
# <a name="configure-discovery-methods-for-system-center-configuration-manager"></a>Настройка методов обнаружения для System Center Configuration Manager

*Применимо к: System Center Configuration Manager (Current Branch)*


Методы обнаружения, настраиваемые для выполнения на сайте System Center Configuration Manager, позволяют выполнять поиск ресурсов, которыми можно управлять из сетевой инфраструктуры и Active Directory. Для этого необходимо включить и затем настроить каждый метод, используемый для поиска в среде. (Процесс включения и отключения метода аналогичен.)  Единственное исключение — методы Heartbeat-обнаружения и обнаружения сервера.  

-   По умолчанию Heartbeat-обнаружение уже включено при установке первичного сайта Configuration Manager и настроено для выполнения по базовому расписанию. Метод Heartbeat-обнаружения должен быть постоянно включен, так как он обеспечивает актуальность записей данных обнаружения (DDR) для устройств. Дополнительные сведения о Heartbeat-обнаружении см. в [этом разделе](../../../../core/servers/deploy/configure/about-discovery-methods.md#bkmk_aboutHeartbeat).  

-   Обнаружение сервера — это метод автоматического обнаружения, который находит компьютеры, используемые как системы сайта. Вы не можете настроить или отключить этот метод.  

**Включение настраиваемого метода обнаружения**  
 > [!NOTE]  
 > Следующие сведения не применяются к обнаружению пользователей Active Directory Azure. См. раздел о [настройке обнаружения пользователя Azure AD](#azureaadisc) далее в этой статье.

1.  В консоли Configuration Manager выберите **Администрирование** > **Конфигурация иерархии**, а затем щелкните **Методы обнаружения**.  

2.  Выберите метод обнаружения для сайта, на котором нужно включить обнаружение.  

3.  На вкладке **Главная** в группе **Свойства** нажмите кнопку **Свойства**, а затем на вкладке **Общие** установите флажок **Enable&lt;discovery method\>** (Включить <метод_обнаружения>).  

     Чтобы отключить метод обнаружения, снимите этот флажок.  

4.  Нажмите кнопку **ОК**, чтобы сохранить настройки.  


##  <a name="BKMK_ConfigADForestDisc"></a> Настройка обнаружения в лесах Active Directory  
Чтобы завершить настройку метода обнаружения в лесах Active Directory, необходимо настроить параметры в следующих двух расположениях:  

-   В узле **Методы обнаружения** можно сделать следующее:

    - включить этот метод обнаружения;
    - задать расписание опроса;
    - выбрать, будут ли в процессе обнаружения автоматически создаваться границы для найденных сайтов и подсетей Active Directory;  

-   В узле **Леса Active Directory** можно сделать следующее:

    - добавить леса, которые требуется найти;
    - включить обнаружение сайтов и подсетей Active Directory в этом лесу;
    - настроить параметры, позволяющие сайтам Configuration Manager публиковать данные сайта в лесу;
    - назначить каждому лесу учетную запись, используемую в качестве учетной записи леса Active Directory.  

Используйте приведенные ниже действия, чтобы включить обнаружение в лесах Active Directory и настроить отдельные леса, используемые с этим методом.  

#### <a name="to-enable-active-directory-forest-discovery"></a>Включение обнаружения в лесах Active Directory  

1.  В консоли Configuration Manager выберите **Администрирование** > **Конфигурация иерархии**, а затем щелкните **Методы обнаружения**.  

2.  Выберите метод "Обнаружение в лесах Active Directory" для сайта, на котором нужно настроить обнаружение.  

3.  На вкладке **Главная** в группе **Свойства** нажмите кнопку **Свойства**.  

4.  На вкладке **Общие** установите флажок, чтобы включить обнаружение. Или настройте обнаружение сейчас, а включите позже.  

5.  Укажите параметры для границ сайта для обнаруженных расположений.  

6.  Задайте расписание выполнения обнаружения.  

7.  Завершив настройку метода обнаружения в лесах Active Directory для этого сайта, нажмите кнопку **ОК**, чтобы сохранить параметры.  

#### <a name="to-configure-a-forest-for-active-directory-forest-discovery"></a>Настройка леса для метода обнаружения в лесах Active Directory  

1.  В рабочей области **Администрирование** выберите **Леса Active Directory**. Если метод обнаружения в лесах Active Directory был запущен ранее, все обнаруженные леса будут отображены в области результатов. При выполнении метода обнаружения в лесах Active Directory происходит поиск локального леса и доверенных лесов. Вручную необходимо добавить только леса, не имеющие доверия.  

    -   Чтобы настроить ранее обнаруженный лес, выберите его в области результатов. Затем на вкладке **Главная** в группе **Свойства** выберите **Свойства**, чтобы открыть окно свойств леса. Перейдите к шагу 3.  

    -   Чтобы настроить новый лес, отсутствующий в списке, на вкладке **Главная** в группе **Создать** выберите **Добавить лес**, чтобы открыть диалоговое окно**Add Forests** (Добавление лесов). Перейдите к шагу 3.  

2.  На вкладке **Общие** завершите настройку леса, который необходимо обнаружить, и укажите **учетную запись леса Active Directory**.  

    > [!NOTE]  
    >  Для обнаружения и публикации в лесах, не имеющих доверия, методу обнаружения в лесах Active Directory требуется глобальная учетная запись. Если учетная запись компьютера сервера сайта не используется, можно выбрать только глобальную учетную запись.  

3.  Если вы планируете разрешить сайтам публиковать данные сайта в этом лесу, откройте вкладку **Публикация** и завершите настройку публикации в этом лесу.  

    > [!NOTE]  
    >  При включении публикации данных сайта в лесу необходимо расширить схему Active Directory этого леса для Configuration Manager. Учетная запись леса Active Directory должна иметь разрешения на полный доступ к контейнеру System в этом лесу.  

4.  Завершив настройку леса для использования с методом обнаружения в лесах Active Directory, нажмите кнопку **ОК**, чтобы сохранить изменения.  

##  <a name="BKMK_ConfigADDiscGeneral"></a> Настройка обнаружения компьютеров, пользователей и групп Active Directory  
 Следующие разделы содержат сведения о настройке обнаружения компьютеров, пользователей или групп с помощью одного из следующих методов обнаружения:  

-   Обнаружение групп Active Directory  

-   Обнаружение систем Active Directory  

-   обнаружение пользователей Active Directory  

> [!NOTE]  
>  Сведения в этом разделе не применяются к методу обнаружения в лесах Active Directory.  

 Хотя все эти методы обнаружения не зависят друг от друга, у них есть общие параметры. Дополнительные сведения об этих параметрах конфигурации см. в статье [Общие параметры для обнаружения группы, системы и пользователя](../../../../core/servers/deploy/configure/about-discovery-methods.md#bkmk_shared).  

> [!WARNING]  
>  Опрос каждого из этих методов обнаружения Active Directory может существенно увеличить нагрузку на сеть. Поэтому выполнение каждого метода обнаружения рекомендуется запланировать на такие периоды, когда этот сетевой трафик не сможет оказать негативное влияние на использование сети.  

#### <a name="to-configure-active-directory-group-discovery"></a>Настройка обнаружения групп Active Directory  

1.  В консоли Configuration Manager выберите **Администрирование** > **Конфигурация иерархии**, а затем щелкните **Методы обнаружения**.  

2.  Выберите метод **Обнаружение групп Active Directory** для сайта, на котором нужно настроить обнаружение.  

3.  На вкладке **Главная** в группе **Свойства** нажмите кнопку **Свойства**.  

4.  На вкладке **Общие** установите флажок, чтобы включить обнаружение. Или настройте обнаружение сейчас, а включите позже.  

5.  Нажмите кнопку **Добавить**, чтобы настроить область обнаружения. Выберите параметр **Группы** или **Расположение** и выполните необходимые настройки в диалоговом окне **Добавление групп** или **Добавить расположение Active Directory** соответственно.  

    1.  Укажите **Имя** для этой области обнаружения.  

    2.  Укажите **Домен Active Directory** или **Расположение** для поиска.  

        -   Если выбран параметр **Группы**, укажите одну или несколько групп Active Directory, которые требуется обнаружить,  

        -   а если выбран параметр **Расположение**, в качестве расположения для поиска укажите контейнер Active Directory. Для этого расположения можно также включить рекурсивный поиск дочерних контейнеров Active Directory.  

    3.  Укажите **учетную запись обнаружения групп Active Directory** , которая будет использоваться для поиска в этой области обнаружения.  

    4.  Нажмите кнопку **ОК**, чтобы сохранить параметры области обнаружения.  

6.  Повторите шаг 6 для каждой дополнительной области обнаружения, которую требуется определить.  

7.  На вкладке **Расписание опроса** настройте расписание опроса полного обнаружения и обнаружения изменений.  

8.  Кроме того, на вкладке **Параметр** можно настроить параметры фильтрации или удаления устаревших записей компьютеров из обнаружения, а также параметр поиска членства в группах распространения.  

    > [!NOTE]  
    >  По умолчанию метод обнаружения групп Active Directory находит только членство в группах безопасности.  

9. Завершив настройку метода обнаружения групп Active Directory для этого сайта, нажмите кнопку **ОК**, чтобы сохранить параметры.  

#### <a name="to-configure-active-directory-system-discovery"></a>Настройка обнаружения систем Active Directory  

1.  В консоли Configuration Manager выберите **Администрирование** > **Конфигурация иерархии**, а затем щелкните **Методы обнаружения**.  

2.  Выберите метод обнаружения для сайта, на котором нужно настроить обнаружение.  

3.  На вкладке **Главная** в группе **Свойства** нажмите кнопку **Свойства**.  

4.  На вкладке **Общие** установите флажок, чтобы включить обнаружение. Или настройте обнаружение сейчас, а включите позже.  

5.  Щелкните значок **Создать** ![значок "Создать"](media/Disc_new_Icon.gif), чтобы указать новый контейнер Active Directory. В диалоговом окне **Контейнер Active Directory** выполните следующие настройки:  

    1.  Укажите одно или несколько расположений для поиска.  

    2.  Для каждого расположения укажите параметры, изменяющие способ поиска.  

    3.  Для каждого расположения укажите учетную запись, которая будет использоваться в качестве **учетной записи обнаружения Active Directory**.  

        > [!TIP]  
        >  Для каждого заданного расположения можно настроить ряд параметров обнаружения и уникальную учетную запись обнаружения Active Directory.  

    4.  Нажмите кнопку **ОК**, чтобы сохранить конфигурацию контейнера Active Directory.  

6.  На вкладке **Расписание опроса** настройте расписание опроса полного обнаружения и обнаружения изменений.  

7.  Кроме того, на вкладке **Атрибуты Active Directory** можно настроить дополнительные атрибуты для компьютеров, которые нужно найти. Там также указаны атрибуты объекта по умолчанию.  

8.  При необходимости на вкладке **Параметр** можно настроить параметры фильтрации или удаления устаревших записей компьютеров из обнаружения.  

9. Завершив настройку метода обнаружения систем Active Directory для этого сайта, нажмите кнопку **ОК**, чтобы сохранить параметры.  

#### <a name="to-configure-active-directory-user-discovery"></a>Настройка обнаружения пользователей Active Directory  

1.  В консоли Configuration Manager выберите **Администрирование** > **Конфигурация иерархии**, а затем щелкните **Методы обнаружения**.  

2.  Выберите метод **Обнаружение пользователей Active Directory** для сайта, на котором нужно настроить обнаружение.  

3.  На вкладке **Главная** в группе **Свойства** нажмите кнопку **Свойства**.  

4.  На вкладке **Общие** установите флажок, чтобы включить обнаружение. Или настройте обнаружение сейчас, а включите позже.  

5.  Щелкните значок **Создать** ![значок "Создать"](media/Disc_new_Icon.gif), чтобы указать новый контейнер Active Directory. В диалоговом окне **Контейнер Active Directory** выполните следующие настройки:  

    1.  Укажите одно или несколько расположений для поиска.  

    2.  Для каждого расположения укажите параметры, изменяющие способ поиска.  

    3.  Для каждого расположения укажите учетную запись, которая будет использоваться в качестве **учетной записи обнаружения Active Directory**.  

        > [!NOTE]  
        >  Для каждого заданного расположения можно настроить уникальный ряд параметров обнаружения и уникальную учетную запись обнаружения Active Directory.  

    4.  Нажмите кнопку **ОК**, чтобы сохранить конфигурацию контейнера Active Directory.  

6.  На вкладке **Расписание опроса** настройте расписание опроса полного обнаружения и обнаружения изменений.  

7.  Кроме того, на вкладке **Атрибуты Active Directory** можно настроить дополнительные атрибуты для компьютеров, которые нужно найти. Там также указаны атрибуты объекта по умолчанию.  

8.  Завершив настройку метода обнаружения пользователей Active Directory для этого сайта, нажмите кнопку **ОК**, чтобы сохранить параметры.  

## <a name="azureaadisc"></a> Настройка обнаружения пользователей Azure AD
Начиная с версии 1706 можно настроить обнаружение пользователей Active Directory Azure при подключении Configuration Manager к [подписке Azure и Azure Active Directory](/sccm/core/servers/deploy/configure/azure-services-wizard).

Обнаружение пользователей Azure AD настраивается в рамках *управления облачными клиентами*. Соответствующая процедура подробно описана в разделе [Create the Azure web app for use with Configuration Manager](/sccm/core/servers/deploy/configure/Azure-services-wizard#webapp) (Создание веб-приложения Azure для использования с Configuration Manager) статьи *Configure Azure services for use with Configuration Manager* (Настройка служб Azure для использования с Configuration Manager).




##  <a name="BKMK_ConfigHBDisc"></a> Настройка Heartbeat-обнаружения  
 По умолчанию Heartbeat-обнаружение включается во время установки первичного сайта Configuration Manager. Поэтому необходимо настроить только периодичность отправки данных записей Heartbeat-обнаружения клиентами в точку управления, если вы не хотите использовать значение по умолчанию "Каждые 7 дней".  

> [!NOTE]  
>  Если на одном сайте наряду с принудительной установкой клиента включена задача обслуживания **Сбросить флаг установки** , настройте для расписания Heartbeat-обнаружения значение, которое меньше значения параметра **Период повторного обнаружения клиента** задачи обслуживания **Сбросить флаг установки** . Дополнительные сведения о задачах обслуживания сайта см. в статье [Задачи обслуживания в System Center Configuration Manager](../../../../core/servers/manage/maintenance-tasks.md).  

#### <a name="to-configure-the-heartbeat-discovery-schedule"></a>Настройка расписания Heartbeat-обнаружения  

1.  В консоли Configuration Manager выберите **Администрирование** > **Конфигурация иерархии**, а затем щелкните **Методы обнаружения**.  

2.  Выберите метод **Heartbeat-обнаружение** для сайта, на котором нужно настроить Heartbeat-обнаружение.  

3.  На вкладке **Главная** в группе **Свойства** нажмите кнопку **Свойства**.  

4.  Настройте периодичность отправки записей данных Heartbeat-обнаружения клиентами, а затем нажмите кнопку **ОК**, чтобы сохранить параметры.  

##  <a name="BKMK_ConfigNetworkDisc"></a> Настройка обнаружения сетевых ресурсов  
 Следующие разделы содержат сведения о настройке обнаружения сетевых ресурсов.  

###  <a name="BKMK_AboutConfigNetworkDisc"></a> О настройке обнаружения сетевых ресурсов  
 Прежде чем настроить обнаружение сетевых ресурсов, необходимо понять следующие моменты.  

-   Доступные уровни обнаружения сетевых ресурсов  

-   Доступные параметры обнаружения сетевых ресурсов  

-   Ограничение обнаружения сетевых ресурсов в сети  

Дополнительные сведения см. в разделе [Обнаружение сети](../../../../core/servers/deploy/configure/about-discovery-methods.md#bkmk_aboutNetwork).  

 Следующие разделы содержат сведения об общих конфигурациях обнаружения сетевых ресурсов. Можно настроить одну или несколько конфигураций, которые будут использоваться во время выполнения одного и того же процесса обнаружения. При работе с несколькими конфигурациями необходимо учесть взаимодействия, которые могут повлиять на результаты обнаружения.  

 Например, может потребоваться обнаружить все устройства SNMP, использующие конкретное имя сообщества SNMP. В одном и том же процессе обнаружения можно отключить выполнение обнаружения в определенной подсети. Таким образом, запущенный метод обнаружения сетевых ресурсов не будет искать устройства SNMP с указанными именем сообщества в отключенной подсети.  

####  <a name="BKMK_DetermineNetTopology"></a> Определение топологии сети  
 Для сопоставления сети можно использовать обнаружение только топологии. В этом случае поиск потенциальных клиентов не выполняется. Для реализации метода обнаружения сетевых ресурсов с поиском только топологии используется протокол SNMP.  

 При сопоставлении топологии сети необходимо задать параметр **Maximum hops** (Максимальное число прыжков) на вкладке **SNMP** диалогового окна **Network Discovery Properties** (Свойства обнаружения сети). Если указать небольшое максимальное число прыжков, это поможет ограничить использование пропускной способности сети в процессе обнаружения. По мере дальнейшего обнаружения сетевых ресурсов можно увеличить число прыжков, чтобы получить лучшее представление о топологии сети.  

 После того, как топология сети будет выяснена, можно настроить дополнительные параметры обнаружения сетевых ресурсов для поиска потенциальных клиентов и их операционных систем, причем такой поиск будет ограничен уже указанными сегментами сети.  

####  <a name="BKMK_LimitBySubnet"></a> Ограничение поиска заданными подсетями  
 Обнаружение сетевых ресурсов можно настроить для поиска в конкретных подсетях. По умолчанию при обнаружении сетевых ресурсов поиск производится в подсети сервера, выполняющего обнаружение. Все другие настроенные и включенные подсети применяются только в вариантах поиска с использованием протоколов SNMP и DHCP. При обнаружении сетевых ресурсов в доменах ограничения по подсетям не действуют.  

 Если задать одну или несколько подсетей на вкладке **Подсети** диалогового окна **Свойства обнаружения сети** , поиск будет вестись только в тех подсетях, для которых установлен флажок **Включено** .  

 Если отключить какую-то подсеть, в ней не будет производиться обнаружение, причем:  

-   SNMP-запросы не будут выполняться в этой подсети;  

-   DHCP-серверы не будут в ответ на запрос возвращать список ресурсов, расположенных в этой подсети;  

-   с помощью запросов к доменам можно будет обнаруживать ресурсы, расположенные в данной подсети.  

####  <a name="BKMK_SearchByDomain"></a> Поиск в определенном домене  
 Обнаружение сетевых ресурсов можно настроить для поиска в определенном домене или множестве доменов. По умолчанию при обнаружении сетевых ресурсов поиск производится в локальном домене сервера, выполняющего обнаружение.  

 Если задать один или несколько доменов на вкладке **Домены** диалогового окна **Свойства обнаружения сети** , поиск будет вестись только в тех доменах, для которых установлен флажок **Включено** .  

 Если отключить домен, в нем не будет производиться обнаружение, причем:  

-   при обнаружении сетевых ресурсов не будут делаться запросы к контроллерам этого домена;  

-   SNMP-запросы по-прежнему будут выполняться в подсетях этого домена;  

-   DHCP-серверы по-прежнему будут возвращать список ресурсов, расположенных в этом домене.  

####  <a name="BKMK_LimitBySNMPname"></a> Ограничение поиска с помощью имен SNMP-сообществ  
 Обнаружение сетевых ресурсов можно настроить для поиска в определенном SNMP-сообществе или наборе таких сообществ. Для использования по умолчанию задано имя сообщества **public** .  

 При обнаружении сетевых ресурсов имена сообществ используются для получения доступа к маршрутизаторам, которые являются SNMP-устройствами. Маршрутизатор может возвращать в процессе обнаружения сетевых ресурсов информацию о других маршрутизаторах и подсетях, связанных с ним.  

> [!NOTE]  
>  Имена SNMP-сообществ напоминают пароли. При обнаружении сетевых ресурсов получать информацию можно только от тех SNMP-устройств, для которых указано имя сообщества. У каждого SNMP-устройства может быть собственное имя сообщества, но зачастую для нескольких устройств используется общее имя сообщества. Кроме того, большинству SNMP-устройств по умолчанию присвоено имя сообщества **public**. Но некоторые организации удаляют на своих устройствах имя сообщества **public** из соображений безопасности.  

 Если на вкладке **SNMP** диалогового окна **Network Discovery Properties** (Свойства обнаружения сети) отображается несколько SNMP-сообществ, поиск в них при обнаружении сетевых ресурсов будет производиться в том порядке, в котором они перечислены. Чтобы свести к минимуму сетевой трафик при попытках обратиться к устройству по различным именам, переместите наиболее часто используемые имена в начало списка.  

> [!NOTE]  
>  Кроме имени SNMP-сообщества вы можете указать IP-адрес или разрешаемое имя конкретного SNMP-устройства. Это можно сделать на вкладке **SNMP-устройства** диалогового окна **Network Discovery Properties** (Свойства обнаружения сети).  

####  <a name="BKMK_SearchByDHCP"></a> Поиск конкретного DHCP-сервера  
 Обнаружение сетевых ресурсов можно настроить для поиска DHCP-клиентов с использованием определенного DHCP-сервера или нескольких серверов.  

 Поиск будет вестись на каждом DHCP-сервере, указанном на вкладке **DHCP** диалогового окна **Свойства обнаружения сети** . Если сервер, выполняющий обнаружение, получает свой IP-адрес от DHCP-сервера, вы можете настроить обнаружение для использования данного DHCP-сервера, установив флажок **Добавить DHCP-сервер, на использование которого настроен сервер сайта**.  

> [!NOTE]  
>  Чтобы успешно настроить обнаружение сетевых ресурсов для использования DHCP-сервера, среда должна поддерживать протокол IPv4. Обнаружение сетевых ресурсов не может быть настроено для использования DHCP-сервера в среде на базе протокола IPv6.  

###  <a name="BKMK_HowToConfigNetDisc"></a> Настройка обнаружения сетевых ресурсов  
 Следуйте описанным ниже процедурам, в соответствии с которыми сначала определяется только топология сети, а затем настраивается обнаружение сетевых ресурсов для поиска потенциальных клиентов с использованием одного или нескольких предусмотренных вариантов.  

##### <a name="to-determine-your-network-topology"></a>Определение топологии сети  

1.  В консоли Configuration Manager выберите **Администрирование** > **Конфигурация иерархии**, а затем щелкните **Методы обнаружения**.  

2.  Выберите метод **Обнаружение сетевых ресурсов** для сайта, на котором нужно настроить обнаружение этим методом.  

3.  На вкладке **Главная** в группе **Свойства** нажмите кнопку **Свойства**.  

    -   На вкладке **Общие** установите флажок **Включить обнаружение сетевых ресурсов**, а затем в списке **Тип обнаружения** выберите **Топология**.  

    -   На вкладке **Подсети** установите флажок **Поиск в локальных подсетях**.  

        > [!TIP]  
        >  Если известно, из каких конкретно подсетей состоит данная сеть, флажок **Поиск в локальных подсетях** можно снять и использовать значок **Создать** ![значок "Создать"](media/Disc_new_Icon.gif), чтобы добавить конкретные подсети, в которых требуется вести поиск. Для крупных сетей чаще всего лучше выполнять поиск не более чем в одной-двух подсетях за один прием, чтобы вести к минимуму использование пропускной способности.  

    -   На вкладке **Домены** установите флажок **Поиск в локальном домене**.  

    -   На вкладке **SNMP** с помощью раскрывающегося списка **Максимальное число прыжков** укажите, сколько прыжков между маршрутизаторами разрешается делать при обнаружении сетевых ресурсов с целью выяснения топологии.  

        > [!TIP]  
        >  Впервые определяя топологию сети, следует указать небольшое максимальное число прыжков — это поможет ограничить использование пропускной способности сети.  

4.  На вкладке **Расписание** щелкните значок **Создать** ![значок "Создать"](media/Disc_new_Icon.gif), чтобы задать расписание обнаружения сетевых ресурсов.  

    > [!NOTE]  
    >  Возможность задания различных конфигураций обнаружения для разных расписаний сетевого обнаружения не предусмотрена. Каждый раз, когда выполняется обнаружение сетевых ресурсов, используется текущая конфигурация обнаружения.  

5.  Нажмите кнопку **ОК**, чтобы принять заданные конфигурации. Обнаружение сети будет выполняться в назначенное время.  

##### <a name="to-configure-network-discovery"></a>Настройка обнаружения сетевых ресурсов  

1.  В консоли Configuration Manager выберите **Администрирование** > **Конфигурация иерархии**, а затем щелкните **Методы обнаружения**.  

2.  Выберите метод **Обнаружение сетевых ресурсов** для сайта, на котором нужно настроить обнаружение этим методом.  

3.  На вкладке **Главная** в группе **Свойства** нажмите кнопку **Свойства**.  

4.  На вкладке **Общие** установите флажок **Включить обнаружение сетевых ресурсов**, а затем в списке **Тип обнаружения** выберите нужный вариант.  

5.  Чтобы настроить обнаружение в определенных подсетях, щелкните вкладку **Подсети**, а затем настройте один или несколько из следующих параметров:  

    -   Чтобы обнаружение производилось в локальных подсетях компьютера, который выполняет обнаружение, установите флажок **Поиск в локальных подсетях**.  

    -   Чтобы выполнить поиск в конкретной подсети, добавьте ее в список **Subnets to search** (Искать в подсетях), а для параметра **Поиск** задайте значение **Включено**:  

        1.  Если подсеть отсутствует в списке, щелкните значок **Создать** ![значок "Создать"](media/Disc_new_Icon.gif). В диалоговом окне **Новое назначение подсети** введите значения параметров **Подсеть** и **Маска**, а затем нажмите кнопку **ОК**. По умолчанию поиск в новой подсети включен.  

        2.  Чтобы изменить значение параметра **Поиск** для подсети из списка, выберите подсеть, а затем щелкните значок **Переключить** для переключения между значениями **Отключено** и **Включено**.  

6.  Чтобы настроить обнаружение в доменах, щелкните вкладку **Домены**, а затем настройте один или несколько из следующих параметров:  

    -   Чтобы обнаружение производилось в локальных доменах компьютера, выполняющего обнаружение, установите флажок **Поиск в локальном домене**.  

    -   Чтобы выполнить поиск в конкретном домене, добавьте его в список **Домены**, а для параметра **Поиск** задайте значение **Включено**:  

        1.  Если домен отсутствует в списке, щелкните значок **Создать** ![значок "Создать"](media/Disc_new_Icon.gif). В диалоговом окне **Свойства домена** введите сведения в поле **Домен** и нажмите кнопку **ОК**. По умолчанию поиск в новом домене включен.  

        2.  Чтобы изменить значение параметра **Поиск** для домена из списка, выберите домен, а затем щелкните значок **Переключить** для переключения между значениями **Отключено** и **Включено**.  

7.  Чтобы настроить обнаружение SNMP-устройств с определенными именами сообществ, щелкните вкладку **SNMP** и настройте один или несколько из следующих параметров:  

    -   Чтобы добавить имя SNMP-сообщества в список **SNMP Community names** (Имена SNMP-сообществ), щелкните значок **Создать** ![значок "Создать"](media/Disc_new_Icon.gif). В диалоговом окне **Новое имя SNMP-сообщества** укажите **имя** сообщества и нажмите кнопку **ОК**.  

    -   Чтобы удалить имя SNMP-сообщества из списка, выделите это имя и щелкните значок **Удалить** ![значок "Удалить"](media/Disc_delete_Icon.gif).  

    -   Чтобы изменить порядок поиска имен SNMP-сообществ, выделите имя сообщества, а затем щелкните значок **Переместить элемент вверх** ![значок "Переместить вверх"](media/Disc_moveUp_Icon.gif) или **Переместить элемент вниз** ![значок "Переместить вниз"](media/Disc_moveDown_Icon.gif). При обнаружении поиск в сообществах будет производиться сверху вниз в порядке следования имен. Однако учитывайте следующие моменты:

        > [!NOTE]  
        >  При обнаружении ресурсов сети имена SNMP-сообществ используются для получения доступа к маршрутизаторам, которые являются устройствами, работающими по протоколу SNMP. Маршрутизатор может в процессе обнаружения сетевых ресурсов сообщать о других связанных с ним маршрутизаторах и подсетях.  

        -   Имена SNMP-сообществ напоминают пароли.  

        -   При обнаружении сетевых ресурсов получать информацию можно только от тех SNMP-устройств, для которых указано имя сообщества.  

        -   У каждого SNMP-устройства может быть собственное имя сообщества, но зачастую для нескольких устройств используется общее имя сообщества.  

        -   Большинству SNMP-устройств по умолчанию присвоено имя сообщества **public**. Это имя можно использовать в случаях, когда другие имена сообществ неизвестны. Однако некоторые организации отключают на своих устройствах имя сообщества **Public** из соображений безопасности.  

8.  Чтобы задать максимально разрешенное количество прыжков между маршрутизаторами при SNMP-поиске, щелкните вкладку **SNMP** и выберите нужное значение в раскрывающемся списке **Maximum hops** (Максимальное число прыжков).  

9. Чтобы настроить SNMP-устройство, щелкните вкладку **SNMP-устройства**. Если устройство отсутствует в списке, щелкните значок **Создать** ![значок "Создать"](media/Disc_new_Icon.gif). В диалоговом окне **Новое SNMP-устройство** укажите IP-адрес или имя SNMP-устройства, а затем нажмите кнопку **ОК**.  

    > [!NOTE]  
    >  Если указано имя устройства, система Configuration Manager должна быть в состоянии разрешить NetBIOS-имя в IP-адрес.  

10. Чтобы настроить обнаружение для запроса сведений о DHCP-клиентах у определенных DHCP-серверов, щелкните вкладку **DHCP** и настройте один или несколько из следующих параметров:  

    -   Чтобы при обнаружении делались запросы к DHCP-серверу на компьютере, выполняющем обнаружение, установите флажок **Always use the site server’s DHCP server** (Всегда использовать DHCP-сервер сайта).  

        > [!NOTE]  
        >  Для использования этого параметра сервер должен получать свой IP-адрес от DHCP-сервера и не должен иметь статический IP-адрес.  

    -   Чтобы при обнаружении отправлялись запросы к определенному DHCP-серверу, щелкните значок **Создать** ![значок "Создать"](media/Disc_new_Icon.gif). В диалоговом окне **Новый DHCP-сервер** введите IP-адрес или имя DHCP-сервера, а затем нажмите кнопку **ОК**.  

        > [!NOTE]  
        >  Если указано имя сервера, система Configuration Manager должна быть в состоянии разрешить NetBIOS-имя в IP-адрес.  

11. Чтобы настроить расписание обнаружения, откройте вкладку **Расписание** и щелкните значок **Создать** ![значок "Создать"](media/Disc_new_Icon.gif).  

     Вы можете задать несколько повторяющихся расписаний и несколько расписаний без повторения.  

    > [!NOTE]  
    >  Если на вкладке **Расписание** отображается несколько расписаний одновременно, это приведет к тому, что процедура обнаружения сетевых ресурсов будет запущена в указанное в расписании время. Это также справедливо и для повторяющихся расписаний.  

12. Нажмите кнопку **ОК**, чтобы сохранить настройки.  

###  <a name="BKMK_HowToVerifyNetDisc"></a> Проверка завершения обнаружения сетевых ресурсов  
 Время, необходимое для того, чтобы завершить обнаружение сетевых ресурсов, зависит от разнообразных факторов. В их число может входить следующее:  

-   размер сети;  

-   топология сети;  

-   максимальное число прыжков, заданное для поиска маршрутизаторов в данной сети;  

-   тип выполняемого обнаружения.  

Поскольку пользователь не уведомляется о завершении обнаружении сетевых ресурсов посредством каких-либо специальных сообщений, убедиться, что обнаружение завершено, можно следующим образом.  

##### <a name="to-verify-that-network-discovery-has-finished"></a>Порядок проверки завершения обнаружения  

1.  В консоли Configuration Manager щелкните элемент **Мониторинг**.  

2.  В рабочей области **Мониторинг** разверните узел **Состояние системы**, а затем щелкните **Запросы сообщения о состоянии**.  

3.  Выберите **Все сообщения об изменении состояния**.  

4.  На вкладке **Главная** в группе **Запросы сообщения о состоянии** щелкните **Показать сообщения**.  

5.  В раскрывающемся списке **Выбрать дату и время** укажите значение, содержащее момент запуска обнаружения, а затем нажмите кнопку **ОК**, чтобы открыть окно **Средство просмотра сообщений о состоянии Configuration Manager**.  

    > [!TIP]  
    >  Можно также использовать раскрывающийся список **Выбрать дату и время** для указания конкретных даты и времени, когда выполнялось обнаружение. Этот вариант полезен, если пользователь выполнял обнаружение сетевых ресурсов в определенную дату и желает получить сообщения только за эту дату.  

6.  Чтобы проверить, завершилось ли обнаружение сетевых ресурсов, попытайтесь найти сообщение о состоянии следующего вида:  

    -   ИД сообщения: **502**  

    -   Компонент: **SMS_NETWORK_DISCOVERY**  

    -   Описание. **Компонент завершил свою работу.**  

    Если такое сообщение отсутствует, обнаружение сетевых ресурсов еще не завершено.  

7.  Чтобы определить, когда было запущено обнаружение сетевых ресурсов, попытайтесь найти сообщение о состоянии следующего вида:  

    -   ИД сообщения: **500**  

    -   Компонент: **SMS_NETWORK_DISCOVERY**  

    -   Описание. **Компонент запущен**  

    Эта информация подтверждает, что обнаружение сетевых ресурсов запущено. Если эта информация отсутствует, заново запланируйте обнаружение сетевых ресурсов.  
