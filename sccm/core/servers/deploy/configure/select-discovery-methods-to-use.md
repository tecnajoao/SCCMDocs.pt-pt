---
title: "Выбор методов обнаружения для Configuration Manager | Документы Майкрософт"
description: "Ознакомьтесь с рекомендациями по выбору методов и сайтам, на которых их следует использовать."
ms.custom: na
ms.date: 10/06/2016
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology: configmgr-other
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 127ce713-d085-430f-ac7b-2701637fe126
caps.latest.revision: "9"
author: Brenduns
ms.author: brenduns
manager: angrobe
ms.openlocfilehash: 4b6be888be2ad6c1f5e7c0be33d9830bb870114e
ms.sourcegitcommit: 51fc48fb023f1e8d995c6c4eacfda7dbec4d0b2f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2017
---
# <a name="select-discovery-methods-to-use-for-system-center-configuration-manager"></a>Выбор методов обнаружения для System Center Configuration Manager

*Применимо к: System Center Configuration Manager (Current Branch)*

Чтобы успешно и эффективно использовать обнаружение в System Center Configuration Manager, необходимо учитывать особенности различных методов и то, на каких сайтах их следует применять.  

 Так как при обнаружении может создаваться большой объем сетевого трафика и обработка результирующих записей данных обнаружения может значительно нагружать процессор, используйте только те методы обнаружения, которые необходимы для достижения ваших целей. Для начала можно задействовать всего один или два метода, а затем контролируемым образом включать другие методы, чтобы расширить возможности обнаружения в данной среде. Сведения в этом разделе могут помочь вам принять обоснованное решение.  

 Сведения о различных методах обнаружения см. в разделе [Сведения о методах обнаружения для System Center Configuration Manager](../../../../core/servers/deploy/configure/about-discovery-methods.md).  

## <a name="select-methods-to-discover-different-things"></a>Выбор методов для обнаружения различных объектов  
 Для поиска потенциальных клиентских компьютеров Configuration Manager или пользовательских ресурсов необходимо включить соответствующие методы обнаружения. Разные сочетания методов обнаружения позволяют находить разные ресурсы и получать дополнительные сведения о них. Используемые методы обнаружения определяют тип обнаруживаемых ресурсов, а также перечень служб и агентов Configuration Manager, которые используются в процессе обнаружения. Кроме того, они определяют, какого рода сведения о ресурсах могут обнаруживаться.  

### <a name="discover-computers"></a>Обнаружить компьютеры   
Если требуется обнаруживать компьютеры, можно использовать **обнаружение систем Active Directory** или **обнаружение сетевых ресурсов**.  

 Например, если стоит задача найти ресурсы, на которых можно установить клиент Configuration Manager, прежде чем выполнять его принудительную установку, можно запустить обнаружение систем Active Directory. Этот метод позволяет не только обнаружить сам ресурс, но и получить основные сведения о нем, а также дополнительные сведения, предоставляемые доменными службами Active Directory. Эти сведения могут пригодиться при построении сложных запросов и коллекций, которые используются для назначения параметров клиента и развертывания содержимого.

С другой стороны, можно запустить обнаружение сетевых ресурсов, настроив его параметры для обнаружения операционной системы ресурсов (это необходимо для дальнейшей принудительной установки клиента). Метод обнаружения сетевых ресурсов предоставляет сведения о топологии сети, которые нельзя получить с помощью других методов обнаружения. Но он не дает никакой информации о среде Active Directory.

 Существует также метод, называемый **Heartbeat-обнаружение**. Можно отдельно использовать Heartbeat-обнаружение для поиска клиентов, установленных не по принудительному методу, а как-либо иначе. Но, в отличие от других методов, Heartbeat-обнаружение не позволяет находить компьютеры, на которых отсутствует активный клиент Configuration Manager. Он возвращает ограниченный набор информации, предназначенный для ведения уже имеющейся записи в базе данных, а не для создания такой записи с нуля. Сведения, полученные в ходе Heartbeat-обнаружения, могут оказаться недостаточными для построения сложных запросов или коллекций.  

 Если вы используете **обнаружение групп Active Directory** для определения членства в конкретной группе, в процессе такого обнаружения может возвращаться ограниченная информация о системах или компьютерах. Это не заменяет полноценного обнаружения компьютеров, но дает возможность получить основные сведения. Этих сведений недостаточно для принудительной установки клиента.  

### <a name="discover-users"></a>Обнаружение пользователей   
Если требуется получать информацию о пользователях, можно использовать **обнаружение пользователей Active Directory**. Подобно обнаружению систем Active Directory, этот метод позволяет находить пользователей в Active Directory. Он содержит базовые сведения, а также расширенные сведения из Active Directory. По этим сведениям можно строить сложные запросы и коллекции, сходные с теми, которые строятся для компьютеров.  

### <a name="discover-group-information"></a>Обнаружение групп   
Если требуется получать информацию о группах и членстве в них, можно использовать **обнаружение групп Active Directory**. При обнаружении по этому методу создаются записи о ресурсах для групп безопасности.  

 Можно использовать этот метод для поиска членов конкретной группы Active Directory, а также вложенных в нее групп (если такие есть). Кроме того, с его помощью можно искать группы в заданном местоположении Active Directory и выполнять рекурсивный поиск в каждом дочернем контейнере этого местоположения в доменных службах Active Directory.  

 Этот метод также позволяет находить членов распределенных групп. Таким образом можно определять членство в группах как пользователей, так и компьютеров.  

 При обнаружении группы можно получать ограниченные сведения о ее членах. Этот метод не заменяет методы обнаружения систем или пользователей Active Directory. Он обычно не дает достаточно информации для построения сложных запросов и коллекции, а также для принудительной установки клиента.  

### <a name="discover-infrastructure"></a>Обнаружение инфраструктуры   
Для обнаружения инфраструктуры можно использовать два метода: **обнаружение в лесах Active Directory** и **обнаружение сетевых ресурсов**.  

 Обнаружение в лесах Active Directory позволяет искать в лесу Active Directory информацию о подсетях и конфигурациях сайтов Active Directory. Эти конфигурации затем можно автоматически вводить в Configuration Manager как граничные местоположения.  

 Если требуется определить топологию сети, используйте обнаружение сетевых ресурсов. Хотя при обнаружении по другим методам возвращаются сведения, относящиеся к доменным службам Active Directory, и может определяться текущее сетевое местоположение клиента, эти методы не дают информации об инфраструктуре сети в терминах подсетей и топологии маршрутизации.  

##  <a name="bkmk_shared"></a> Данные обнаружения являются общими для сайтов  
 После добавления данных обнаружения в базу данных диспетчером Configuration Manager они быстро распространяются между всеми сайтами в иерархии. Так как обнаружение одной и той же информации на множестве сайтов в иерархии, как правило, не приносит какой-либо пользы, рекомендуется использовать единственный экземпляр каждого применяемого метода обнаружения на одном сайте. Это рекомендуется сделать вместо выполнения нескольких экземпляров одного и того же метода на различных сайтах.  

 Однако в некоторых средах выполнение одного и того же метода обнаружения на нескольких сайтах может оказаться полезным, если на каждом сайте используется отдельное расписание и конфигурация. Например, при использовании обнаружения сетевых ресурсов может потребоваться настроить каждый сайт для обнаружения локальной сети вместо попытки выполнять обнаружение всех сетевых расположений в глобальной сети.

Если настраивается выполнение нескольких экземпляров одного и того же метода обнаружения на различных сайтах, следует внимательно определить конфигурацию каждого из них. Это необходимо, чтобы предотвратить обнаружение одних и тех же ресурсов в сети или Active Directory двумя или более сайтами. Такое обнаружение может потреблять дополнительную пропускную способность сети и приводить к созданию дубликатов записей DDR.

В следующей таблице приведены сведения о том, на каких сайтах можно настроить различные методы обнаружения.  

|Метод обнаружения|Поддерживаемые расположения|  
|----------------------|-------------------------|  
|Обнаружение лесов Active Directory|Сайт центра администрирования<br /><br /> Первичный сайт|  
|Обнаружение групп Active Directory|Первичный сайт|  
|Обнаружение систем Active Directory|Первичный сайт|  
|обнаружение пользователей Active Directory|Первичный сайт|  
|Heartbeat-обнаружение<sup>1</sup>|Первичный сайт|  
|Обнаружение сети|Первичный сайт<br /><br /> Вторичный сайт|  

 <sup>1</sup> Вторичные сайты не могут настраивать Heartbeat-обнаружение, но могут принимать записи Heartbeat DDR от клиента.  

 Если на вторичном сайте выполняется служба сетевого обнаружения или принимаются записи DDR heartbeat-обнаружения, происходит передача DDR посредством репликации на основе файлов на родительский первичный сайт. Дело в том, что обрабатывать записи данных обнаружения могут только первичные сайты центра администрирования. Дополнительные сведения об обработке записей данных обнаружения см. в разделе [Сведения о записях данных обнаружения](../../../../core/servers/deploy/configure/run-discovery.md#BKMK_DDRs).  

## <a name="considerations-for-different-discovery-methods"></a>Рекомендации по использованию различных методов обнаружения  
 Каждый сервер сайта и сетевая среда имеют свои особенности, поэтому следует ограничить первоначальную настройку обнаружения. Также нужно детально отслеживать возможность обработки данных обнаружения каждым сервером сайта.  

При использовании обнаружения **Active Directory** для систем, пользователей или групп  

-   Обнаружение следует выполнять на сайте, имеющем быстрое сетевое соединение с контроллерами домена.  

-   Используйте такую топологию репликации Active Directory, чтобы обеспечить возможность доступа службы обнаружения к самой последней информации.  

-   Определите область действия конфигурации обнаружения и разрешите обнаружение только в тех местах и группах Active Directory, для которых должно выполняться обнаружение.  

Если используется **сетевое обнаружение**  

-   Используйте ограниченную первоначальную конфигурацию, чтобы определить топографию сети.  

-   После определения сетевой топографии следует настроить службу сетевого обнаружения на работу на определенных сайтах, являющихся центральными в тех областях, для которых требуется выполнить более полное обнаружение.  

Так как **Heartbeat-обнаружение** не выполняется на определенном сайте, необязательно учитывать его при общем планировании мест выполнения обнаружения.  

##  <a name="bkmk_best"></a> Рекомендации по обнаружению  
Для получения наилучших результатов при обнаружении рекомендуется выполнять следующие условия.

 - **Запускайте обнаружение систем Active Directory и обнаружение пользователей Active Directory перед обнаружением групп Active Directory.**  

 Если обнаружение групп Active Directory выявляет ранее не найденного пользователя или компьютер, входящие в группу, то оно пытается обнаружить основные сведения об обнаруженном объекте. Так как обнаружение групп Active Directory не оптимизировано для этого вида обнаружения, этот процесс может привести к замедлению обнаружения. Кроме того, обнаружение Active Directory выявляет только основные сведения о пользователях и компьютерах, а не создает полные записи обнаружения о них. При запуске обнаружения систем Active Directory и обнаружения пользователей Active Directory доступны дополнительные атрибуты Active Directory для обоих типов объектов. Поэтому обнаружение групп Active Directory работает более эффективно.  

- **При настройка обнаружения групп Active Directory указывайте только группы, используемые в Configuration Manager.**  

 Для контроля ресурсов, применяемых обнаружением групп Active Directory, указывайте только группы, используемые в Configuration Manager. Причина в том, что в ходе выполнения обнаружения групп Active Directory ведется рекурсивный поиск пользователей, компьютеров и вложенных групп в каждой обнаруженной группе. Поиск вложенных групп может увеличить область обнаружения групп Active Directory и снизить производительность. Кроме того, если для обнаружения групп Active Directory используется обнаружение изменений, метод обнаружения наблюдает за изменениями в каждой группе. Это дополнительно снижает производительность, если методу приходится вести поиск в ненужных группах.  

- **Настройте методы обнаружения с более долгосрочными интервалами между полными обнаружениями и более частыми периодами обнаружения изменений.**  

 Так как обнаружение изменений использует меньше ресурсов, чем полное обнаружение, и может определять новые или измененные ресурсы в Active Directory, можно уменьшить частоту полных циклов обнаружения для запуска еженедельно (или реже). Обнаружение изменений для обнаружения систем Active Directory, обнаружения пользователей Active Directory и обнаружения групп Active Directory идентифицирует почти все изменения объектов Active Directory и может поддерживать точные данные обнаружения для ресурсов.  

- **Запускайте методы обнаружения Active Directory на первичном сайте, расположение которого в сети наиболее близко к контроллеру домена Active Directory.**  

 Чтобы повысить производительность обнаружения Active Directory, рекомендуется запускать обнаружение на первичном сайте, имеющем быстрое сетевое подключение к контроллерам домена. Если один и тот же метод обнаружения Active Directory запускается на нескольких сайтах, настройте каждый метод обнаружения, чтобы избежать накладок. В отличие от предшествующих версий Configuration Manager, данные обнаружения будут у сайтов общими. Следовательно, нет необходимости обнаружения одной и той же информации на нескольких сайтах. Дополнительные сведения см. в разделе [Данные обнаружения являются общими для сайтов](../../../../core/servers/deploy/configure/select-discovery-methods-to-use.md#bkmk_shared).  

- **Выполняйте обнаружение лесов Active Directory только на одном сайте, если планируете автоматически создавать границы по данным обнаружения.**  

 При выполнении обнаружения лесов Active Directory в нескольких сайтах иерархии рекомендуется включать автоматическое создание границ только на одном сайте. Это происходит потому, что при обнаружении лесов Active Directory на каждом сайте с созданием границ Configuration Manager не может объединить границы в один объект. При настройке обнаружения лесов Active Directory с автоматическим созданием границ на нескольких сайтах в результате могут появиться дублированные объекты границ в консоли Configuration Manager.  
