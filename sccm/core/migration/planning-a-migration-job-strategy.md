---
title: "Планирование заданий миграции | Документы Майкрософт"
description: "Используйте задания миграции для настройки данных, которые требуется перенести в вашу среду System Center Configuration Manager."
ms.custom: na
ms.date: 10/06/2016
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology: configmgr-other
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: a70bfbd4-757a-4468-9312-1c3b373ef9fc
caps.latest.revision: "6"
caps.handback.revision: "0"
author: Brenduns
ms.author: brenduns
manager: angrobe
robots: noindex
ms.openlocfilehash: 4c83540db763bea039a92633a1d1a808e60e27ad
ms.sourcegitcommit: 51fc48fb023f1e8d995c6c4eacfda7dbec4d0b2f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2017
---
# <a name="plan-a-migration-job-strategy-in-system-center-configuration-manager"></a>Планирование стратегии заданий миграции в System Center Configuration Manager

*Применимо к: System Center Configuration Manager (Current Branch)*

Используйте задания миграции для настройки данных, которые требуется перенести в вашу среду System Center Configuration Manager. Задания миграции выполняются на сайте верхнего уровня в иерархии и определяют объекты, которые планируется перенести. Можно настроить одно или несколько заданий на одном исходном сайте. Это позволяет перенести все объекты одновременно или переносить ограниченное подмножество данных с каждым заданием.  

 Задания миграции можно создавать после того, как Configuration Manager успешно выполнит сбор данных с одного или нескольких сайтов в исходной иерархии. Перенос данных можно выполнять в любой последовательности из исходных сайтов, где собраны данные. При использовании исходных сайтов Configuration Manager 2007 можно перенести данные только с сайта, где объект был создан. При использовании исходных сайтов, где выполняется System Center 2012 Configuration Manager или более поздней версии, все доступные для переноса данные находятся на сайте верхнего уровня исходной иерархии.  

 Перед переносом клиентов между иерархиями убедитесь в том, что объекты, используемые клиентами, перенесены и доступны в конечной иерархии. Например, при переносе из исходной иерархии Configuration Manager 2007 с пакетом обновления 2 (SP2) возможно объявление контента, развернутого в настраиваемой коллекции, которая содержит клиент. В этом случае рекомендуем перенести коллекцию, объявление и связанное содержимое перед переносом клиента. Эти данные нельзя связать с клиентом в конечной иерархии, если содержимое, коллекция и объявление не перенесены перед переносом клиента. Если клиент не связан с данными, которые относятся к предыдущему объявлению и контенту, то клиенту может быть предоставлен для установки контент из конечной иерархии, что может быть нежелательно. Если клиент переносится после переноса данных, то он связывается с этим контентом и объявлением. Если объявление не повторяется, то клиенту не будет повторно предлагаться контент для перенесенного объявления.  

 Некоторые объекты требуют не только переноса данных из исходной иерархии в конечную. Например, чтобы успешно перенести обновления программного обеспечения для клиентов в конечную иерархию, в ней необходимо развернуть активную точку обновления программного обеспечения, настроить каталог продуктов и синхронизировать точку обновления программного обеспечения со службами Windows Server Update Services (WSUS).  

 При планировании заданий миграции используйте информацию следующих разделов.  

-   [Типы заданий миграции](#Types_of_Migration)  

-   [Общее планирование для всех заданий миграции](#About_Migration_Jobs)  

-   [Планирование заданий миграции коллекций](#About_Collection_Migration)  

-   [Планирование заданий миграции объектов](#About_Object_Migration)  

-   [Планирование заданий миграции ранее перенесенных объектов](#About_Object_Migrations)  

##  <a name="Types_of_Migration"></a> Типы заданий миграции  
 Configuration Manager поддерживает указанные ниже типы заданий миграции. Каждый тип задания предназначен для определения объектов, которые можно включить в задание.  

 **Миграция коллекций**. Поддерживается только при миграции из Configuration Manager 2007 с пакетом обновления 2 (SP2). Миграция объектов, относящихся к выбранным коллекциям. По умолчанию миграция коллекции включает все объекты, связанные с элементами коллекции. При использовании задания миграции коллекции конкретные экземпляры объектов можно исключить.  

 **Миграция объектов**. Миграция отдельных выбранных объектов. Следует выбрать только конкретные данные, которые необходимо перенести.  

 **Миграция перенесенных ранее объектов**. Миграция ранее перенесенных объектов, если они были обновлены в исходной иерархии после последней миграции.  

###  <a name="Objects_that_can_migrate"></a> Объекты, которые можно перенести  
 Не все объекты можно переносить с помощью определенных типов заданий миграции. В следующем списке указаны типы объектов, которые можно перенести с помощью задания каждого типа.  

> [!NOTE]  
>  Задания миграции коллекций доступны только при переносе объектов из исходной иерархии Configuration Manager 2007 с пакетом обновления 2 (SP2).  

 **Типы заданий, которые можно использовать для переноса объекта**  

-   **Объявления** доступны для переноса из поддерживаемых исходных сайтов Configuration Manager 2007.  

    -   Миграция коллекций  


-   **Каталог аналитики активов**  

    -   Миграция объектов  

    -   Миграция ранее перенесенных объектов  

-   **Требования к оборудованию для аналитики активов**  

    -   Миграция объектов  

    -   Миграция ранее перенесенных объектов  

-   **Список программного обеспечения аналитики активов**  

    -   Миграция объектов  

    -   Миграция ранее перенесенных объектов  

-   **Границы**  

    -   Миграция объектов  

    -   Миграция ранее перенесенных объектов  

-   **Конфигурационные базы**  

    -   Миграция коллекций  

    -   Миграция объектов  

    -   Миграция ранее перенесенных объектов  

-   **Элементы конфигурации**  

    -   Миграция коллекций  

    -   Миграция объектов  

    -   Миграция ранее перенесенных объектов  

-   **Периоды обслуживания**  

    -   Миграция коллекций  


-   **Загрузочные образы для развертывания операционных систем**  

    -   Миграция коллекций  

    -   Миграция объектов  

    -   Миграция ранее перенесенных объектов  

-   **Пакеты драйверов для развертывания операционных систем**  

    -   Миграция коллекций  

    -   Миграция объектов  

    -   Миграция ранее перенесенных объектов  

-   **Драйверы для развертывания операционных систем**  

    -   Миграция коллекций  

    -   Миграция объектов  

    -   Миграция ранее перенесенных объектов  

-   **Образы развертывания операционных систем**  

    -   Миграция коллекций  

    -   Миграция объектов  

    -   Миграция ранее перенесенных объектов  

-   **Пакеты развертывания операционных систем**  

    -   Миграция коллекций  

    -   Миграция объектов  

    -   Миграция ранее перенесенных объектов  

-   **Пакеты распространения программного обеспечения**  

    -   Миграция коллекций  

    -   Миграция объектов  

    -   Миграция ранее перенесенных объектов  

-   **Правила контроля использования программных продуктов**  

    -   Миграция объектов  

    -   Миграция ранее перенесенных объектов  

-   **Пакеты развертывания обновлений программного обеспечения**  

    -   Миграция коллекций  

    -   Миграция объектов  

    -   Миграция ранее перенесенных объектов  

-   **Шаблоны развертывания обновлений программного обеспечения**  

    -   Миграция коллекций  

    -   Миграция объектов  

    -   Миграция ранее перенесенных объектов  

-   **Развертывания обновлений программного обеспечения**  

    -   Миграция коллекций  


-   **Списки обновлений программного обеспечения**  

    -   Миграция объектов  

    -   Миграция ранее перенесенных объектов  

-   **Последовательности задач**  

    -   Миграция коллекций  

    -   Миграция объектов  

    -   Миграция ранее перенесенных объектов  

-   **Пакеты виртуальных приложений**  

    -   Миграция коллекций  

    -   Миграция объектов  

    > [!IMPORTANT]  
    >  Несмотря на то что можно переносить пакеты виртуальных приложений с помощью миграции объектов, для выполнения этой процедуры нельзя использовать тип задания миграции **Миграция ранее перенесенных объектов**. Вместо этого следует удалить перенесенный пакет виртуального приложения из конечного сайта, после чего создать новое задание миграции для переноса виртуального приложения.  

##  <a name="About_Migration_Jobs"></a> Общее планирование для всех заданий миграции  
 Используйте мастер создания заданий для создания задания миграции объектов в конечную иерархию. Тип создаваемого задания миграции определяет, какие объекты доступны для переноса. Можно создавать и использовать несколько заданий миграции для переноса данных из одного исходного сайта или нескольких исходных сайтов. Применение одного типа миграции не мешает использовать другой тип задания миграции.  

 После успешного выполнения задания миграции его состояние будет указано в списке со значением **Выполнено** , и выполнить его повторно нельзя. Однако можно создать новое задание миграции для переноса всех объектов, которые были перенесены в первоначальном задании, и новое задание миграции может содержать дополнительные объекты. При создании дополнительных заданий миграции ранее перенесенные объекты отображаются в состоянии **Выполнена миграция**. Можно выбрать такие объекты, чтобы перенести их снова, но, если объект не был обновлен в исходной иерархии, перемещать эти объекты повторно не требуется. Если после миграции объект в исходной иерархии был обновлен, такой объект можно выявить при использовании типа задания миграции **Объекты, измененные после миграции**.  

 Перед выполнением задания миграции его можно удалить. Но после того, как задание миграции будет выполнено, оно продолжит отображаться в консоли Configuration Manager без возможности удаления. Каждое задание миграции, которое было выполнено или еще не запускалось, продолжает отображаться в консоли Configuration Manager до тех пор, пока процесс миграции не завершится и его данные не будут удалены.  

> [!NOTE]  
>  Когда миграция выполнена с помощью действия **Очистить данные переноса**, можно повторно настроить ту же самую иерархию в качестве текущей исходной иерархии, чтобы восстановить отображение ранее перенесенных объектов.  

 Для просмотра объектов, входящих в любое задание миграции в консоли Configuration Manager, выберите задание миграции и перейдите на вкладку **Объекты в задании**.  

 При планировании всех заданий миграции используйте информацию следующих разделов.  

### <a name="data-selection"></a>Выбор данных  
 При создании задания миграции коллекции необходимо выбрать одну или несколько коллекций. После выбора коллекций мастер создания заданий миграции отображает объекты, связанные с коллекциями. По умолчанию все объекты, связанные с выбранными коллекциями, входят в объем миграции, но можно отменить выбор объектов, на которые не должно распространяться данное задание миграции. При отмене выбора объекта, имеющего зависимые объекты, их выбор также будет отменен. Все отмененные объекты добавляются в список исключений. Объекты в списке исключений удаляются из автоматического выбора в будущих заданиях миграции. Необходимо вручную изменить список исключений для удаления объектов, которые должны автоматически выбираться для переноса в заданиях миграции, создаваемых в будущем.  

### <a name="site-ownership-for-migrated-content"></a>Владение сайтами для перенесенного содержимого  
 При переносе контента для развертываний необходимо назначить объект в сайт конечной иерархии. Такой сайт затем становится владельцем этого контента. Хотя метаданные для контента получает сайт верхнего уровня в конечной иерархии, доступ к исходным файлам контента по сети ведет назначенный сайт.  

 Чтобы максимально сократить полосу пропускания сети, используемую во время миграции, рассмотрите возможность передачи прав владения содержимым ближайшему доступному сайту. Так как сведения о содержимом глобально доступны в System Center Configuration Manager, их можно будет получить с каждого сайта.  

 Сведения о содержимом доступны для всех сайтов в конечной иерархии с помощью репликации базы данных. Но любое содержимое, назначенное первичному сайту, а затем развернутое в точках распространения на других первичных сайтах, передается путем репликации на основе файлов. Эта передача направляется через сайт центра администрирования на каждый дополнительный первичный сайт. Централизация пакетов, которые планируется распространить на нескольких первичных сайтах до или во время миграции при назначении сайта владельцем содержимого, позволяет сократить число передач данных в сетях с низкой пропускной способностью.  

### <a name="role-based-administration-security-scopes-for-migrated-data"></a>Области безопасности ролевого администрирования для перенесенных данных  
 При переносе данных в конечную иерархию необходимо назначить одну или несколько областей безопасности ролевого администрирования для объектов, данные которых перемещаются. Это гарантирует, что только соответствующие пользователи получат доступ для управления этими данными после миграции. Указываемые области безопасности определяются заданием миграции и применяются к каждому объекту, перенесенному в этом задании. Если требуется, чтобы к различным наборам объектов применялись разные области безопасности, назначаемые во время миграции, необходимо переносить такие наборы объектов в разных заданиях миграции.  

 Перед настройкой задания миграции просмотрите принципы работы ролевого администрирования в System Center Configuration Manager. При необходимости настройте одну или несколько областей безопасности для переносимых данных, чтобы проконтролировать доступ пользователей к перенесенным объектам в конечной иерархии.  

 Дополнительные сведения об областях безопасности и ролевом администрировании см. в разделе [Основы ролевого администрирования для System Center Configuration Manager](../../core/understand/fundamentals-of-role-based-administration.md).  

### <a name="review-migration-actions"></a>Проверка действий миграции  
 При настройке задания миграции в мастере создания заданий миграции отображается список действий, которые необходимо выполнить для обеспечения успешной миграции, а также список действий, выполняемых Configuration Manager во время переноса выбранных данных. Внимательно просмотрите эти сведения, чтобы проверить ожидаемый результат.  

### <a name="schedule-migration-jobs"></a>Планирование заданий миграции  
 По умолчанию задание миграции запускается сразу после создания. Но вы можете указать, когда задание миграции должно выполняться, при создании задания или позднее, изменив свойства задания. Можно запланировать запуск задания миграции следующим образом:  

-   Запустить задание сейчас  

-   Запустить задание в указанное время  

-   Не запускать задание  

### <a name="specify-conflict-resolution-for-migrated-data"></a>Указание разрешения конфликтов для перенесенных данных  
 По умолчанию задания миграции не перезаписывают данные в конечной базе данных, если такие задания не настроены для пропуска или перезаписи данных, ранее перенесенных в конечную базу данных.  

##  <a name="About_Collection_Migration "></a> Планирование заданий миграции коллекций  
 Задания миграции коллекций доступны только при переносе данных из исходной иерархии с поддерживаемой версией Configuration Manager 2007. При выполнении миграции по коллекциям необходимо указать одну или несколько коллекций. Для каждой указываемой коллекции задание миграции автоматически выбирает все связанные объекты для миграции. Например, если выбрана определенная коллекция пользователей, указываются участники коллекции. Кроме того, можно выполнять миграцию развертываний, связанных с этой коллекцией. В качестве альтернативного варианта для миграции можно выбрать другие объекты развертывания, связанные с указанными участниками. Все выбранные элементы добавляются в список объектов, доступных для миграции.  

 При переносе коллекции System Center Configuration Manager также переносит параметры коллекции, включая периоды обслуживания и переменные коллекции, но не может переносить параметры коллекции для подготовки клиентов AMT.  

 Чтобы получить представление о дополнительных конфигурациях, применяемых к заданиям миграции на основе коллекций, используйте информацию в приведенных ниже разделах.  

### <a name="exclude-objects-from-collection-migration-jobs"></a>Исключение объектов из заданий миграции коллекций  
 Конкретные объекты можно исключить из задания миграции коллекций. При исключении определенных объектов из задания миграции коллекции они будут добавлены к глобальному списку исключений, который содержит все объекты, исключенные из заданий миграции, созданных для любого исходного сайта в текущей исходной иерархии. Объекты в списке исключений по-прежнему доступны для миграции в будущих заданиях, но не выбираются автоматически при создании нового задания миграции на основе коллекций.  

 Список исключений можно изменить, чтобы удалить из него ранее исключенные объекты. После удаления объекта из списка исключений он автоматически выбирается при указании связанной коллекции, когда создается новое задание миграции.  

### <a name="unsupported-collections"></a>Неподдерживаемые коллекции  
 Configuration Manager может выполнять миграцию из исходной иерархии Configuration Manager 2007 любых коллекций пользователей и устройств, используемых по умолчанию, а также большинства настраиваемых коллекций. При этом Configuration Manager не может выполнить миграцию коллекций, содержащих пользователей и устройства в одной коллекции.  

 Миграция не применяется в отношении следующих коллекций.  

-   Коллекция, которая содержит пользователей и устройства.  

-   Коллекция, которая содержит ссылку на коллекцию с другим типом ресурсов. Например, коллекция на основе устройств, являющаяся вложенной коллекцией или ссылкой на коллекцию на основе пользователей. В этом примере миграция выполняется только в отношении коллекции верхнего уровня.  

-   Коллекция, которая содержит правило для включения неизвестных компьютеров. Коллекции переносится, а правило включения неизвестных компьютеров — нет.  

### <a name="empty-collections"></a>Пустые коллекции  
 Пустая коллекция — это коллекция, которая не содержит связанных с ней ресурсов. Когда Configuration Manager переносит пустую коллекцию, такая коллекция преобразуется в организационную папку, не содержащую пользователей или устройств. Этой папке присваивается имя пустой коллекции в узле **Коллекции пользователей** или **Коллекции устройств** рабочей области **Активы и соответствие** в консоли Configuration Manager.  

### <a name="linked-collections-and-subcollections"></a>Связанные коллекции и вложенные коллекции  
 При выполнении миграции коллекций, связанных с другими коллекциями или содержащих вложенные коллекции, Configuration Manager создает папку в узле **Коллекции пользователей** или **Коллекции устройств**, помимо связанных коллекций и вложенных коллекций.  

### <a name="collection-dependencies-and-include-objects"></a>Зависимости коллекций и включение объектов  
 Когда вы указываете коллекцию для миграции в мастере создания задания миграции, все зависимые коллекции автоматически выбираются для включения в задание. Это поведение гарантирует, что все необходимые ресурсы останутся доступными после миграции.  

 Пример. Вы выбираете коллекцию для устройств, на которых выполняется ОС Windows 7, с именем **Win_7**. Эта коллекция ограничивается коллекцией, содержащей все клиентские операционные системы, с именем **All_Clients**. Коллекция **All_Clients** будет автоматически выбрана для миграции.  

### <a name="collection-limiting"></a>Ограничение коллекции  
 При использовании System Center Configuration Manager коллекции являются глобальными данными и оцениваются на каждом сайте в иерархии. Поэтому необходимо запланировать ограничение области коллекции после миграции. Во время выполнения миграции можно определить коллекцию из конечной иерархии, которая будет ограничивать область переносимой коллекции, чтобы она не включала непредвиденные члены.  

 Например, в Configuration Manager 2007 коллекции оцениваются на создающем сайте и на дочерних сайтах. Объявление может быть развернуто только на дочернем сайте, и это будет ограничивать область объявления на этом дочернем сайте. В отличие от этого при использовании System Center Configuration Manager коллекции оцениваются на каждом сайте, и связанные объявления затем будут оцениваться для каждого сайта. Ограничение коллекций позволяет уточнить набор членов коллекции на основе другой коллекции, чтобы избежать добавления непредвиденных членов коллекции.  

### <a name="site-code-replacement"></a>Замена кода сайта  
 При миграции коллекции, которая содержит условия, определяющие сайт Configuration Manager 2007, необходимо указать конкретный сайт в конечной иерархии. Это гарантирует, что переносимая коллекция сохранит функциональность в конечной иерархии среде и ее область не увеличится.  

### <a name="specify-behavior-for-migrated-advertisements"></a>Задание поведения для переносимых объявлений  
 По умолчанию задания миграции, основанные на коллекциях, отключают объявления, переносимые в конечную иерархию. Сюда входят все программы, связанные с объявлением. При создании задания миграции на основе коллекций, которое содержит объявления, на странице **Параметры** мастера создания заданий миграции отображается параметр **Разрешить развертывание программ в Configuration Manager после переноса объявления**. Если установить этот флажок, программы, связанные с объявлениями, будут включены после завершения миграции. Но выбирать этот параметр не рекомендуется. Вместе этого следует включить программы после их переноса вручную, чтобы иметь возможность проверить состояние получивших их клиентов.  

> [!NOTE]  
>  Параметр **Разрешить развертывание программ в Configuration Manager после переноса объявления** отображается только при создании задания миграции, основанного на коллекциях, если такое задание содержит объявления.  

 Чтобы включить программу после переноса, снимите флажок **Отключить эту программу на компьютерах, на которых она объявлена** на вкладке **Дополнительно** окна свойств программы.  

##  <a name="About_Object_Migration"></a> Планирование заданий миграции объектов  
 В отличие от миграции коллекций необходимо выбрать каждый переносимый объект и экземпляр объекта. Вы можете выбрать отдельные объекты (например, объявления из иерархии Configuration Manager 2007 или публикацию из иерархии System Center 2012 Configuration Manager или System Center Configuration Manager), чтобы добавить их в список объектов, подлежащих миграции в рамках конкретного задания. Объекты, не добавленные в список миграции, не переносятся на конечный сайт в задании миграции.  

 Для заданий миграции, основанных на объектах, не предусмотрены какие-либо специальные дополнительные настройки помимо общих для всех заданий миграций.  

##  <a name="About_Object_Migrations"></a> Планирование заданий миграции ранее перенесенных объектов  
 Если объект, который вы уже перенесли в конечную иерархию, обновляется в исходной иерархии, можно перенести его снова, используя тип задания **Объекты, измененные после миграции** . Например, при переименовании или обновлении исходных файлов пакета в исходной иерархии версия пакета в исходной иерархии увеличивается. Когда версия пакета увеличивается, пакет может быть выделен для миграции с этим типом задания.  

 Этот тип задания аналогичен типу "Миграция объектов" за исключением того, что при выборе объектов для миграции можно выбрать только те объекты, которые были обновлены после выполнения предыдущего задания миграции.   

 При выборе этого типа задания в качестве режима разрешения конфликтов на странице **Параметры** мастера создания задания миграции задается перезапись ранее перенесенных объектов. Эту настройку нельзя изменить.  

> [!NOTE]  
>  Такое задание миграции может определять не только вручную обновленные пользователями объекты, но и объекты, автоматически обновленные в исходной иерархии.  
