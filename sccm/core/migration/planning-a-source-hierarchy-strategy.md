---
title: "Стратегия для исходных иерархий | Документы Майкрософт"
description: "Настройте исходную иерархию и соберите данные с исходного сайта перед настройкой задания миграции System Center Configuration Manager."
ms.custom: na
ms.date: 1/3/2017
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology: configmgr-other
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 4800a800-66c8-4c35-aebe-e413a23790c1
caps.latest.revision: "6"
caps.handback.revision: "0"
author: Brenduns
ms.author: brenduns
manager: angrobe
ms.openlocfilehash: 0619de32f859f512ee1c9f5a9c83ef8d04a256ca
ms.sourcegitcommit: 51fc48fb023f1e8d995c6c4eacfda7dbec4d0b2f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2017
---
# <a name="plan-a-source-hierarchy-strategy-in-system-center-configuration-manager"></a>Планирование стратегии для исходных иерархий в System Center Configuration Manager

*Применимо к: System Center Configuration Manager (Current Branch)*

Прежде чем приступать к настройке задания миграции в среде System Center Configuration Manager, необходимо настроить исходную иерархию и собрать данные по крайней мере с одного исходного сайта в этой иерархии. В приведенных ниже разделах описывается процедура, которая позволит спланировать конфигурацию исходных иерархий и сайтов, а также определить способ, с помощью которого Configuration Manager собирает информацию с исходных сайтов в исходной иерархии. 

##  <a name="BKMK_Source_Hierarchies"></a> Исходные иерархии  
Исходная иерархия — это иерархия Configuration Manager, содержащая данные, которые требуется перенести. При настройке миграции и выборе исходной иерархии прежде всего необходимо указать сайт верхнего уровня этой иерархии. Он также называется исходным. Дополнительные сайты, с которых можно выполнить миграцию данных из исходной иерархии, также называются исходными сайтами.  

-   При настройке задания миграции для переноса данных из исходной иерархии Configuration Manager 2007 его необходимо настроить для переноса данных с одного или нескольких определенных исходных сайтов в исходной иерархии.  

-   При настройке задания миграции для переноса данных из исходной иерархии, где выполняется System Center 2012 Configuration Manager или более поздней версии, необходимо указать только сайт верхнего уровня.  

Одновременно можно настроить только одну исходную иерархию.  

-   При настройке новой исходной иерархии она автоматически становится текущей исходной иерархией, заменяя предыдущую.  

-   При настройке исходной иерархии необходимо указать сайт верхнего уровня исходной иерархии и учетные данные для Configuration Manager для подключения к поставщику SMS и базе данных этого исходного сайта.  

-   Configuration Manager использует эти учетные данные для запуска сбора данных, чтобы получить сведения об объектах и точках распространения с исходного сайта.  

-   В ходе процесса сбора данных выявляются дочерние сайты исходной иерархии.  

-   Если исходной иерархией является иерархия Configuration Manager 2007, можно настроить эти дополнительные сайты как исходные сайты с отдельными учетными данными для каждого исходного сайта.  

Хотя можно последовательно настроить множество исходных иерархий, миграция может быть одновременно активна только для одной иерархии.  

-   Если вы настроите дополнительную исходную иерархию до завершения миграции из текущей исходной иерархии, Configuration Manager отменит активные и приостановит запланированные задания миграции для текущей исходной иерархии.  

-   Вновь настроенная исходная иерархия становится текущей исходной иерархией, а изначальная исходная иерархия становится неактивной.  

-   После этого для новой исходной иерархии можно настроить учетные данные подключения, дополнительные исходные сайты и задания миграции.  

Если восстановить неактивную исходную иерархию и не выполнять действие **Очистить данные переноса**, будут отображаться ранее настроенные задания миграции для этой иерархии. Прежде чем продолжить миграцию из этой иерархии, необходимо повторно настроить учетные данные, чтобы соединиться с подходящими исходными сайтами в иерархии, а затем повторно запланировать все незавершенные задания миграции.  

> [!CAUTION]  
>  При переносе данных более чем из одной исходной иерархии каждая дополнительная иерархия должна содержать уникальный набор кодов сайтов.  

Дополнительные сведение о настройке исходных иерархий см. в разделе [Настройка исходных иерархий и исходных сайтов для миграции на System Center Configuration Manager](../../core/migration/configuring-source-hierarchies-and-source-sites-for-migration.md).  

##  <a name="BKMK_Source_Sites"></a> Исходные сайты  
 Исходные сайты — это сайты в исходной иерархии, содержащие данные, которые предполагается перенести. Сайт верхнего уровня исходной иерархии всегда является первым исходным сайтом. При сборе данных с первого сайта новой исходной иерархии в ходе миграции обнаруживаются сведения о дополнительных сайтах в этой иерархии.  

 После завершения сбора данных для начального исходного сайта, действия, которые следует предпринять далее, зависят от версии исходной иерархии.  

### <a name="source-sites-that-run-configuration-manager-2007-sp2"></a>Исходные сайты, на которых выполняется Configuration Manager 2007 с пакетом обновления 2 (SP2)  
 После сбора данных с первого исходного сайта в иерархии Configuration Manager 2007 с пакетом обновления 2 (SP2) нет необходимости выполнять настройку дополнительных исходных сайтов перед созданием заданий миграции. Прежде чем можно будет выполнить миграцию данных с дополнительных сайтов, необходимо настроить дополнительные сайты как исходные, и System Center Configuration Manager должен успешно собрать данные с этих сайтов.  

 Для сбора данных с других сайтов нужно отдельно настроить каждый сайт в качестве исходного. Для этого необходимо указать соответствующие учетные данные для подключения System Center Configuration Manager к поставщику SMS и базе данных каждого исходного сайта. После настройки учетных данных для исходного сайта начинается процесс сбора данных.  

 Если вы настраиваете дополнительные исходные сайты в исходной иерархии Configuration Manager 2007 с пакетом обновления 2 (SP2), их необходимо настраивать сверху вниз (сайты нижнего уровня настраиваются последними). Вы можете настроить исходные сайты в ветви иерархии в любое время, но прежде чем настраивать в качестве исходных сайтов дочерние сайты, необходимо настроить их родительский сайт.  

> [!NOTE]  
>  Только первичные сайты в рамках иерархии Configuration Manager 2007 с пакетом обновления 2 (SP2) поддерживают миграцию.  

### <a name="source-sites-that-run-system-center-2012-configuration-manager-or-later"></a>Исходные сайты, на которых выполняется System Center 2012 Configuration Manager или более поздней версии  
 После сбора данных с первоначального исходного сайта в иерархии System Center 2012 Configuration Manager или более поздней версии нет необходимости настраивать дополнительные исходные сайты в этой исходной иерархии. Это связано с тем, что в отличие от Configuration Manager 2007 эти версии Configuration Manager используют общую базу данных, которая позволяет определить, а затем перенести все доступные объекты с первоначального исходного сайта.  

 При настройке учетных записей доступа для сбора данных может потребоваться предоставить **учетной записи поставщика SMS исходного сайта** доступ к нескольким компьютерам в исходной иерархии. Это может потребоваться в том случае, если исходные сайты поддерживают несколько экземпляров поставщика SMS, каждый из которых находится на отдельном компьютере. Когда начинается сбор данных, сайт верхнего уровня конечной иерархии обращается к сайту верхнего уровня исходной иерархии для идентификации расположений поставщика SMS для этого сайта. Идентифицируется только первый экземпляр поставщика SMS. Если при сборе данных не удается получить доступ к поставщику SMS в указанном месте, происходит сбой и процесс не пытается подключиться к другим компьютерам, на которых работает экземпляр поставщика SMS для этого сайта.  

##  <a name="BKMK_Data_Gathering"></a> Сбор данных  
 Сразу после задания исходной иерархии, настройки учетных данных для каждого дополнительного исходного сайта в исходной иерархии или создания общих точек распространения для исходного сайта Configuration Manager начинает собирать данные с исходного сайта.  

 Сбор данных затем повторяется в соответствии с простым расписанием, что обеспечивает синхронизацию изменений, вносимых в данные в исходном сайте. По умолчанию процесс повторяется каждые четыре часа. Расписание этого цикла можно изменить на странице **Свойства** исходного сайта. Первоначальный процесс сбора данных подразумевает проверку всех объектов в базе данных Configuration Manager и может занять некоторое время. Последующие процессы сбора данных определяют только изменения в данных и занимают гораздо меньше времени.  

 Чтобы выполнить сбор данных, сайт верхнего уровня конечной иерархии подключается к поставщику SMS и базе данных исходного сайта, чтобы получить список объектов и точек распространения. Эти соединения используют учетные записи для доступа к исходному сайту. Дополнительные сведения о конфигурации, необходимой для сбора данных, см. в разделе [Необходимые условия для миграции в System Center Configuration Manager](../../core/migration/prerequisites-for-migration.md).  

 Запускать и останавливать процесс сбора данных можно с помощью действий **Выполнить сбор данных** и **Остановить сбор данных** в консоли Configuration Manager.  

 Если вы использовали действие **Остановить сбор данных** для исходного сайта, чтобы возобновить сбор данных с этого сайта, учетные данные для него потребуется настроить повторно. Пока исходный сайт не будет настроен заново, Configuration Manager не сможет определять новые объекты или изменения, внесенные в ранее перенесенные объекты.  

> [!NOTE]  
>  Прежде чем развернуть автономный первичный сайт в иерархии с сайтом центра администрирования, необходимо остановить сбор данных. Сбор данных можно перенастроить после завершения расширения сайта.  

### <a name="gather-data-now"></a>Выполнить сбор данных  
 После выполнения первоначального сбора данных для сайта этот процесс повторяется, чтобы выявить объекты, которые были обновлены со времени последнего цикла сбора данных. Кроме того, действие **Выполнить сбор данных** в консоли Configuration Manager можно использовать для немедленного запуска процесса и сброса времени начала следующего цикла.  

 После успешного завершения процесса сбора данных для исходного сайта можно предоставить общий доступ к точкам распространения с исходного сайта и настроить задания миграции для переноса данных с сайта. Сбор данных — это циклический процесс, который продолжается, пока не будет изменена исходная иерархия или применено действие **Остановить сбор данных** для данного сайта.  

### <a name="stop-gathering-data"></a>Остановить сбор данных  
 Действие **Остановить сбор данных** позволяет остановить процесс сбора данных для исходного сайта, когда больше не требуется, чтобы Configuration Manager определял новые или измененные объекты этого сайта. Это действие также предотвращает представление Configuration Manager клиентам в конечной иерархии исходных общих точек распространения для этого сайта в качестве расположений перенесенного содержимого.  

 Чтобы прекратить сбор данных со всех исходных сайтов, необходимо выполнить действие **Остановить сбор данных** для исходных сайтов нижнего уровня, а затем повторить этот процесс для каждого родительского сайта. Сайт верхнего уровня исходной иерархии должен быть последним сайтом, на котором прекращается сбор данных. Прежде чем выполнять остановку сбора данных для родительского сайта, это действие необходимо выполнить для всех его дочерних сайтов. Как правило, сбор данных прекращают, только когда все будет готово к завершению процесса миграции.  

 После завершения сбора данных для исходного сайта ранее собранные сведения об объектах и коллекциях данного сайта остаются доступными для использования при настройке новых заданий миграции. Тем не менее новые объекты или коллекции, а также изменения в существующих объектах не отображаются. Если изменить настройку исходного сайта и снова запустить сбор данных, на экран будут выведены сведения и данные о состоянии ранее перенесенных объектов.  
