---
title: "Автоматическое развертывание обновлений программного обеспечения | Документы Майкрософт"
description: "Автоматическое развертывание обновлений программного обеспечения путем добавления новых обновлений в группу обновлений с активным развертыванием или с помощью правил автоматического развертывания (ADR)."
keywords: 
author: dougeby
ms.author: dougeby
manager: angrobe
ms.date: 12/07/2016
ms.topic: article
ms.prod: configuration-manager
ms.service: 
ms.technology: configmgr-sum
ms.assetid: b27682de-adf8-4edd-9572-54886af8f7fb
ms.openlocfilehash: 804a9d7a32cfbdb498c6748c5d99a1874261c231
ms.sourcegitcommit: 51fc48fb023f1e8d995c6c4eacfda7dbec4d0b2f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2017
---
#  <a name="BKMK_AutoDeploy"></a> Автоматическое развертывание обновлений программного обеспечения  

*Применимо к: System Center Configuration Manager (Current Branch)*

 Можно автоматически развертывать обновления программного обеспечения, добавляя новые обновления в группу обновлений, связанную с активным развертыванием, или используя правила автоматического развертывания (ADR). Обычно правила ADR используются для ежемесячных обновлений программного обеспечения (обычно во второй вторник каждого месяца) и для управления обновлениями определений. Если вам нужна помощь в определении подходящего метода развертывания, см. сведения в статье [Развертывание обновлений программного обеспечения](deploy-software-updates.md).

##  <a name="BKMK_AddUpdatesToExistingGroup"></a> Добавление обновлений программного обеспечения в развернутую группу обновлений  
После создания и развертывания группы обновлений программного обеспечения можно добавлять в нее обновления, и они будут автоматически развертываться.  

> [!IMPORTANT]  
>  При добавлении обновлений программного обеспечения в существующую группу обновлений, которая уже была развернута, добавление обновлений может занять несколько минут.  

Выполните следующую процедуру, чтобы добавить обновления программного обеспечения в существующую группу обновлений.  

#### <a name="to-add-software-updates-to-an-existing-software-update-group"></a>Добавление обновлений программного обеспечения в существующую группу обновлений  

1.  В консоли Configuration Manager последовательно выберите **Библиотека программного обеспечения** > **Обзор** > **Обновления программного обеспечения**.  

2.  Выберите обновления ПО, которые нужно добавить в новую группу обновлений.  

3.  На вкладке **Главная** в группе **Обновление** щелкните **Изменить членство**.  

4.  Выберите группу обновлений программного обеспечения, в которую нужно добавить обновления в качестве членов группы.  

5.  Щелкните узел **Группы обновлений программного обеспечения** , чтобы просмотреть группу обновлений.  

6.  Щелкните группу обновлений программного обеспечения, а затем на вкладке **Главная** в группе **Обновление** щелкните **Показать состав** , чтобы отобразить список обновлений программного обеспечения в группе.  

##  <a name="BKMK_CreateAutomaticDeploymentRule"></a> Создание правила автоматического развертывания (ADR)  
Можно автоматически утверждать и развертывать обновления программного обеспечения с помощью правил автоматического развертывания. Вы можете иметь правило, добавляющее обновления программного обеспечения в новую группу обновлений программного обеспечения при каждом выполнении правила или добавляющее обновления программного обеспечения в существующую группу. Когда правило выполняется и добавляет обновления программного обеспечения в существующую группу, это правило удаляет все обновления программного обеспечения из этой группы, а затем добавляет обновления программного обеспечения, соответствующие критериям, которые вы задали для группы. Например, чтобы запускать правило автоматического развертывания для поиска недавно выпущенных обновлений программного обеспечения каждый день и развертывать их на клиентах, необходимо выбрать вариант создания новой группы обновлений ПО вместо добавления обновлений в существующую группу.  

> [!WARNING]  
>  Перед первым созданием правила автоматического развертывания убедитесь, что на сайте выполнена синхронизация обновлений программного обеспечения. Этот особенно важно при запуске Configuration Manager на языке, отличном от английского, поскольку перед первой синхронизацией классы обновлений отображаются на английском языке, а после синхронизации обновлений — на языке локализации. Правила, созданные до синхронизации обновлений программного обеспечения, могут неправильно работать после синхронизации из-за несовпадения текстовых строк.  

 Чтобы создать правило автоматического развертывания, выполните следующую процедуру.  

#### <a name="to-create-an-adr"></a>Создание правила автоматического развертывания  

1.  В консоли Configuration Manager последовательно выберите **Библиотека программного обеспечения****Обзор** > **Обновления программного обеспечения** > **Правила автоматического развертывания**.  

2.  На вкладке **Главная** в группе **Создать** щелкните **Создать правило автоматического развертывания**. Будет запущен мастер создания правил автоматического развертывания.  

3.  На странице **Общие** настройте следующие параметры.  

    -   **Имя:**укажите имя правила автоматического развертывания. Имя должно быть уникальным, отражать цель правила и отличать его от других правил на сайте Configuration Manager.  

    -   **Описание:**введите описание правила автоматического развертывания. Описание содержит краткую сводку правила и прочие важные сведения, помогающие выбрать данное правило среди других на сайте Configuration Manager. Описание — необязательное поле, его длина не может превышать 256 символов, по умолчанию оно остается пустым.  

    -   **Выбрать шаблон развертывания**: укажите, следует ли применить сохраненный ранее шаблон развертывания. Вы можете настроить шаблон развертывания, включив в него несколько стандартных свойств обновления программного обеспечения, которые затем можно использовать при создании правил автоматического развертывания. Эти шаблоны помогают обеспечить единообразие схожих развертываний и сэкономить время.  

         В мастере правил автоматического развертывания можно выбрать один из нескольких встроенных шаблонов развертывания программного обеспечения. Шаблон **Обновления определений** содержит общие параметры, используемые при развертывании обновлений для определений ПО. Шаблон **Вторник установки исправлений** содержит общие параметры, используемые в ходе ежемесячного цикла развертывания обновлений ПО.  

    -   **Коллекция**: указывает коллекцию целевых объектов для развертывания. Члены коллекции получают обновления программного обеспечения, заданные в развертывании.  

    -   Укажите, следует ли добавить обновления ПО в новую или существующую группу обновлений. В большинстве случаев при выполнении правила автоматического развертывания создается новая группа обновлений ПО. Однако вы можете выбрать использование существующей группы, если предусматривается запуск правила по более агрессивному графику. Например, если правило обновления определений выполняется ежедневно, обновления ПО нужно добавить в существующую группу обновлений.  

    -   **Активировать развертывание после выполнения этого правила**: укажите, следует ли включить развертывание обновления после выполнения правила автоматического развертывания. О данной спецификации учтите следующее:  

        -   При включении развертывания те обновления ПО, которые соответствуют заданным в правиле условиям, добавляются в группу обновлений; содержимое обновлений загружается (если оно еще не загружено) и копируется в точки распространения, а затем обновления развертываются на клиентских устройствах в коллекции целевых объектов.  

        -   Если развертывание не включено, то все обновления ПО, удовлетворяющие определенному в правиле критерию, добавляются в группу обновления ПО. Кроме того, производится настройка политики развертывания обновлений ПО, однако обновления ПО не загружаются и не развертываются на клиентах. Это дает возможность подготовиться к развертыванию обновлений ПО, проверить применимость обновлений, соответствующих условиям, а затем включать развертывание позднее.  

4.  На странице "Параметры развертывания" настройте следующие параметры.  

    -   **Использовать пробуждение по локальной сети, чтобы пробуждать клиенты для обязательного развертывания**: указывает, следует ли использовать режим пробуждения по локальной сети к крайнему сроку, чтобы отправлять пакеты пробуждения на компьютеры, для которых требуется одно или несколько обновлений программного обеспечения из данного развертывания. Любые компьютеры, находящиеся в спящем режиме на момент окончания крайнего срока установки, будут выведены из спящего режима, чтобы могла начаться установка программных обновлений. Если находящимся в спящем режиме клиентам не требуются никакие обновления программного обеспечения в ходе развертывания, то эти клиенты не запускаются. По умолчанию этот параметр отключен.  

        > [!WARNING]  
        >  Для использования этой функции необходимо включить поддержку пробуждения по локальной сети на компьютерах и в сетях.  

    -   **Уровень детализации**: выберите уровень детализации для сообщений о состоянии, передаваемых клиентскими компьютерами.  

        > [!IMPORTANT]  
        >  Когда вы развертываете обновления для определений, установите уровень подробности отчетов **Только ошибки** , чтобы клиенты передавали только свои сообщения о состоянии в том случае, если обновление определений не удалось доставить клиенту. В противном случае клиенты будут передавать большое количество сообщений о состоянии, что может негативно повлиять на производительность сервера сайта.  

    -   **Условия лицензии**: указывает, следует ли автоматически развертывать обновления ПО, с которыми связаны условия лицензии. Некоторые обновления ПО, например, пакеты обновления, включают условия лицензии. При автоматическом развертывании обновлений ПО условия лицензии не отображаются на экране и пользователю не предлагается их принять. Можно автоматически развертывать все обновления ПО независимо от наличия условий лицензии или же развертывать лишь те обновления, которые не сопровождаются условиями лицензии.  

        > [!NOTE]  
        >  Чтобы просмотреть условия лицензии обновления, выберите обновление в узле **Все обновления программного обеспечения** в рабочей области **Библиотека программного обеспечения** , а затем на вкладке **Главная** в группе **Обновление** нажмите кнопку **Ознакомиться с лицензией**.  
        >   
        >  Чтобы найти обновления ПО с лицензионными соглашениями, можно добавить столбец **Условия лицензии** в область результатов в узле **Все обновления программного обеспечения** , а затем щелкнуть заголовок этого столбца, чтобы отсортировать его по обновлениям с условиями лицензии.  

5.  На странице "Обновления программного обеспечения" настройте условия обновлений, получаемых правилом автоматического развертывания и добавляемых в группу обновлений.  

    > [!IMPORTANT]  
    >  Одно правило автоматического развертывания может содержать до 1000 обновлений ПО. Чтобы убедиться, что заданное на этой странице условие получает менее 1000 обновлений, можно применить такие же условия в узле **Все обновления программного обеспечения** в рабочей области **Библиотека программного обеспечения** .  

    > [!NOTE]
    > Начиная с версии Configuration Manager 1610 можно выполнять фильтрацию по размеру содержимого для обновлений программного обеспечения в правилах автоматического развертывания. Например, можно задать для фильтра **Размер содержимого (КБ)** значение **< 2048**, чтобы скачивать только обновления программного обеспечения, размер которых не превышает 2 МБ. Этот фильтр препятствует автоматическому скачиванию больших обновлений программного обеспечения, чтобы более эффективно поддерживать упрощенное обслуживание старых ОС Windows при ограниченной пропускной способности сети. Дополнительные сведения см. в статье [Configuration Manager и упрощенное обслуживание более старых версий ОС Windows](https://blogs.technet.microsoft.com/enterprisemobility/2016/10/07/configuration-manager-and-simplified-windows-servicing-on-down-level-operating-systems/).

6.  На странице "Расписание оценки" укажите, следует ли включить запуск правила автоматического развертывания по расписанию. После включения нажмите кнопку **Настроить** , чтобы задать регулярное расписание.  

    > [!IMPORTANT]  
    >  Будет показано расписание синхронизации точки обновления программного обеспечения, чтобы помочь определить частоту расписания оценки. Не следует устанавливать в расписании оценки частоту, превышающую частоту синхронизации обновлений ПО. Настройка времени запуска в расписании зависит от местного времени компьютера, на котором запущена консоль Configuration Manager.  

    > [!NOTE]  
    >  Можно вручную запустить правило автоматического развертывания. Для этого на вкладке **Главная** в группе **Правило автоматического развертывания** выберите правило и щелкните **Выполнить** . Перед тем как запускать правило автоматического развертывания вручную, убедитесь, что после предыдущего запуска правила была выполнена синхронизация обновлений ПО.  

    > [!IMPORTANT]  
    >  Оценка правил автоматического развертывания может запускаться не чаще трех раз в день.  

7.  На странице "Расписание развертывания" настройте следующие параметры.  

    -   **Оценка расписания**: укажите, как Configuration Manager следует оценивать доступное время и время установки (с помощью времени в формате UTC или местного времени на компьютере, на котором работает консоль Configuration Manager).  

        > [!NOTE]  
        >  Если выбрать местное время, а затем **Как можно быстрее** для параметра **Доступное время программного обеспечения** или **Крайний срок установки**, текущее время на компьютере, где запущена консоль Configuration Manager, будет использоваться, чтобы узнать о доступности обновлений или их установке на клиенте. Если клиент находится в другом часовом поясе, эти действия произойдут, когда время клиента достигнет времени оценки.  

    -   **Время доступности программного обеспечения**: выберите один из следующих параметров, чтобы указать, в какое время обновления программного обеспечения будут доступны клиентам:  

        -   **Как можно скорее**: выберите этот параметр, чтобы обновления программного обеспечения становились доступными для развертывания на компьютерах клиентов как можно скорее. Если вы выбрали этот параметр при создании развертывания, то Configuration Manager обновляет клиентскую политику. Затем, при следующем цикле опроса клиентских политик, клиенты получают сведения о наличии развертывания и могут получить доступные для установки обновления.  

        -   **Определенное время**: выберите этот параметр, чтобы обновления программного обеспечения становились доступными для развертывания на клиентах в определенный день и время. Если вы включили этот параметр при создании развертывания, то Configuration Manager обновляет клиентскую политику. Затем, при следующем цикле опроса клиентских политик, клиенты получают сведения о наличии развертывания. Однако обновления ПО в этом развертывании недоступны для установки на клиентах до наступления настроенного дня и времени.  

    -   **Крайний срок установки**: выберите один из следующих параметров, чтобы указать крайний срок установки для обновлений программного обеспечения в развертывании.  

        -   **Как можно скорее**: выберите этот параметр, чтобы автоматически устанавливать обновления программного обеспечения в развертывании как можно скорее.  

        -   **В заданное время**: выберите этот параметр, чтобы автоматически устанавливать обновления программного обеспечения в развертывании в определенный день и время. Configuration Manager определяет крайний срок установки обновлений ПО путем добавления настроенного интервала **Конкретное время** к значению параметра **Время доступности программного обеспечения**.  

        > [!NOTE]  
        >  Фактический срок установки равен сумме отображаемого времени крайнего срока и произвольного отрезка времени длительностью до 2 часов. Это позволяет снизить нагрузку, которая возникла бы, если бы все клиентские компьютеры в коллекции назначения начали устанавливать обновления программного обеспечения одновременно.  
        >   
        >  Можно настроить клиентский параметр **Агент компьютера** , присвоив ему значение **Запретить случайный выбор срока** , чтобы отключить случайный выбор срока задержки при установке обязательных обновлений ПО. Дополнительные сведения см. в статье [Computer Agent](../../core/clients/deploy/about-client-settings.md#computer-agent).  

8. На странице "Взаимодействие с пользователем" настройте следующие параметры.  

    -   **Уведомления пользователя**: укажите, следует ли отображать обновления программного обеспечения в центре программного обеспечения на клиентских компьютерах в настроенное **время доступности программного обеспечения** , а также следует ли отображать на клиентских компьютерах уведомления для пользователей.  

    -   **Действие при достижении крайнего срока**: укажите, что должно происходить при достижении крайнего срока развертывания обновлений программного обеспечения. Укажите, следует ли устанавливать обновления программного обеспечения в развертывании. Также укажите, следует ли выполнять перезапуск системы после установки обновлений программного обеспечения, независимо от настроенного периода обслуживания. Дополнительные сведения о периодах обслуживания см. в разделе [Использование периодов обслуживания](../../core/clients/manage/collections/use-maintenance-windows.md).  

    -   **Действие при перезапуске устройства**: укажите, следует ли блокировать перезапуск систем на серверах и рабочих станциях после установки обновлений программного обеспечения, для завершения установки которых требуется перезапуск.  

        > [!IMPORTANT]  
        >  Блокирование перезагрузки системы может быть полезно в серверных средах или в случаях, если не нужно, чтобы компьютеры, на которые устанавливаются обновления ПО, перезагружались по умолчанию. Однако выполнение этого действия может перевести компьютеры в небезопасное состояние, в то время как разрешение принудительного перезапуска позволяет гарантировать незамедлительное завершение установки обновлений программного обеспечения.  

    -   **Обработка фильтра записи для устройств Windows Embedded**: при развертывании обновлений программного обеспечения на устройствах под управлением Windows Embedded, на которых включены фильтры записи, можно указать необходимость установки обновлений во временный оверлей, а изменения применить позже или же сделать это при наступлении крайнего срока установки или в течение периода обслуживания. При фиксации изменений по наступлении крайнего срока установки или в течение периода обслуживания требуется перезагрузка, и изменения сохраняются на устройстве.  

        > [!NOTE]  
        >  При развертывании обновления программного обеспечения на устройство Windows Embedded убедитесь, что устройство входит в коллекцию, для которой настроено окно обслуживания.  

    - **Поведение цикла повторной оценки для развертывания обновлений ПО после перезапуска**. Начиная с версии Configuration Manager 1606 выберите этот параметр, чтобы клиенты выполняли проверку соответствия обновлений ПО сразу после установки обновлений ПО и перезапуска. Это позволяет клиенту выполнить проверку наличия дополнительных обновлений программного обеспечения, которые стали применимыми после перезагрузки клиента, и которые также можно установить (и обеспечить соответствие) в тот же период обслуживания.

9. На странице "Оповещения" укажите, каким образом Configuration Manager и System Center Operations Manager будут создавать оповещения для этого развертывания.  

    > [!NOTE]  
    >  Можно просмотреть недавние предупреждения об обновлениях в узле **Обновления программного обеспечения** рабочей области **Библиотека программного обеспечения** .  

10. На странице "Параметры загрузки" настройте следующие параметры.  

    - Если клиент подключен к медленной сети или использует резервное расположение содержимого, укажите, следует ли клиенту загружать и устанавливать обновления ПО.  

    - Укажите, следует ли клиенту загружать и устанавливать обновления программного обеспечения с резервной точки распространения, когда содержимое для обновлений программного обеспечения недоступно на предпочитаемой точке распространения.  

    - **Разрешить клиентам использовать содержимое совместно с другими клиентами из той же подсети**: укажите, следует ли включить BranchCache для загрузки содержимого. Дополнительные сведения о BranchCache см. в статье [Концепции управления содержимым](../../core/plan-design/hierarchy/fundamental-concepts-for-content-management.md#branchcache).  

    - **Если обновления программного обеспечения недоступны в точке распространения в текущем или соседнем узле либо узле группы, скачайте содержимое из Центра обновления Майкрософт**. Выберите этот параметр, чтобы скачать на клиенты, которые не подключены к интрасети, обновления программного обеспечения из центра обновления Майкрософт, если эти обновления недоступны в точках распространения. Клиенты, подключенные к Интернету, всегда могут обратится к Центру обновления Майкрософт, чтобы получить содержимое обновлений программного обеспечения.

    - Укажите, следует ли разрешать клиентам загрузку после наступления крайнего срока установки, если клиенты используют интернет-соединения с поддержкой учета трафика. Иногда поставщики интернет-услуг взимают плату по объему передаваемых данных, если вы используете лимитное подключение к Интернету.  

    > [!NOTE]  
    >  Клиенты запрашивают расположение содержимого для обновлений программного обеспечения в развертывании у точки управления. Режим работы в ходе загрузки изменяется в зависимости от настройки точки распространения, пакета развертывания и параметров на этой странице. Дополнительные сведения см. в статье [Сценарии расположения источника содержимого](../../core/plan-design/hierarchy/content-source-location-scenarios.md).  

11. На странице "Пакет развертывания" выберите существующий пакет развертывания или настройте следующие параметры, чтобы создать новый пакет развертывания.  

    1.  **Имя**: укажите имя пакета развертывания. Это имя должно быть уникальным и служить для описания содержимого пакета. Его длина ограничена 50 символами.  

    2.  **Описание**: укажите описание, содержащее сведения о пакете развертывания. Его длина ограничена 127 символами.  

    3.  **Исходные файлы пакета**: расположение исходных файлов обновления программного обеспечения.  Необходимо ввести сетевой путь к расположению источника, например **\\\сервер\имя_общей_папки\путь**, или нажать кнопку **Обзор**, чтобы найти сетевое расположение. Перед переходом на следующую страницу необходимо создать общую папку для исходных файлов пакета развертывания.  

        > [!NOTE]  
        >  Указанное расположение исходных файлов пакета развертывания не может быть использовано другим пакетом развертывания.  

        > [!IMPORTANT]  
        >  Учетной записи компьютера поставщика SMS и пользователю, работающему с мастером загрузки обновлений программного обеспечения, требуются разрешения NTFS на **Запись** для расположения загрузки. Необходимо тщательно ограничить доступ к расположению загрузки, чтобы снизить риск подмены злоумышленниками исходных файлов обновлений ПО.  

        > [!IMPORTANT]  
        >  Местоположение источника пакета можно изменить в свойствах пакета развертывания после того, как Configuration Manager создаст пакет развертывания. Однако в этом случае необходимо сначала скопировать содержимое из исходного местоположения оригинального пакета в новое местоположение источника пакета.  

    4.  **Приоритет передачи**: укажите приоритет передачи для пакета развертывания. Configuration Manager использует приоритет передачи для пакета развертывания при его передаче в точки распространения. Передача пакетов развертывания осуществляется в порядке приоритета: "Высокий", "Средний" и "Низкий". Пакеты с одинаковым приоритетом передаются в том порядке, в котором они были созданы. Если очередь пакетов отсутствует, обработка пакета выполняется незамедлительно, причем независимо от уровня приоритета.  

12. На странице "Точки распространения" укажите точки распространения или группы точек распространения для размещения файлов обновления программного обеспечения. Дополнительные сведения о точках распространения см. в разделе [Distribution point configurations](../../core/servers/deploy/configure/install-and-configure-distribution-points.md#bkmk_configs).  

    > [!NOTE]  
    >  Этот страница доступна только при создании нового пакета развертывания обновлений программного обеспечения.  

13. На странице "Расположение загрузки" укажите, следует ли загружать файлы обновления программного обеспечения из Интернета или из локальной сети. Настройте следующие параметры.  

    -   **Загружать обновления программного обеспечения из Интернета**: выберите этот параметр, чтобы загружать обновления программного обеспечения из заданного расположения в Интернете. Этот параметр выбран по умолчанию.  

    -   **Загружать обновления программного обеспечения из расположения в локальной сети**: выберите этот параметр, чтобы загружать обновления программного обеспечения из локальной папки или общей папки. Выберите этот параметр, если компьютер, на котором выполняется мастер, не имеет доступа к Интернету. Используя любой компьютер, подключенный к Интернету, можно загрузить обновления ПО и сохранить их в папке в локальной сети, доступной для компьютера, на котором запущен мастер.  

14. На странице "Выбор языка" выберите языки, для которых следует загрузить выбранные обновления программного обеспечения. Обновления программного обеспечения загружаются только в том случае, если они доступны на выбранных языках. Обновления программного обеспечения, не зависящие от языка, загружаются в любом случае. По умолчанию мастер выбирает языки, настроенные вами в свойствах точки обновления программного обеспечения. Перед переходом к следующей странице необходимо выбрать по крайней мере один язык. Если ни один из выбранных языков не поддерживается данным обновлением, это обновление не будет загружено.  

15. На странице "Сводка" проверьте параметры. Чтобы сохранить параметры в шаблон развертывания, нажмите кнопку **Сохранить как шаблон**, введите имя и выберите параметры, которые нужно включить в шаблон, а затем нажмите кнопку **Сохранить**. Чтобы изменить настроенный параметр, щелкните соответствующую страницу мастера и измените параметр.  

    > [!NOTE]  
    >  Шаблон имени может состоять из буквенно-цифровых символов ASCII, а также из **\\** (косая черта влево) или **‘** (одиночные кавычки).  

16. Нажмите кнопку **Далее** , чтобы создать правило автоматического развертывания.  

 После завершения работы мастера запускается правило автоматического развертывания. Оно добавляет обновления ПО, удовлетворяющие указанным критериям, в группу обновлений ПО, загружает обновления ПО в библиотеку на сервере сайта, распространяет обновления ПО среди настроенных точек распространения, а затем развертывает группу обновлений ПО на клиенты в целевой коллекции.  

##  <a name="BKMK_AddDeploymentToADR"></a> Добавление нового развертывания в существующее правило автоматического развертывания  
 После создания правила автоматического развертывания к нему можно добавить дополнительные развертывания. Это позволяет управлять сложным процессом развертывания различных обновлений для разных коллекций. Каждое новое развертывание имеет полный набор функций и средств мониторинга развертывания.  

#### <a name="to-add-a-new-deployment-to-an-existing-adr"></a>Добавление нового развертывания в существующее правило автоматического развертывания  

1.  В консоли Configuration Manager последовательно выберите **Библиотека программного обеспечения** > **Обзор** > **Обновления программного обеспечения** > **Правила автоматического развертывания**, а затем выберите нужное правило.  

2.  На вкладке **Главная** в группе **Правило автоматического развертывания** щелкните **Добавить развертывание**. Открывается мастер добавления развертывания.  

3.  На странице **Коллекция** настройте следующие параметры:  

    -   **Коллекция**: указывает коллекцию целевых объектов для развертывания. Члены коллекции получают обновления программного обеспечения, заданные в развертывании.  

    -   **Активировать развертывание после выполнения этого правила**: укажите, следует ли включить развертывание обновления после выполнения правила автоматического развертывания. О данной спецификации учтите следующее:  

        -   При включении развертывания те обновления ПО, которые соответствуют заданным в правиле условиям, добавляются в группу обновлений; содержимое обновлений загружается (если оно еще не загружено) и копируется в точки распространения, а затем обновления развертываются на клиентских устройствах в коллекции целевых объектов.  

        -   Если развертывание не включено, то все обновления ПО, удовлетворяющие определенному в правиле критерию, добавляются в группу обновления ПО. Кроме того, производится настройка политики развертывания обновлений ПО, однако обновления ПО не загружаются и не развертываются на клиентах. Это дает возможность подготовиться к развертыванию обновлений ПО, проверить применимость обновлений, соответствующих условиям, а затем включать развертывание позднее.  

4.  На странице "Параметры развертывания" настройте следующие параметры.  

    -   **Использовать пробуждение по локальной сети, чтобы пробуждать клиенты для обязательного развертывания**: указывает, следует ли использовать режим пробуждения по локальной сети к крайнему сроку, чтобы отправлять пакеты пробуждения на компьютеры, для которых требуется одно или несколько обновлений программного обеспечения из данного развертывания. Любые компьютеры, находящиеся в спящем режиме на момент окончания крайнего срока установки, будут выведены из спящего режима, чтобы могла начаться установка программных обновлений. Если находящимся в спящем режиме клиентам не требуются никакие обновления программного обеспечения в ходе развертывания, то эти клиенты не запускаются. По умолчанию этот параметр отключен.  

        > [!WARNING]  
        >  Для использования этой функции необходимо включить поддержку пробуждения по локальной сети на компьютерах и в сетях.  

    -   **Уровень детализации**: выберите уровень детализации для сообщений о состоянии, передаваемых клиентскими компьютерами.  

        > [!IMPORTANT]  
        >  Когда вы развертываете обновления для определений, установите уровень подробности отчетов **Только ошибки** , чтобы клиенты передавали только свои сообщения о состоянии в том случае, если обновление определений не удалось доставить клиенту. В противном случае клиенты будут передавать большое количество сообщений о состоянии, что может негативно повлиять на производительность сервера сайта.  

5.  На странице "Расписание развертывания" настройте следующие параметры.  

    -   **Оценка расписания**: укажите, как Configuration Manager следует оценивать доступное время и время установки (с помощью времени в формате UTC или местного времени на компьютере, на котором работает консоль Configuration Manager).  

        > [!NOTE]  
        >  Если выбрать местное время, а затем **Как можно быстрее** для параметра **Доступное время программного обеспечения** или **Крайний срок установки**, текущее время на компьютере, где запущена консоль Configuration Manager, будет использоваться, чтобы узнать о доступности обновлений или их установке на клиенте. Если клиент находится в другом часовом поясе, эти действия произойдут, когда время клиента достигнет времени оценки.  

    -   **Время доступности программного обеспечения**: выберите один из следующих параметров, чтобы указать, в какое время обновления программного обеспечения будут доступны клиентам:  

        -   **Как можно скорее**: выберите этот параметр, чтобы обновления программного обеспечения становились доступными для развертывания на компьютерах клиентов как можно скорее. Если вы выбрали этот параметр при создании развертывания, то Configuration Manager обновляет клиентскую политику. Затем, при следующем цикле опроса клиентских политик, клиенты получают сведения о наличии развертывания и могут получить доступные для установки обновления.  

        -   **Определенное время**: выберите этот параметр, чтобы обновления программного обеспечения становились доступными для развертывания на клиентах в определенный день и время. Если вы включили этот параметр при создании развертывания, то Configuration Manager обновляет клиентскую политику. Затем, при следующем цикле опроса клиентских политик, клиенты получают сведения о наличии развертывания. Однако обновления ПО в этом развертывании недоступны для установки на клиентах до наступления настроенного дня и времени.  

    -   **Крайний срок установки**: выберите один из следующих параметров, чтобы указать крайний срок установки для обновлений программного обеспечения в развертывании.  

        -   **Как можно скорее**: выберите этот параметр, чтобы автоматически устанавливать обновления программного обеспечения в развертывании как можно скорее.  

        -   **В заданное время**: выберите этот параметр, чтобы автоматически устанавливать обновления программного обеспечения в развертывании в определенный день и время. Configuration Manager определяет крайний срок установки обновлений ПО путем добавления настроенного интервала **Конкретное время** к значению параметра **Время доступности программного обеспечения**.  

        > [!NOTE]  
        >  Фактический срок установки равен сумме отображаемого времени крайнего срока и произвольного отрезка времени длительностью до 2 часов. Это позволяет снизить нагрузку, которая возникла бы, если бы все клиентские компьютеры в коллекции назначения начали устанавливать обновления программного обеспечения одновременно.  
        >   
        >  Можно настроить клиентский параметр **Агент компьютера** , присвоив ему значение **Запретить случайный выбор срока** , чтобы отключить случайный выбор срока задержки при установке обязательных обновлений ПО. Дополнительные сведения см. в статье [Computer Agent](../../core/clients/deploy/about-client-settings.md#computer-agent).  

6.  На странице "Взаимодействие с пользователем" настройте следующие параметры.  

    -   **Уведомления пользователя**: укажите, следует ли отображать обновления программного обеспечения в центре программного обеспечения на клиентских компьютерах в настроенное **время доступности программного обеспечения** , а также следует ли отображать на клиентских компьютерах уведомления для пользователей.  

    -   **Действие при достижении крайнего срока**: укажите, что должно происходить при достижении крайнего срока развертывания обновлений программного обеспечения. Укажите, следует ли устанавливать обновления программного обеспечения в развертывании. Также укажите, следует ли выполнять перезапуск системы после установки обновлений программного обеспечения, независимо от настроенного периода обслуживания. Дополнительные сведения о периодах обслуживания см. в разделе [Использование периодов обслуживания](../../core/clients/manage/collections/use-maintenance-windows.md).  

    -   **Действие при перезапуске устройства**: укажите, следует ли блокировать перезапуск систем на серверах и рабочих станциях после установки обновлений программного обеспечения, для завершения установки которых требуется перезапуск.  

        > [!IMPORTANT]  
        >  Блокирование перезагрузки системы может быть полезно в серверных средах или в случаях, если не нужно, чтобы компьютеры, на которые устанавливаются обновления ПО, перезагружались по умолчанию. Однако выполнение этого действия может перевести компьютеры в небезопасное состояние, в то время как разрешение принудительного перезапуска позволяет гарантировать незамедлительное завершение установки обновлений программного обеспечения.  

    -   **Обработка фильтра записи для устройств Windows Embedded**: при развертывании обновлений программного обеспечения на устройствах под управлением Windows Embedded, на которых включены фильтры записи, можно указать необходимость установки обновлений во временный оверлей, а изменения применить позже или же сделать это при наступлении крайнего срока установки или в течение периода обслуживания. При фиксации изменений по наступлении крайнего срока установки или в течение периода обслуживания требуется перезагрузка, и изменения сохраняются на устройстве.  

        > [!NOTE]  
        >  При развертывании обновления программного обеспечения на устройство Windows Embedded убедитесь, что устройство входит в коллекцию, для которой настроено окно обслуживания.  

7.  На странице "Оповещения" укажите, каким образом Configuration Manager и System Center Operations Manager будут создавать оповещения для этого развертывания.  

    > [!WARNING]  
    >  Можно просмотреть недавние предупреждения об обновлениях в узле **Обновления программного обеспечения** рабочей области **Библиотека программного обеспечения** .  

8. На странице "Параметры загрузки" настройте следующие параметры.  

    - Если клиент подключен к медленной сети или использует резервное расположение содержимого, укажите, следует ли клиенту загружать и устанавливать обновления ПО.  

    - Укажите, следует ли клиенту загружать и устанавливать обновления программного обеспечения с резервной точки распространения, когда содержимое для обновлений программного обеспечения недоступно на предпочитаемой точке распространения.  

    - **Разрешить клиентам использовать содержимое совместно с другими клиентами из той же подсети**: укажите, следует ли включить BranchCache для загрузки содержимого. Дополнительные сведения о BranchCache см. в статье [Концепции управления содержимым](../../core/plan-design/hierarchy/fundamental-concepts-for-content-management.md#branchcache).  

    - **Если обновления программного обеспечения недоступны в точке распространения в текущем или соседнем узле либо узле группы, скачайте содержимое из Центра обновления Майкрософт**. Выберите этот параметр, чтобы скачать на клиенты, которые не подключены к интрасети, обновления программного обеспечения из центра обновления Майкрософт, если эти обновления недоступны в точках распространения. Клиенты, подключенные к Интернету, всегда могут обратится к Центру обновления Майкрософт, чтобы получить содержимое обновлений программного обеспечения.

    - Укажите, следует ли разрешать клиентам загрузку после наступления крайнего срока установки, если клиенты используют интернет-соединения с поддержкой учета трафика. Иногда поставщики интернет-услуг взимают плату по объему передаваемых данных, если вы используете лимитное подключение к Интернету.  

    > [!NOTE]  
    > Клиенты запрашивают расположение содержимого для обновлений программного обеспечения в развертывании у точки управления. Режим работы в ходе загрузки изменяется в зависимости от настройки точки распространения, пакета развертывания и параметров на этой странице. Дополнительные сведения см. в статье [Сценарии расположения источника содержимого](../../core/plan-design/hierarchy/content-source-location-scenarios.md).  

Дополнительные сведения о процессе развертывания см. в статье [Процесс развертывания обновлений программного обеспечения](../../sum/understand/software-updates-introduction.md#BKMK_DeploymentProcess).

## <a name="next-steps"></a>Дальнейшие действия
[Мониторинг обновлений программного обеспечения](monitor-software-updates.md)
