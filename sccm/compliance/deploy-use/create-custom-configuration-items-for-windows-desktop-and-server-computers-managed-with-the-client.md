---
title: "Создание элементов конфигурации для компьютеров с Windows под управлением клиентов в Configuration Manager | Документы Майкрософт"
description: "Управление параметрами компьютеров и серверов Windows с помощью настраиваемого элемента конфигурации \"Настольные компьютеры и серверы под управлением Windows\"."
ms.custom: na
ms.date: 11/18/2016
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology: configmgr-other
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 1eb2fcaf-acac-4388-9b31-6cccafacaabe
caps.latest.revision: "9"
caps.handback.revision: "0"
author: robstackmsft
ms.author: robstack
manager: angrobe
ms.openlocfilehash: e040c6b3a951d1bdf5a46dd82f1bd92b45c2e71d
ms.sourcegitcommit: 51fc48fb023f1e8d995c6c4eacfda7dbec4d0b2f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2017
---
# <a name="how-to-create-custom-configuration-items-for-windows-desktop-and-server-computers-managed-with-the-system-center-configuration-manager-client"></a>Создание пользовательских элементов конфигурации для настольных систем и серверов Windows, управляемых с помощью клиента System Center Configuration Manager

*Применимо к: System Center Configuration Manager (Current Branch)*


Используйте настраиваемый элемент конфигурации **Настольные компьютеры и серверы под управлением Windows (настраиваемые)** System Center Configuration Manager для настройки параметров компьютеров и серверов Windows, которые управляются с помощью клиента Configuration Manager.  

## <a name="start-the-create-configuration-item-wizard"></a>Запуск мастера создания элементов конфигурации

1.  В консоли Configuration Manager последовательно выберите **Активы и соответствие** > **Параметры соответствия** > **Элементы конфигурации**.  

3.  На вкладке **Главная** в группе **Создать** щелкните элемент **Создать элемент конфигурации**.  

4.  На странице **Общие** **мастера создания элемента конфигурации**укажите имя и необязательное описание элемента.  

5.  В разделе **Укажите тип элемента конфигурации, который требуется создать**выберите **Настольные системы и серверы Windows (пользовательский)**.  

    > [!TIP]  
    >  Если вы хотите указать параметры метода обнаружения, проверяющие наличие приложения, выберите **Этот элемент конфигурации содержит параметры приложения**.  

6.  Щелкните элемент **Категории**, если хотите создать и назначить категории для поиска и фильтрации элементов конфигурации в консоли Configuration Manager.  

## <a name="provide-detection-method-information"></a>Указание сведений о методе обнаружения  
 Используйте данную процедуру, чтобы указать сведения о методе обнаружения для элемента конфигурации.  

> [!NOTE]  
>  Применяется только в том случае, если вы выбрали **этот элемент конфигурации содержит параметры приложения** на **Общие** странице мастера.  

 Метод обнаружения в Configuration Manager содержит правила, используемые для обнаружения установки приложения на компьютере. Такое обнаружение выполняется до оценки соответствия элемента конфигурации требованиям. Чтобы определить, установлено ли приложение, можно выполнить обнаружение файла установщика Windows для него, использовать настраиваемый сценарий или выбрать параметр **Всегда предполагать, что приложение установлено** , чтобы оценить соответствие элемента конфигурации требованиям независимо от установки приложения.  

 Используйте эти процедуры для настройки методов обнаружения в System Center Configuration Manager.  

### <a name="to-detect-an-application-installation-by-using-the-windows-installer-file"></a>Процедура обнаружения установки приложения с помощью файла установщика Windows  

1.  На **методы обнаружения** страница **мастера создания элементов конфигурации**, выберите **использовать обнаружение установщика Windows** флажок.  

2.  Щелкните **Откройте**, перейдите к файлу установщика Windows (MSI), необходимо определить и нажмите кнопку **Откройте**.  

3.  **Версии** поле автоматически заполняется номером версии выбранного файла установщика Windows. В этом поле можно ввести новый номер версии, если неверный отображаемое значение.  

4.  Установите флажок **Это приложение установлено для одного или нескольких пользователей** , если требуется выполнить обнаружение для каждого профиля пользователя на компьютере.  

### <a name="to-detect-a-specific-application-and-deployment-type"></a>Обнаружение определенного приложения и типа развертывания  

1.  На странице **Методы обнаружения** **мастера создания элементов конфигурации**установите флажок **Обнаружить определенное приложение и тип развертывания** , а затем нажмите кнопку **Выбрать**.  

2.  В диалоговом окне **Выбор приложения** выберите приложение и соответствующий тип развертывания, которые необходимо обнаружить.  

### <a name="to-detect-an-application-installation-by-using-a-custom-script"></a>Обнаружение установки приложения с помощью пользовательского сценария  

1.  На **методы обнаружения** страница **мастера создания элементов конфигурации**, выберите **использование настраиваемого сценария для обнаружения этого приложения** флажок.  

2.  В списке выберите язык сценария, который требуется открыть. Выберите один из следующих сценариев:  

    -   **VBScript**  

    -   **JScript**  

    -   **PowerShell**  

3.  Нажмите кнопку **Открыть**, перейдите к сценарию, который требуется использовать, после чего нажмите кнопку **Открыть**.  

##  <a name="configure-settings"></a>Настройка параметров  
 Используйте данную процедуру, чтобы настроить параметры в элементе конфигурации.  

 Параметры представляют собой бизнес- или технические условия, которые используются для оценки соответствия на клиентских устройствах. Можно настроить новый параметр или выбрать существующий параметр на эталонном компьютере.  

1.  На странице **Параметры** **мастера создания элементов конфигурации**нажмите кнопку **Создать**.  

2.  На вкладке **Общие** диалогового окна **Создание параметра** укажите следующие сведения.  

    -   **Имя.** Введите уникальное имя для параметра. Можно использовать не более 256 символов.  

    -   **Описание:** Введите описание параметра. Можно использовать не более 256 символов.  

    -   **Тип параметра**. В списке выберите и настройте один из следующих типов для использования этого параметра.  

        -   **Запрос Active Directory**  

             **Префикс LDAP** : укажите действительный префикс для запроса доменных служб Active Directory с целью оценки соответствия на клиентских компьютерах. Можно использовать любой **LDAP: / /** для или **GC: / /** для выполнения поиска в глобальном каталоге...  

             **Различающееся имя (DN)** -укажите различающееся имя объекта доменных служб Active Directory, оцениваемого на соответствие на клиентских компьютерах.  

             Например, если требуется оценить значение, связанное с пользователем John Smith в домене corp.contoso.com, введите следующее:  

            -   **Фильтр поиска** — укажите дополнительный фильтр LDAP для уточнения результатов запроса доменных служб Active Directory с целью оценки соответствия на клиентских компьютерах.  

                 Для возвращения всех результатов запроса введите **(objectclass=\*)**.  

            -   **Область поиска** — укажите область поиска в доменных службах Active Directory. Можно выбрать одно из следующих значений.  

                -   **Базового** -запрашивает объект, который указан.  

                -   **Один уровень** — указанный параметр не используется в данной версии Configuration Manager.  

                -   **Поддерево** -запросы, указанный объект и его полного поддерева в каталоге.  

            -   **Свойство** -задано свойство объекта доменных служб Active Directory, который используется для оценки соответствия на клиентских компьютерах.  

                 Например, если вы хотите запросить свойство Active Directory **badPwdCount**, который сохраняет количество раз пользователь неправильно вводит пароль, введите **badPwdCount** в этом поле.  

            -   **Запроса** -отображает запрос, построенный на основе записи в **префикс LDAP**, **различающееся имя (DN)**, **фильтра поиска** (Если указано), и **свойство**, которые используются для оценки соответствия на клиентских компьютерах.  

             Дополнительные сведения о построении запросов LDAP см. в документации Windows Server.  

        -   **Сборка**  

             Для этого типа параметров настройте следующие значения.  

            -   **Имя сборки:** Указывает имя сборки объекта, который требуется найти. Имя не может совпадать с именами других объектов сборки одного и того же типа и должно быть зарегистрировано в глобальном кэше сборок. Имя сборки может содержать до 256 символов.  

             Сборка — это фрагмент кода, который может совместно использоваться приложениями. Сборки могут иметь расширение файла DLL или EXE. Глобальный кэш сборок является папка с именем *%systemroot%\Assembly* на клиентских компьютерах, где все общие сборки хранятся.  

        -   **Файловая система**  

            -   **Тип** : выберите в списке, по какому параметру требуется выполнить поиск: **Файл** или **Папка**.  

            -   **Путь** -указать путь к указанному файлу или папке на клиентских компьютерах. В пути можно указать системные переменные среды и переменную среды *%USERPROFILE%* .  

                > [!NOTE]  
                >  Если в полях *Путь* либо **Имя файла или папки** используется переменная среды **%USERPROFILE%** , поиск на клиентском компьютере выполняется во всех профилях пользователей, что может привести к отображению нескольких экземпляров файла или папки.  
                >   
                >  Если доступ параметров соответствия к указанному пути ограничен, выводится ошибка обнаружения. Кроме того Если выполняется поиск файла используется в настоящий момент, формируется ошибка обнаружения.  

            -   **Имя файла или папки** -указать имя объекта файла или папки для поиска. В имени файла или папки можно указать системные переменные среды и переменную среды *%USERPROFILE%* . Кроме того, можно использовать подстановочные знаки * и ? в имени файла.  

                > [!NOTE]  
                >  Если указано имя файла или папки и используются подстановочные знаки, это может привести к отображению слишком большого числа результатов. В итоге уровень использования ресурсов на клиентском компьютере возрастет, а также увеличится сетевой трафик при отправке результатов в Configuration Manager.  

            -   **Включая вложенные папки** — используйте этот параметр, если также требуется выполнить поиск во всех вложенных папках по указанному пути.  

            -   **Файл или папка связан с 64-разрядного приложения** - при выборе только 64-разрядный файл расположения (такие как *% ProgramFiles %*) будет проверяться на 64-разрядных компьютерах. Если этот параметр отключен, будут проверяться как 32-разрядные (такие как *%ProgramFiles(x86)%*), так и 64-разрядные расположения.  

                > [!NOTE]  
                >  Если один и тот же файл или папка присутствует в расположениях 64-разрядных и 32-разрядных системных файлов на одном 64-разрядном компьютере, при глобальном условии обнаруживается несколько файлов.  

             Тип параметра **Файловая система** не поддерживает указание UNC-пути к сетевой папке в поле **Путь** .  

        -   **Метабаза IIS**  

            -   **Путь к метабазе** : укажите допустимый путь к метабазе IIS.  

            -   **Идентификатор свойства** — укажите числовое свойство параметра метабазы IIS.  

        -   **Раздел реестра**  

            -   **Раздел** : в списке выберите куст реестра, в котором требуется выполнить поиск.  

            -   **Ключ** — укажите имя раздела реестра, который требуется найти. Используйте формат *раздел\подраздел*.  

            -   **Этот ключ реестра связан с 64-разрядным приложением** -указывает, следует ли выполнять поиск разделов реестра для 64-разрядных Помимо разделов реестра в 32-разрядной на компьютере под управлением 64-разрядной версии Windows.  

                > [!NOTE]  
                >  Если один и тот же раздел реестра присутствует в расположениях реестра для 64-разрядных и 32-разрядных программ на одном 64-разрядном компьютере, при глобальном условии будут обнаруживаться оба раздела реестра.  

        -   **Значение реестра**  

            -   **Раздел** : в списке выберите куст реестра, в котором требуется выполнить поиск.  

            -   **Ключ** — укажите имя раздела реестра, который требуется найти. Используйте формат *раздел\подраздел*.  

            -   **Значение** — укажите значение, которое должен содержать указанный раздел реестра.  

            -   **Этот ключ реестра связан с 64-разрядным приложением** : указывает, следует ли выполнять поиск в разделах реестра для 64-разрядных программ, помимо разделов реестра для 32-разрядных программ, на клиентах, работающих под управлением 64-разрядной версии ОС Windows.  

                > [!NOTE]  
                >  Если один и тот же раздел реестра присутствует в расположениях реестра для 64-разрядных и 32-разрядных программ на одном 64-разрядном компьютере, при глобальном условии будут обнаруживаться оба раздела реестра.  

             Кроме того, вы можете нажать кнопку **Обзор** для перехода в расположение реестра на компьютере или на удаленном компьютере. Чтобы перейти к удаленному компьютеру, необходимо иметь права администратора на удаленном компьютере и удаленном компьютере должна быть запущена служба удаленного реестра.  

        -   **Сценарий**  

            -   **Сценарий обнаружения** — нажмите кнопку **Добавить** , чтобы ввести или перейти к расположению сценария, который требуется использовать. Можно использовать сценарии Windows PowerShell, VBScript или JScript корпорации Майкрософт.  

            -   **Выполнять сценарии с использованием данных вошедшего пользователя** : если этот параметр включен, сценарий на клиентских компьютерах выполняется с использованием учетных данных пользователей, вошедших в систему.  

                > [!NOTE]  
                >  Значение, возвращаемое сценарием, используется для оценки соответствия по глобальному условию. Например, при использовании VBScript вы можете выполнить команду **WScript.Echo Result** , чтобы вернуть значение переменной *Result* для глобального условия.  

        -   **SQL-запрос**  

            -   **Экземпляр сервера SQL Server** — выберите, требуется ли выполнить SQL-запрос в экземпляре, используемом по умолчанию, во всех экземплярах или в экземпляре базы данных с указанным именем.  

                > [!NOTE]  
                >  Имя экземпляра должно указывать на локальный экземпляр сервера SQL Server. Чтобы указать экземпляр кластеризованного сервера SQL Server, следует использовать параметр сценария.  

            -   **Базы данных** — укажите имя базы данных Microsoft SQL Server, для которой нужно выполнить запрос SQL.  

            -   **Столбец** -указания имени столбца, возвращаемого инструкцией Transact-SQL, которая используется для оценки соответствия глобальному условию.  

            -   **Инструкция Transact-SQL** — укажите полный SQL-запрос, который требуется использовать для глобального условия. Можно также нажать кнопку **Открыть** для открытия существующего SQL-запроса.  

                > [!IMPORTANT]  
                >  Параметры SQL-запроса не поддерживают команды SQL, изменяющие базу данных. Вы можете использовать только команды SQL, считывающие сведения из базы данных.  

        -   **WQL-запрос**  

            -   **Имен** -укажите пространство имен инструментария управления Windows (WMI), который используется для создания WQL-запроса, оцениваемого на соответствие на клиентских компьютерах. Значение по умолчанию — Root\cimv2.  

            -   **Класс** -указывает класс WMI, который используется для создания WQL-запроса, оцениваемого на соответствие на клиентских компьютерах.  

            -   **Свойство** -указывает свойство инструментария WMI, который используется для создания WQL-запроса, оцениваемого на соответствие на клиентских компьютерах.  

            -   **Предложение WHERE WQL-запроса** — элемент **Предложение WHERE WQL-запроса** можно использовать для указания предложения WHERE, применяемого к указанному пространству имен, классу и свойству на клиентских компьютерах.  

        -   **Запрос XPath**  

            -   **Путь** : укажите путь к XML-файлу на клиентских компьютерах, который используется для оценки соответствия. Configuration Manager поддерживает использование всех переменных среды системы Windows и пользовательскую переменную *%USERPROFILE%* в имени пути.  

            -   **Имя XML-файла** -указать имя файла, содержащего XML-запрос, который используется для оценки соответствия на клиентских компьютерах.  

            -   **Включая вложенные папки** — используйте этот параметр, если также требуется выполнить поиск во всех вложенных папках по указанному пути.  

            -   **Этот файл связан с 64-разрядным приложением** — выберите, требуется ли выполнять поиск в расположении файлов 64-разрядной системы (*%windir%*\System32), помимо расположения файлов 32-разрядной системы (*%windir%*\Syswow64), в клиентах Configuration Manager, работающих под управлением 64-разрядной версии Windows.  

            -   **Запрос XPath** — укажите действительный полный XML path language (XPath) запрос, используемый для оценки соответствия на клиентских компьютерах.  

            -   **Пространства имен** — откройте диалоговое окно **Пространства имен XML** , чтобы определить пространства имен и префиксы, используемые во время выполнения запроса XPath.  

             Если выполняется попытка обнаружить зашифрованный XML-файл, такой файл находится с помощью параметров соответствия, но запрос xPath не выводит результаты и не отображается сообщение об ошибке.  

             Если запрос xPath недопустим, на клиентских компьютерах этот параметр оценивается как несоответствующий.  

    -   **Тип данных:** выберите в списке формат, в котором условие возвращает данные перед их использованием для оценки параметра. **Тип данных** список отображается не для всех типов параметров.  

        > [!NOTE]  
        >  Тип данных **с плавающей запятой** поддерживает только 3 цифры после десятичной запятой.  

3.  Настроить дополнительные сведения об этом параметре под **тип параметра** списка. Элементы, которые можно настроить зависят от выбранного типа параметра.  

    > [!NOTE]  
    >  При создании параметров типа **файловой системы**, **реестра**, и **значение реестра**, можно щелкнуть **Обзор** Настройка из значения на эталонном компьютере. Чтобы перейти к разделу или значению реестра на удаленном компьютере, на удаленном компьютере должна быть включена служба удаленного реестра.  

4.  Нажмите кнопку **ОК** , чтобы сохранить параметр и закрыть диалоговое окно **Создание параметра** .  

##  <a name="configure-compliance-rules"></a>Настройка правил соответствия  
 Используйте следующую процедуру, чтобы настроить правила соответствия для элемента конфигурации.  

 Правила соответствия указывают условия, определяющие соответствие элемента конфигурации требованиям. Перед тем как оценить параметр на соответствие требованиям, необходимо создать по крайней мере одно правило соответствия. WMI, реестра и параметры сценариев позволяют исправлять значения, признанные несоответствующими. Можно создать новые правила или перейдите к существующему параметру в любом элементе конфигурации для выбора правил в ней.  

### <a name="to-create-a-compliance-rule"></a>Процедура создания правила соответствия  

1.  На странице **Правила соответствия** **мастера создания элементов конфигурации**нажмите кнопку **Создать**.  

2.  В диалоговом окне **Создать правило** укажите следующие сведения.  

    -   **Имя.** Введите имя для правила соответствия.  

    -   **Описание:** Введите описание для правила соответствия.  

    -   **Выбранный параметр:** Щелкните **Обзор** Открытие **выберите параметр** диалоговое окно. Выберите параметр, который требуется определить правило, или нажмите кнопку **новый параметр**. По окончании работы нажмите кнопку **Выбрать**.  

        > [!NOTE]  
        >  Можно также нажать кнопку **Свойства** , чтобы просмотреть сведения о выбранном в настоящий момент параметре.  

    -   **Тип правила:** Выберите тип правила соответствия, который вы хотите использовать:  

        -   **Значение** создать правило, которое сравнивает значения, возвращенного элемента конфигурации со значением, которое можно указать.  

        -   **Существующий** создать правило, оценивающее параметр в зависимости от того, существует ли на клиентском устройстве или на количество раз он было обнаружено.  

    -   Для типа правила **Значение**укажите следующую информацию.  

        -   **Параметр должен соответствовать следующее правило** — выберите оператор и значение, которое оценивается соответствие выбранного параметра. Можно использовать следующие операторы.  

            |Оператор|Дополнительные сведения|  
            |--------------|----------------------|  
            |Равно|Дополнительные сведения отсутствуют|  
            |Не равно|Дополнительные сведения отсутствуют|  
            |Больше|Дополнительные сведения отсутствуют|  
            |Меньше|Дополнительные сведения отсутствуют|  
            |Между|Дополнительные сведения отсутствуют|  
            |Больше или равно|Дополнительные сведения отсутствуют|  
            |Меньше или равно|Дополнительные сведения отсутствуют|  
            |Один из|В текстовом поле укажите одну запись в каждой строке.|  
            |Ни один из|В текстовом поле укажите одну запись в каждой строке.|  

        -   **Исправлять несоответствующие параметры, когда это возможно** : выберите этот параметр, если требуется, чтобы Configuration Manager автоматически исправлял несоответствующие правила. Configuration Manager можно автоматически исправлять следующие типы правил:  

            -   **Значение реестра** — значение реестра является исправлять, если он не соответствует требованиям и если она не существует.  

            -   **Сценарий** (путем автоматического выполнения сценария исправления).  

            -   **WQL-запрос**  

            > [!IMPORTANT]  
            >  Исправлять несоответствующие правила можно только в случае, когда оператор правила настроен со значением **Равно**.  

        -   **Сообщить о несоответствии, если этот экземпляр не найден** — элемент конфигурации сообщает несоответствия, если этот параметр не найден на клиентских компьютерах.  

        -   **Степень важности несоответствия для отчетов** — укажите степень важности, которая передается (в отчеты Configuration Manager), если это правило соответствия не выполняется. Ниже перечислены доступные степени важности.  

            -   **Нет** — компьютеры, для которых не выполняется данное правило соответствия, не сообщают степень серьезности сбоя.  

            -   **Информация** — компьютеры, для которых не выполняется данное правило соответствия, сообщают о серьезности сбоя со степенью **Информация**.  

            -   **Предупреждение** — компьютеры, для которых не выполняется данное правило соответствия, сообщают о серьезности сбоя со степенью **Предупреждение**.  

            -   **Ошибка** — компьютеры, для которых не выполняется данное правило соответствия, сообщают о серьезности сбоя со степенью **Ошибка**.  

            -   **Ошибка с событием** — компьютеры, для которых не выполняется данное правило соответствия, сообщают о серьезности сбоя со степенью **Ошибка**. Указанная степень серьезности также регистрируется в журнале событий приложений в качестве события Windows.  

        -   Для типа правила **Существующий**укажите следующую информацию.  

            > [!NOTE]  
            >  Отображаемые параметры могут различаться в зависимости от типа параметра, для которого настраивается правило.  

            -   **Параметр должен существовать на клиентских устройствах**  

            -   **Параметр не должен существовать на клиентских устройствах**  

            -   **Параметр применяется следующее число раз:**  

        -   **Степень важности несоответствия для отчетов** — укажите степень важности, которая передается (в отчеты Configuration Manager), если это правило соответствия не выполняется. Ниже перечислены доступные степени важности.  

            -   **Нет** — компьютеры, для которых не выполняется данное правило соответствия, не сообщают степень серьезности сбоя.  

            -   **Информация** — компьютеры, для которых не выполняется данное правило соответствия, сообщают о серьезности сбоя со степенью **Информация**.  

            -   **Предупреждение** — компьютеры, для которых не выполняется данное правило соответствия, сообщают о серьезности сбоя со степенью **Предупреждение**.  

            -   **Ошибка** — компьютеры, для которых не выполняется данное правило соответствия, сообщают о серьезности сбоя со степенью **Ошибка**.  

            -   **Ошибка с событием** — компьютеры, для которых не выполняется данное правило соответствия, сообщают о серьезности сбоя со степенью **Ошибка**. Указанная степень серьезности также регистрируется в журнале событий приложений в качестве события Windows.  

3.  Нажмите кнопку **ОК** , чтобы закрыть диалоговое окно **Создать правило** .  

##  <a name="specify-supported-platforms"></a>Указание поддерживаемых платформ  
 Поддерживаемые платформы — это операционные системы, на которых оценивается соответствие элемента конфигурации требованиям.  

На странице **Поддерживаемые платформы** **мастера создания элементов конфигурации**в списке выберите версии ОС Windows, в которых требуется оценить соответствие элемента конфигурации, или нажмите кнопку **Выбрать все**.  

## <a name="complete-the-wizard"></a>Завершение работы мастера  
 На странице мастера **Сводка** просмотрите действия, которые будут выполнены, и завершите работу мастера. Отображается новый элемент конфигурации в **элементы конфигурации** узел в **активы и соответствие** рабочей области.  
