---
title: "Высокий уровень доступности | Документы Майкрософт"
description: "Узнайте, как развернуть System Center Configuration Manager с параметрами, обеспечивающими высокий уровень доступности."
ms.custom: na
ms.date: 10/06/2016
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology: configmgr-other
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 1a38421d-24c1-4fef-bf6c-42fce53109ac
caps.latest.revision: "4"
author: Brenduns
ms.author: brenduns
manager: angrobe
ms.openlocfilehash: d3e9afb90cdc85bc7299626b642c52be659e3bdf
ms.sourcegitcommit: 51fc48fb023f1e8d995c6c4eacfda7dbec4d0b2f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2017
---
# <a name="high-availability-options-for-system-center-configuration-manager"></a>Параметры высокого уровня доступности для System Center Configuration Manager

*Применимо к: System Center Configuration Manager (Current Branch)*



Вы можете развернуть System Center Configuration Manager с параметрами, обеспечивающими высокий уровень доступности.   

Ниже перечислены способы обеспечения высокой доступности.   

-   Сайты поддерживают работу с множеством экземпляров серверов системы сайта, выполняющих важные функции для клиентов.  

-   Сайты центра администрирования и первичные сайты поддерживают резервное копирование базы данных сайта. База данных сайта содержит все настройки сайтов и клиентов и используется совместно сайтами в иерархии, содержащей сайт центра администрирования.  

-   Встроенные варианты восстановления позволяют сократить простои серверов и предусматривают дополнительные возможности, которые упрощают восстановление при наличии иерархии с сайтом центра администрирования.  

-   Клиенты могут автоматически устранять типичные проблемы без вмешательства администратора.  

-   Сайты генерируют оповещения о клиентах, не представивших последние данные, тем самым предупреждая администраторов о потенциальных проблемах.  

-   Configuration Manager предоставляет несколько встроенных отчетов, позволяющих вам выявлять проблемы и неблагоприятные тенденции, прежде чем они начнут создавать помехи в работе серверов или клиентов.  

 Configuration Manager не обеспечивает работу в реальном времени, и при обмене данными следует ожидать определенной задержки. Поэтому в большинстве сценариев временное прерывание обслуживания не становится обычно серьезной проблемой. Сконфигурировав сайты и иерархию с учетом соображений высокой доступности, можно свести к минимуму простои, обеспечить непрерывную автономию в работе и высокое качество обслуживания.  

 Например, клиенты Configuration Manager обычно работают автономно в соответствии с известными расписаниям и параметрами работы, а также расписаниями отправки данных на сайт для обработки.  

-   Когда клиенты не могут связаться с сайтом, они кэшируют данные для отправки до момента, пока не станет возможной связь с сайтом.  

-   Клиенты, которые не могут связаться с сайтом, продолжают работать с использованием последних известных расписаний и кэшированной информации (например, ранее загруженного приложения, которое необходимо запустить или установить), пока они не смогут обратиться к сайту и получить новые политики.  

-   Сайт отслеживает свои системы и своих клиентов на предмет периодических обновлений состояния, а также может генерировать оповещения, когда таких обновлений не поступает.  

-   Встроенные отчеты позволяют получить представление о текущей работе, а также о работе и тенденциях в прошедшие периоды. Наконец, Configuration Manager поддерживает сообщения о состоянии, которые предоставляют информацию о текущей работе почти в реальном времени.  

  Используйте сведения в этом разделе с информацией в следующих статьях:
-   [Рекомендуемое оборудование](../../core/plan-design/configs/recommended-hardware.md)
-   [Поддерживаемые операционные системы для серверов системы сайта](../../core/plan-design/configs/supported-operating-systems-for-site-system-servers.md)  

-   [Предварительные требования к сайтам и системе сайта](../../core/plan-design/configs/site-and-site-system-prerequisites.md)


##  <a name="bkmk_snh"></a> Высокая доступность для сайтов и иерархий  
 **Использование кластера SQL Server для размещения базы данных сайта:**  

 Используя кластер SQL Server для размещения базы данных на сайте центра администрирования или первичном сайте, вы пользуетесь средствами обеспечения отказоустойчивости, встроенными в SQL Server.  

 Вторичные сайты не могут использовать кластер SQL Server и не поддерживают резервное копирование или восстановление своей базы данных. Восстановление вторичного сайта производится путем его переустановки с родительского первичного сайта.  

 **Использование группы доступности SQL Server AlwaysOn для размещения базы данных сайта:**  

 Начиная с версии 1602, в качестве решения обеспечения высокой доступности и возможности аварийного восстановления можно использовать группы доступности SQL Server AlwaysOn для размещения базы данных сайта на первичных сайтах и сайте центра администрирования. Дополнительные сведения см. в разделе [SQL Server AlwaysOn для высокодоступной базы данных сайта в System Center Configuration Manager](../../core/servers/deploy/configure/sql-server-alwayson-for-a-highly-available-site-database.md).  

 **Развертывание иерархии сайтов с сайтом центрального администрирования и одним или несколькими дочерними первичными сайтами**  

 Эта конфигурация способна обеспечить устойчивость к сбоям, когда сайты осуществляют управление перекрывающимися сегментами сети. Вдобавок, в такой конфигурация возможен еще один вариант восстановления — использовать информацию из общей базы данных на другом сайте для перестроения базы данных восстанавливаемого сайта. Этот вариант годится для замены испорченной или недоступной резервной копии сбойной базы данных сайта.  

 **Регулярное создание резервных копий на сайтах центра администрирования и первичных сайтах:**  

 Регулярно создавая и тестируя резервную копию сайта, вы можете обеспечить наличие необходимых данных для восстановления сайта и кратчайшие сроки его восстановления.  

 **Установка нескольких экземпляров ролей системы сайта**  

 Устанавливая несколько экземпляров критически важных ролей системы, таких как точка управления и точка распространения, вы предоставляете клиентам дополнительные точки доступа на случай, если связь с конкретным сервером системы сайта пропадет.  

 **Установка на сайте нескольких экземпляров поставщика SMS:** поставщик SMS предоставляет точку административного доступа для одной или нескольких консолей Configuration Manager. Устанавливая несколько поставщиков SMS, вы можете обеспечить дополнительные точки доступа для администрирования сайта и иерархии.  

##  <a name="bkmk_ssr"></a> Высокий уровень доступности для ролей системы сайта  
 На каждом сайте развертываются роли системы сайта для оказания требуемых услуг клиентам этого сайта. База данных содержит информацию о конфигурации сайта и всех клиентов. Используйте один или несколько предусмотренных вариантов для обеспечения высокой доступности базы данных сайта, а при необходимости — также для восстановления сайта и его базы данных.  

 **Избыточность важных ролей системы сайта:**  

-   Тточка веб-службы каталога приложений  

-   Точка веб-сайта каталога приложений.  

-   Точка распространения.  

-   Точка управления.  

-   Точка обновления программного обеспечения  

-   точка миграции состояния,  

 Для обеспечения избыточности отчетов о сайтах и клиентах можно установить несколько экземпляров роли точки служб отчетов.

 Для обеспечения отказоустойчивости можно с помощью PowerShell установить роль системы сайта "Точка обновления программного обеспечения" в кластере балансировки сетевой нагрузки Windows (NLB).  


 **Встроенная задача резервного копирования сайта:**  

 Configuration Manager имеет встроенную задачу резервного копирования, позволяющую регулярно создавать резервные копии сайта и критически важной информации. Кроме того, программа установки Configuration Manager поддерживает действия по восстановлению сайта, помогая вернуть сайт к работе.  

 **Публикация в доменных службах Active Directory и службе DNS:**  

 Каждый сайт можно настроить для публикации данных о серверах и службах системы сайта в доменных службах Active Directory и службе DNS. Это позволяет клиентам находить самый доступный сервер в сети, а также узнавать о появлении новых серверов системы сайта, которые могут предоставлять важные услуги (например, точек управления).  

 **Поставщик SMS и консоль Configuration Manager:**  

 Configuration Manager поддерживает установку нескольких поставщиков SMS (каждый на отдельном компьютере) для предоставления нескольких точек доступа консолям Configuration Manager. Тем самым гарантируется, что если пропадет связь с одним из компьютеров поставщика SMS, возможность просматривать и перенастраивать сайты и клиенты Configuration Manager сохранится.  

 Когда консоль Configuration Manager подключается к сайту, она соединяется с одним из экземпляров поставщика SMS на этом сайте. Экземпляр поставщика SMS выбирается недетерминированным образом. Если выбранный поставщик SMS недоступен, есть следующие варианты.  

-   Повторное подключение консоли к сайту. Каждому новому запросу на подключение недетерминированным образом назначается экземпляр поставщика SMS, и возможно, что новому подключению будет назначен доступный экземпляр.  

-   Подключите консоль к другому сайту Configuration Manager и управляйте конфигурацией через это подключение. При этом возникнет небольшая задержка изменения конфигурации, не превышающая нескольких минут. После того, как поставщик SMS для данного сайта станет доступным, можно будет снова подключить консоль Configuration Manager непосредственно к управляемому сайту.  

 Консоль Configuration Manager можно установить на нескольких компьютерах, чтобы с ней могли работать пользователи с правами администратора. Каждый поставщик SMS поддерживает подключение нескольких консолей Configuration Manager.  

 **Точка управления:**  

 Установите несколько точек управления в каждом первичном сайте и обеспечьте для сайтов возможность публиковать данные о сайте в инфраструктуре Active Directory и службе DNS.  

 Наличие нескольких точек управления помогает сбалансировать нагрузку на отдельную точку управления от множества клиентов. Кроме того, можно установить одну или несколько реплик базы данных для точек управления, чтобы снизить количество операций, сильно нагружающих процессор, на отдельной точке управления, и повысить доступность этой критически важной роли системы сайта.  

 Так как можно установить только одну точку управления на вторичном сайте, и она должна находиться на сервере вторичного сайта, точки управления на вторичных сайтах не могут иметь высокодоступной конфигурации.  

> [!NOTE]  
>  Устройства, управляемые с помощью локального управления мобильными устройствами, подключаются только к одной точке управления на первичном сайте. Точка управления назначается Configuration Manager во время регистрации мобильного устройства и затем не меняется. При установке нескольких точек управления и включении нескольких точек для мобильных устройств точка управления, назначаемая мобильному устройству, не детерминирована.  
>   
>  Если точка управления, которую использует клиент на мобильном устройстве, становится недоступной, нужно устранить проблему с ней или очистить и повторно зарегистрировать мобильное устройство, чтобы ему могла быть назначена рабочая точка управления, подходящая для мобильных устройств.  

 **Точка распространения:**  

 Установите несколько точек распространения и организуйте развертывание содержимого в нескольких точках распространения. Можно создать перекрывающиеся группы границ расположения содержимого, чтобы обеспечить доступ к развертыванию для клиентов из двух или более точек распространения. Наконец, следует рассмотреть возможность настройки одной или более точек распространения в качестве резервных источников содержимого.  

 Дополнительные сведения о резервных источниках содержимого см. в разделе [Управление содержимым и инфраструктурой содержимого для System Center Configuration Manager](../../core/servers/deploy/configure/manage-content-and-content-infrastructure.md).  

 **Точка веб-службы каталога приложений и точка веб-сайта каталога приложений:**  

 Можно установить несколько экземпляров каждой роли системы сайта, а для обеспечения наилучшей производительности развернуть по одной такой роли на одном компьютере системы сайта.  

 Каждая роль системы сайта каталога приложений предоставляет ту же информацию, что и другие экземпляры той же роли, вне зависимости от местоположения этой роли сервера сайта в иерархии. Поэтому, когда клиент делает запрос к каталогу приложений, а для параметра клиента устройства "Точка веб-сайта каталога приложений по умолчанию" установлено значение "Автоматическое обнаружение", клиент может быть перенаправлен к доступному экземпляру. Предпочтение отдается локальным серверам системы сайта каталога приложений, исходя из текущего сетевого расположения клиента.  

 Дополнительные сведения об этом параметре клиента и о том, как работает автоматическое определение, см. в подразделе [Агент компьютера](../../core/clients/deploy/about-client-settings.md#computer-agent) раздела [Параметры клиента в Configuration Manager](../../core/clients/deploy/about-client-settings.md).  

##  <a name="bkmk_client"></a> Высокий уровень доступности для клиентов  
 **Клиенты работают автономно:**  

 Автономность клиента Configuration Manager включает следующее.  

-   Клиенты не требуют непрерывного контакта с какими-либо конкретными серверами системы сайта. Они используют известные конфигурации для выполнения заранее заданных действий по расписанию.  

-   Клиенты могут использовать любой доступный экземпляр роли системы сайта, обслуживающий клиентов, и предпринимают попытки связаться с известными серверами, пока не найдут доступный сервер.  

-   Клиенты могут выполнять инвентаризацию, развертывание программного обеспечения и другие аналогичные действия по расписанию вне зависимости от наличия прямого контакта с серверами системы сайта.  

-   Клиенты, настроенные для использования резервной точки состояния, могут передавать сведения этой точке, когда не могут связаться с точкой управления.  

 **Клиенты могут самостоятельно восстанавливаться:**  

 Клиенты автоматически устранять большинство типичных проблем без прямого вмешательства администратора.  

-   Периодически клиенты могут самостоятельно оценивать свое состояние и принимать меры к устранению типичных проблем, используя для этого локальный кэш шагов по устранению и исходных файлов.  

-   Если клиент не представил сайту информацию о состоянии, сайт может генерировать оповещение. Пользователи, получающие эти оповещения, могут немедленно принимать меры для восстановления нормальной работы клиента.  

 **Клиенты кэшируют данные для использования в будущем:**  

 Взаимодействуя с точкой управления, клиент может получать и кэшировать следующую информацию:  

-   параметры клиента;  

-   расписания для клиента;  

-   сведения о развертывании программного обеспечения и загрузке ПО, которое запланировано для установки на клиенте, если развертывание настроено для выполнения такого действия.  

 Если клиенты не могут связаться с точкой управления, они локально кэшируют сведения о статусе, состоянии и клиенте, которые они должны сообщить сайту, и передают эти данные после установления связи с точкой управления.  

 **Клиент может передавать данные о состоянии резервной точке состояния:**  

 Настраивая клиент для использования резервной точки состояния, вы предоставляете клиенту еще одну точку, в которую он сможет передавать важные сведения о его работе. клиенты, настроенные для использования резервной точки состояния, передают сведения о состоянии своей работы соответствующей роли системы сайта, даже когда клиенту не удается связаться с точкой управления.  

 **Централизованное управление данными и идентификацией клиента:**  

 Важная информация об идентификации каждого клиента хранится в базе данных сайта, а не в самом клиенте, и эта информация связывается с конкретным компьютером или пользователем. Это означает следующее:  

-   исходные файлы клиента на компьютере могут удаляться и переустанавливаться, не затрагивая записи за прошедшие периоды о компьютере, на котором клиент установлен;  

-   сбой клиентского компьютера не влияет на целостность информации, хранящейся в базе данных. Эта информация может оставаться доступной для составления отчетов.  

##  <a name="bkmk_nonHAoptions"></a> Параметры для сайтов и ролей системы сайта, не поддерживающих высокую доступность  
 Есть ряд систем сайта, для которых не поддерживается одновременная работа нескольких экземпляров на сайте или в иерархии. Эти сведения помогут вам подготовиться к ситуациям, когда связь с данными системами будет потеряна.  

 **Сервер сайта (сайт):**  

 Configuration Manager не поддерживает установку сервера сайта для каждого сайта в кластере Windows Server или кластере NLB.  

 Следующие сведения помогут подготовиться к возможным сбоям или приостановке работы сервера сайта.  

-   Используйте встроенную задачу резервного копирования для регулярного создания резервной копии сайта. В среде тестирования следует регулярно проводить контрольное восстановление сайтов из резервной копии.  

-   Для обеспечения избыточности следует развернуть в иерархии несколько первичных сайтов Configuration Manager с сайтом центра администрирования. Если на сайте произойдет сбой, следует рассмотреть возможность переназначения клиентов работоспособному сайту с помощью групповой политики или сценариев входа Windows.  

-   Если в рассматриваемой иерархии присутствует сайт центра администрирования, можно выполнить восстановление сайта центра администрирования или дочернего первичного сайта, используя вариант восстановления базы данных сайта из другого сайта в иерархии.  

-   Восстановление вторичных сайтов невозможно; их необходимо переустанавливать.  

 **Точка синхронизации каталога аналитики активов (иерархия):**  

 Эта роль системы сайта не рассматривается как критически важная; она обеспечивает дополнительные функциональные возможности в Configuration Manager. Если эта система сайта отключается от сети, следует использовать один из следующих вариантов.  

-   Устраните причину перехода системы сайта в автономный режим.  

-   Удалите роль с текущего сервера и установите ее на новом сервере.  

 **Точка Endpoint Protection (иерархия):**  

 Эта роль системы сайта не рассматривается как критически важная; она обеспечивает дополнительные функциональные возможности в Configuration Manager. Если эта система сайта отключается от сети, следует использовать один из следующих вариантов.  

-   Устраните причину перехода системы сайта в автономный режим.  

-   Удалите роль с текущего сервера и установите ее на новом сервере.  

 **Точка регистрации (сайт):**  

 Эта роль системы сайта не рассматривается как критически важная; она обеспечивает дополнительные функциональные возможности в Configuration Manager. Если эта система сайта отключается от сети, следует использовать один из следующих вариантов.  

-   Устраните причину перехода системы сайта в автономный режим.  

-   Удалите роль с текущего сервера и установите ее на новом сервере.  

 **Прокси-точка регистрации (сайт):**  

 Эта роль системы сайта не рассматривается как критически важная; она обеспечивает дополнительные функциональные возможности в Configuration Manager. Тем не менее, можно установить несколько экземпляров этой роли системы сайта, причем на нескольких сайтах в иерархии. Если эта система сайта отключается от сети, следует использовать один из следующих вариантов.  

-   Устраните причину перехода системы сайта в автономный режим.  

-   Удалите роль с текущего сервера и установите ее на новом сервере.  

 Если на сате установлено несколько прокси-точек регистрации, используйте в качестве имени сервера псевдоним DNS. При использовании этой конфигурации циклический перебор DNS обеспечивает некоторый уровень отказоустойчивости и распределения нагрузки при регистрации мобильных устройств пользователями.  

 **Резервная точка состояния (сайт или иерархия):**  

 Эта роль системы сайта не рассматривается как критически важная; она обеспечивает дополнительные функциональные возможности в Configuration Manager. Если эта система сайта отключается от сети, следует использовать один из следующих вариантов.  

-   Устраните причину перехода системы сайта в автономный режим.  

-   Удалите роль с текущего сервера и установите ее на новом сервере. Так как клиенты назначаются резервной точке состояни во время устновки клиента, потребуется изменить существующие клиенты так, чтобы использовать новый сервер системы сайта.  

### <a name="see-also"></a>См. также  
 [Поддерживаемые конфигурации для System Center Configuration Manager](../../core/plan-design/configs/supported-configurations.md)
