---
title: "Создание глобальных условий | Документы Майкрософт"
description: "Создайте глобальные условия, чтобы определить способ предоставления и развертывания приложения на клиентских устройствах."
ms.custom: na
ms.date: 10/06/2016
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology: configmgr-app
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 2d5f871a-19dc-4bd3-a3ad-4230c7a69f1b
caps.latest.revision: "7"
caps.handback.revision: "0"
author: robstackmsft
ms.author: robstack
manager: angrobe
ms.openlocfilehash: 8a59a1769eec4cd6d78d7686a1d8008e832dd924
ms.sourcegitcommit: 51fc48fb023f1e8d995c6c4eacfda7dbec4d0b2f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2017
---
# <a name="how-to-create-global-conditions-in-system-center-configuration-manager"></a>Создание глобальных условий в System Center Configuration Manager

*Применимо к: System Center Configuration Manager (Current Branch)*

Глобальные условия в System Center Configuration Manager — это правила, отражающие деловые или технические условия, с помощью которых можно указывать, каким образом приложение предоставляется клиентским устройствам и как выполняется его развертывание. Глобальные условия отображаются на странице **Требования** мастера создания типа развертывания.  

> [!NOTE]  
>  Изменить глобальные условия можно только с того сайта, на котором они были созданы.  

 Используйте приведенные ниже процедуры для создания глобальных условий Configuration Manager.  

## <a name="provide-basic-information-about-the-global-condition"></a>Предоставление основных сведений о глобальном условии  
 Доступны различные типы глобальных условий. С различными типами глобальных условий связаны различные параметры. При выборе определенного типа глобального условия Configuration Manager отображает параметры, которые будут применяться к выбранному объекту.  

1.  В консоли Configuration Manager последовательно выберите **Библиотека программного обеспечения** > **Управление приложениями** > **Глобальные условия**.  

3.  На вкладке **Главная** в группе **Создать** щелкните **Создать глобальное условие**.  

4.  В диалоговом окне **Создание глобального условия** введите имя и дополнительное описание глобального условия.  

5.  В раскрывающемся списке **Тип устройства** выберите глобальное условие для компьютера с **Windows** или устройства **Windows Mobile**.  

6.  В раскрывающемся списке **Тип условия** выберите одно из следующих значений.  

    -   **Параметр** . Проверяет существование одного или нескольких элементов на клиентских устройствах. Например, можно проверить, существует ли на клиентском устройстве определенный файл, папка или раздел реестра.  

    -   **Выражение**. Позволяет задавать более сложные правила, проверяющие выполнение условий на клиентских устройствах. Например, можно проверить, составляет ли объем физической памяти компьютера от 2 до 4 ГБ или оснащено ли мобильное устройство сенсорным экраном.  

## <a name="set-up-rules-for-the-global-condition"></a>Настройка правил для глобального условия  
 Процедура определения правил глобального условия зависит от того, что вы настраиваете — параметр или выражение. Используйте эти процедуры для настройки параметра или выражения глобального условия.  

### <a name="to-set-up-a-setting-for-the-global-condition"></a>Настройка параметра глобального условия  

1.  В раскрывающемся списке **Тип условия** выберите **Параметр**.  

2.  В раскрывающемся списке **Тип параметра** выберите элемент, представляющий собой условие, для которого будут проверяться требования. Доступны перечисленные ниже типы параметров и конфигурации.  

    -   **Запрос Active Directory**  

        -   **Префикс LDAP** — укажите действительный префикс LDAP для запроса доменных служб Active Directory с целью оценки соответствия на клиентских компьютерах. Вы можете использовать **LDAP://** или **GC://**.  

        -   **Различающееся имя (DN)** — укажите различающееся имя объекта доменных служб Active Directory, соответствие которого будет оцениваться на клиентских компьютерах.  

        -   **Фильтр поиска** — укажите дополнительный фильтр LDAP для уточнения результатов запроса доменных служб Active Directory с целью оценки соответствия на клиентских компьютерах.  

        -   **Область поиска** — укажите область поиска в доменных службах Active Directory:  

            -   **Базовая** — запрос только указанного объекта.  

            -   **Один уровень** — указанный параметр не используется в данной версии Configuration Manager.  

            -   **Поддерево** — запрос указанного объекта и его полного поддерева в каталоге.  

        -   **Свойство** — определение свойства объекта доменных служб Active Directory, которое будет использоваться для оценки соответствия на клиентских компьютерах.  

        -   **Запрос** — отображение запроса LDAP, сформированного из записей в полях **Префикс LDAP**, **Различающееся имя**, **Фильтр поиска** (если указано) и **Свойство**. Этот запрос будет использоваться для оценки соответствия на клиентских компьютерах.  

    -   **Сборка**  

        -   **Имя сборки** — указание имени объекта сборки, который требуется найти. Имя не может совпадать с именами других объектов сборки одного и того же типа и должно быть зарегистрировано в глобальном кэше сборок. Имя сборки не должно быть длиннее 256 символов.  

        > [!NOTE]  
        >  Сборка — это фрагмент кода, который может совместно использоваться приложениями. Сборки могут иметь расширение файла DLL или EXE. Глобальный кэш сборок представляет собой папку с именем *%systemroot%\assembly* на клиентских компьютерах, на которых хранятся все общие сборки.  

    -   **Файловая система**  

        -   **Тип** — в раскрывающемся списке выберите, по какому параметру требуется выполнить поиск: по параметру **Файл** или **Папка**.  

        -   **Путь** — укажите путь к указанному файлу или папке на клиентских компьютерах. В пути можно указать системные переменные среды и переменную среды *%USERPROFILE%* .  

            > [!NOTE]  
            >  При использовании переменной среды *%USERPROFILE%* в полях **Путь** или **Имя файла или папки** все профили пользователей на клиентском компьютере будут включены в поиск. Это может привести к обнаружению нескольких экземпляров файла или папки.  

        -   **Имя файла или папки** — укажите имя файла или объекта папки, которые потребуется найти. В имени файла или папки можно указать системные переменные среды и переменную среды *%USERPROFILE%* . Кроме того, можно использовать подстановочные знаки * и ? в имени файла.  

            > [!NOTE]  
            >  Если указано имя файла или папки и используются подстановочные знаки, это может привести к отображению слишком большого числа результатов. В итоге уровень использования ресурсов на клиентском компьютере возрастет, а также увеличится сетевой трафик при отправке результатов в Configuration Manager.  

        -   **Включая вложенные папки** — используйте этот параметр, если также требуется выполнить поиск во всех вложенных папках по указанному пути.  

        -   **Этот файл или эта папка связаны с 64-разрядным приложением** — выберите, требуется ли выполнять поиск в расположении файлов 64-разрядной системы (*%windir%*\system32), помимо расположения файлов 32-разрядной системы (*%windir%*\syswow64), в клиентах Configuration Manager, работающих под управлением 64-разрядной версии Windows.  

            > [!NOTE]  
            >  Если один и тот же файл или папка присутствует в расположениях 64-разрядных и 32-разрядных системных файлов на одном 64-разрядном компьютере, при глобальном условии будет обнаружено несколько файлов.  

         Тип параметра **Файловая система** не поддерживает указание UNC-пути к сетевой папке в поле **Путь** .  

    -   **Метабаза IIS**  

        -   **Путь к метабазе** — укажите допустимый путь к метабазе IIS.  

        -   **Идентификатор свойства** — укажите числовое свойство параметра метабазы IIS.  

    -   **Раздел реестра**  

        -   **Раздел** — в раскрывающемся списке выберите куст реестра, в котором требуется выполнить поиск.  

        -   **Ключ** — укажите имя раздела реестра, который требуется найти. Следует использовать формат *раздел\подраздел*.  

        -   **Этот раздел реестра связан с 64-разрядным приложением** — указывает, следует ли выполнять поиск в разделах реестра для 64-разрядных программ, помимо разделов реестра для 32-разрядных программ, на клиентах, работающих под управлением 64-разрядной версии ОС Windows.  

            > [!NOTE]  
            >  Если один и тот же раздел реестра присутствует в расположениях реестра для 64-разрядных и 32-разрядных программ на одном 64-разрядном компьютере, при глобальном условии будут обнаружены оба раздела реестра.  

    -   **Значение реестра**  

        -   **Раздел** — в раскрывающемся списке выберите куст реестра, в котором требуется выполнить поиск.  

        -   **Ключ** — укажите имя раздела реестра, который требуется найти. Следует использовать формат *раздел\подраздел*.  

        -   **Значение** — укажите значение, которое должен содержать указанный раздел реестра.  

        -   **Этот раздел реестра связан с 64-разрядным приложением** — указывает, следует ли выполнять поиск в разделах реестра для 64-разрядных программ, помимо разделов реестра для 32-разрядных программ, на клиентах, работающих под управлением 64-разрядной версии ОС Windows.  

            > [!NOTE]  
            >  Если один и тот же раздел реестра присутствует в расположениях реестра для 64-разрядных и 32-разрядных программ на одном 64-разрядном компьютере, при глобальном условии будут обнаружены оба раздела реестра.  

    -   **Сценарий**  

        -   **Сценарий обнаружения** — нажмите кнопку **Добавить**, чтобы ввести или перейти к расположению скрипта, который требуется использовать. Можно использовать скрипты Windows PowerShell, VBScript или JScript.  

        -   **Выполнять сценарии с использованием данных вошедшего пользователя** — если этот параметр включен, скрипт на клиентских компьютерах будет выполнен с использованием учетных данных пользователя, вошедшего в систему.  

            > [!NOTE]  
            >  Значение, которое возвращает сценарий, будет использоваться для оценки соответствия по глобальному условию. Например, при использовании VBScript можно выполнить команду **WScript.Echo Result**, чтобы получить значение переменной Result для глобального условия.  
            >   
            >  Если скрипт возвращает несколько значений, все они должны находиться в одной строке и быть разделены точками с запятыми. Если каждое значение будет находиться в отдельной строке, оценка завершится сбоем.  

    -   **SQL-запрос**  

        -   **Экземпляр сервера SQL Server** — выберите, требуется ли выполнить SQL-запрос в экземпляре, используемом по умолчанию, во всех экземплярах или в экземпляре базы данных с указанным именем.  

            > [!NOTE]  
            >  Имя экземпляра должно указывать на локальный экземпляр сервера SQL Server. Чтобы указать экземпляр кластеризованного сервера SQL Server, следует использовать параметр сценария.  

        -   **База данных** — укажите имя базы данных Microsoft SQL Server, в которой будет выполнен SQL-запрос.  

        -   **Столбец** — укажите имя столбца, который возвращает инструкция Transact-SQL, используемая для оценки соответствия глобальному условию.  

        -   **Инструкция Transact-SQL** — укажите полный SQL-запрос, который требуется использовать для глобального условия. Можно также нажать кнопку **Открыть** для открытия существующего SQL-запроса.  

    -   **WQL-запрос**  

        -   **Пространство имен** — укажите пространство имен инструментария WMI, которое будет использоваться для создания WQL-запроса, оцениваемого на соответствие на клиентских компьютерах. Значение по умолчанию — Root\cimv2.  

        -   **Класс** — укажите класс инструментария WMI, который будет использоваться для создания WQL-запроса, оцениваемого на соответствие на клиентских компьютерах.  

        -   **Свойство** — укажите свойство инструментария WMI, которое будет использоваться для создания WQL-запроса, оцениваемого на соответствие на клиентских компьютерах.  

        -   **Предложение WHERE WQL-запроса** — элемент **Предложение WHERE WQL-запроса** можно использовать для указания предложения WHERE, применяемого к указанному пространству имен, классу и свойству на клиентских компьютерах.  

    -   **Запрос XPath**  

        -   **Путь** — это путь к XML-файлу на клиентских компьютерах, который будет использоваться для оценки соответствия. Configuration Manager поддерживает использование всех переменных среды системы Windows и пользовательскую переменную *%USERPROFILE%* в имени пути.  

        -   **Имя XML-файла** — укажите имя файла, содержащего XML-запрос, который будет использоваться для оценки соответствия на клиентских компьютерах.  

        -   **Включая вложенные папки** — используйте этот параметр, если также требуется выполнить поиск во всех вложенных папках по указанному пути.  

        -   **Этот файл связан с 64-разрядным приложением** — выберите, требуется ли выполнять поиск в расположении файлов 64-разрядной системы (*%windir%*\system32), помимо расположения файлов 32-разрядной системы (*%windir%*\syswow64), в клиентах Configuration Manager, работающих под управлением 64-разрядной версии Windows.  

        -   **Запрос XPath** — укажите действительный полный запрос на языке XPath, который будет использоваться для оценки соответствия на клиентских компьютерах.  

        -   **Пространства имен** — откройте диалоговое окно **Пространства имен XML** , чтобы определить пространства имен и префиксы, используемые во время выполнения запроса XPath.  

3.  В раскрывающемся списке **Тип данных** выберите формат, в котором данные будут возвращаться условием перед их использованием для проверки требований.  

    > [!NOTE]  
    >  Раскрывающийся список **Тип данных** отображается не для всех типов параметров.  

4.  Настройте дополнительные сведения об этом параметре под раскрывающимся списком **Тип параметра**. Элементы, которые можно настроить, будут зависеть от выбранного типа параметра.  

5.  Нажмите кнопку **ОК**, чтобы сохранить правило и закрыть диалоговое окно **Создание глобального условия**.  

### <a name="set-up-an-expression-for-the-global-condition"></a>Настройка выражения глобального условия  

1.  В раскрывающемся списке **Тип условия** выберите **Выражение**.  

2.  Нажмите кнопку **Добавить предложение**, чтобы открыть диалоговое окно **Добавление предложения**.  

3.  В раскрывающемся списке **Выберите категорию** укажите, что предназначено ли данное выражение для устройства или пользователя. Кроме того, выбрав **Настраиваемая** , можно использовать ранее настроенное глобальное условие.  

4.  В раскрывающемся списке **Выберите условие** выберите условие, на основании которого будет оцениваться соответствие пользователя или устройства требованиям правила. Содержимое этого списка зависит от того, какая выбрана категория.  

5.  В раскрывающемся списке **Выберите оператор** укажите оператор, который будет использоваться для сравнения выбранного условия с указанным значением в рамках проверки соответствия пользователя или устройства требованиям правила. Набор доступных операторов зависит от выбранного условия.  

6.  В поле **Значение** укажите значения, по которым с помощью выбранного условия и оператора будет определяться соответствие пользователя или устройства требованиям правила. Набор доступных значений зависит от выбранного условия и оператора.  

7.  Нажмите кнопку **ОК**, чтобы сохранить выражение и закрыть диалоговое окно **Добавление предложения**.  

8.  После добавления предложений в глобальное условие нажмите кнопку **OK**, чтобы закрыть диалоговое окно **Создание глобального условия** и сохранить глобальное условие.  
